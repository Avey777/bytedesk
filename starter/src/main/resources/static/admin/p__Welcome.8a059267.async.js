"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185,2180],{49452:function(e,t,n){n.d(t,{EN:function(){return d},G_:function(){return h},Vh:function(){return g},WN:function(){return m},ry:function(){return x}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ai/statistic/token/query/org",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ai/statistic/token/delete",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return v.apply(this,arguments)}function v(){return(v=u()(i()().mark((function e(t,n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ai/statistic/token/hourly",{method:"GET",params:{orgUid:t,date:n,channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return y.apply(this,arguments)}function y(){return(y=u()(i()().mark((function e(t,n,r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ai/statistic/token/hourly/provider",{method:"GET",params:{orgUid:t,date:n,aiProvider:r,channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return j.apply(this,arguments)}function j(){return(j=u()(i()().mark((function e(t,n,r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ai/statistic/token/hourly/model",{method:"GET",params:{orgUid:t,date:n,aiModelType:r,channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},64132:function(e,t,n){n.d(t,{K_:function(){return g},Np:function(){return h},dx:function(){return x},xH:function(){return m},xs:function(){return d}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/freeswitch/cdr/query/org",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/freeswitch/cdr/create",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/freeswitch/cdr/update",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/freeswitch/cdr/delete",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/freeswitch/cdr/delete/org",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},82615:function(e,t,n){n.d(t,{A8:function(){return d},FR:function(){return k},Kq:function(){return h},RL:function(){return m},c5:function(){return x},jM:function(){return g}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/query",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/create",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/create/by/super",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/update",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/update/by/super",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return Z.apply(this,arguments)}function Z(){return(Z=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/delete",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},92545:function(e,t,n){n.d(t,{Az:function(){return d},Bv:function(){return T},DO:function(){return g},L0:function(){return S},RF:function(){return k},Xc:function(){return x},YO:function(){return w},jX:function(){return m},tu:function(){return h}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/query/org",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/create",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/update",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/delete",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/deleteAll",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return Z.apply(this,arguments)}function Z(){return(Z=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/updateIndex",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return b.apply(this,arguments)}function b(){return(b=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/updateVectorIndex",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return C.apply(this,arguments)}function C(){return(C=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/updateAllIndex",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return M.apply(this,arguments)}function M(){return(M=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/article/updateAllVectorIndex",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},92634:function(e,t,n){n.d(t,{Wq:function(){return d}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queue/query/org",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},72657:function(e,t,n){n.d(t,{Eb:function(){return d},RU:function(){return h},xL:function(){return x}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/service/statistic/query",{method:"GET",params:{channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/service/statistic/query/date",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/service/statistic/calculate",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},67165:function(e,t,n){n.d(t,{AD:function(){return d},Tl:function(){return h}});var r=n(90819),i=n.n(r),a=n(73193),s=n.n(a),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return p.apply(this,arguments)}function p(){return(p=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ticket/statistic/query/date",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=u()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ticket/statistic/calculate",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},74424:function(e,t,n){var r=n(24522);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},84219:function(e,t,n){n.r(t),n.d(t,{default:function(){return me}});var r=n(45332),i=n.n(r),a=n(34599),s=n(33363),o=n(14870),u=n(44194),c=n(90819),l=n.n(c),d=n(89933),p=n.n(d),h=n(68349),f=n(5780),x=n(93892),v=n(27259),m=n(5025),y=n(82615),g=n(18580),j=n(31549),k=function(e){var t=e.open,n=e.onClose,r=e.onSuccess,a=(0,o.useIntl)(),c=((0,o.useModel)("@@initialState").initialState||{}).userInfo,d=(0,u.useState)(!1),k=i()(d,2),Z=k[0],w=k[1],b=(0,u.useState)(""),S=i()(b,2),C=S[0],T=S[1],M=(0,u.useState)(!1),q=i()(M,2),O=q[0],P=q[1],I=(0,u.useState)(!1),D=i()(I,2),J=D[0],E=D[1];(0,u.useEffect)((function(){E((0,g.Nu)())}),[]);var X=function(){var e=p()(l()().mark((function e(){var t,i,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=3;break}return m.yw.error(a.formatMessage({id:"welcome.message.platform.edition.required"},{defaultMessage:"只有平台版才支持创建组织"})),e.abrupt("return");case 3:if(""!==C){e.next=6;break}return m.yw.error(a.formatMessage({id:"welcome.message.org.name.required"})),e.abrupt("return");case 6:return w(!0),m.yw.loading(a.formatMessage({id:"welcome.message.org.creating"})),t=null!=c&&c.mobile?null==c?void 0:c.mobile:null==c?void 0:c.email,i={name:C,code:t,description:C+"description"},e.prev=10,e.next=13,(0,y.Kq)(i);case 13:s=e.sent,console.log("create org response:",s),200===s.code?(w(!1),m.yw.destroy(),m.yw.success(a.formatMessage({id:"welcome.message.create.success"})),r(s.data),n()):(w(!1),m.yw.destroy(),m.yw.error(s.message)),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(10),w(!1),m.yw.destroy(),m.yw.error(a.formatMessage({id:"welcome.message.create.failed"}));case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)(h.Z,{title:a.formatMessage({id:"welcome.modal.title"}),closable:!1,open:t,onCancel:function(){m.yw.error(a.formatMessage({id:"welcome.message.org.required"}))},maskClosable:!1,footer:[(0,j.jsx)(f.ZP,{onClick:function(){(0,s.NZ)()},danger:!0,children:"退出登录"},"logout"),(0,j.jsx)(f.ZP,{type:"primary",onClick:function(){n()},disabled:!0,children:a.formatMessage({id:"welcome.modal.join"})},"join"),(0,j.jsx)(f.ZP,{type:"primary",loading:Z,onClick:function(){J?O?X():(P(!0),w(!1)):m.yw.error(a.formatMessage({id:"welcome.message.platform.edition.required"},{defaultMessage:"只有平台版才支持创建组织"}))},disabled:!J,children:a.formatMessage({id:"welcome.modal.create"})},"create")],children:[(0,j.jsx)("p",{children:a.formatMessage({id:"welcome.modal.description"})}),!J&&(0,j.jsx)(x.Z,{message:(0,j.jsxs)("span",{children:[a.formatMessage({id:"welcome.message.platform.edition.required"},{defaultMessage:"只有平台版才支持创建组织"})," ",(0,j.jsx)("a",{href:"https://www.weiyuai.cn/docs/zh-CN/docs/payment",target:"_blank",rel:"noopener noreferrer",children:"了解更多"})]}),type:"warning",showIcon:!0,style:{marginBottom:16}}),O&&(0,j.jsx)(v.Z,{placeholder:a.formatMessage({id:"welcome.modal.input.placeholder"}),value:C,onChange:function(e){return T(e.target.value)},onPressEnter:X,autoFocus:!0,disabled:!J})]})},Z=function(e){var t=e.open,n=e.onClose,r=(0,o.useIntl)(),i=(0,o.useNavigate)(),a=function(){localStorage.setItem("skipVerification","true"),n()};return(0,j.jsx)(h.Z,{title:r.formatMessage({id:"welcome.verify.modal.title",defaultMessage:"账号验证提示"}),open:t,onCancel:a,footer:[(0,j.jsx)(f.ZP,{onClick:a,children:r.formatMessage({id:"welcome.verify.later",defaultMessage:"稍后验证"})},"later"),(0,j.jsx)(f.ZP,{type:"primary",onClick:function(){n(),i("/setting/certification")},children:r.formatMessage({id:"welcome.verify.now",defaultMessage:"立即验证"})},"now")],children:(0,j.jsx)("p",{children:r.formatMessage({id:"welcome.verify.modal.description",defaultMessage:"您的邮箱和手机号尚未验证，为保障账号安全，建议您尽快完成验证。"})})})},w=n(62399),b=n(5488),S=n(95660),C=n(73193),T=n.n(C),M=n(45516),q=n(72207),O=n(85817),P=n(27473),I=n(88344),D=n(49616),J=n(79401),E=n(78875),X=n(20228),A=n(26411),R=n(84244),N=n(82373),F=n(65532),z=n(2164),H=n(61155),L=n(80556),G=n(58791),Y=n(93878),U=n(70424),K=n(82741),W=n(74840),V=n(58087),_=n(79479),B=n(17811),Q=n(50792),$=n(78867),ee=n(28977),te=n.n(ee),ne=n(72657),re=n(67165),ie=n(49452),ae=n(64132),se=n(92545);function oe(e){return ue.apply(this,arguments)}function ue(){return(ue=p()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/v1/notice/query/org",{method:"GET",params:T()(T()({},t),{},{channel:b.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=n(92634),le=q.default.RangePicker,de=O.Z.Title,pe=O.Z.Text,he=function(e){if(!e||e<=0)return"0s";if(e<60)return"".concat(Math.round(e),"s");var t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,"m ").concat(n,"s")},fe=function(e){return null==e||Number.isNaN(e)?0:Math.max(0,Math.min(100,Math.round(e)))},xe=function(){var e,t,n,r,s,o,c=(0,M.s0)(),d=function(){try{return!1}catch(e){return!1}}(),h=(0,a.u)((function(e){return e.currentOrg})),x=(0,u.useState)([te()().startOf("day").subtract(6,"day"),te()().endOf("day")]),v=i()(x,2),y=v[0],g=v[1],k=(0,u.useState)(),Z=i()(k,2),w=Z[0],S=Z[1],C=(0,u.useState)(),q=i()(C,2),O=q[0],ee=q[1],ue=(0,u.useState)(),xe=i()(ue,2),ve=xe[0],me=xe[1],ye=(0,u.useState)([]),ge=i()(ye,2),je=ge[0],ke=ge[1],Ze=(0,u.useState)(0),we=i()(Ze,2),be=we[0],Se=we[1],Ce=(0,u.useState)([]),Te=i()(Ce,2),Me=Te[0],qe=Te[1],Oe=(0,u.useState)(0),Pe=i()(Oe,2),Ie=Pe[0],De=Pe[1],Je=(0,u.useState)([]),Ee=i()(Je,2),Xe=Ee[0],Ae=Ee[1],Re=(0,u.useState)(0),Ne=i()(Re,2),Fe=Ne[0],ze=Ne[1],He=(0,u.useState)([]),Le=i()(He,2),Ge=Le[0],Ye=Le[1],Ue=(0,u.useMemo)((function(){return{kpis:!0,ticketStatusPie:!0,aiTokenLine:!0,serviceStatusPie:!0,serviceDurationLine:!0,serviceHourlyLine:!0,recentCalls:d,articles:!0,notices:!0,agentPerformance:!0}}),[d]),Ke=(0,u.useState)(Ue),We=i()(Ke,2),Ve=We[0],_e=We[1],Be=(0,u.useState)(!1),Qe=i()(Be,2),$e=Qe[0],et=Qe[1],tt=(0,u.useState)(!1),nt=i()(tt,2),rt=nt[0],it=nt[1],at=(0,u.useMemo)((function(){var e;return null===(e=y[0])||void 0===e?void 0:e.format("YYYY-MM-DD")}),[y]),st=(0,u.useMemo)((function(){var e;return null===(e=y[1])||void 0===e?void 0:e.format("YYYY-MM-DD")}),[y]),ot=(0,u.useCallback)(p()(l()().mark((function e(){var t,n,r,a,s,o,u,c,p,f,x,v,y,g,j,k,Z,w,C,T,M,q,O;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=h&&h.uid){e.next=2;break}return e.abrupt("return");case 2:return it(!0),e.prev=3,t=h.uid,n=d?(0,ae.xs)({orgUid:t,pageNumber:0,pageSize:10,startStamp:"".concat(at," 00:00:00"),endStamp:"".concat(st," 23:59:59"),sortBy:"startStamp",sortDirection:"DESC"}):Promise.resolve(void 0),e.next=8,Promise.all([(0,ne.RU)({orgUid:t,startDate:at,endDate:st,type:b.whQ}),(0,re.AD)({orgUid:t,startDate:at,endDate:st,type:b.whQ}),(0,ie.ry)(t,st||te()().format("YYYY-MM-DD")),n,(0,se.Az)({orgUid:t,pageNumber:0,pageSize:5,sortBy:"createdAt",sortDirection:"DESC"}),oe({orgUid:t,pageNumber:0,pageSize:5,sortBy:"createdAt",sortDirection:"DESC"}),(0,ce.Wq)({orgUid:t,pageNumber:0,pageSize:100,day:st})]);case 8:if(r=e.sent,a=i()(r,7),s=a[0],o=a[1],u=a[2],c=a[3],p=a[4],f=a[5],x=a[6],200!==(null==s?void 0:s.code)||!s.data){e.next=21;break}S(s.data),e.next=25;break;case 21:return e.next=23,(0,ne.Eb)();case 23:200===(null==(v=e.sent)?void 0:v.code)&&S(v.data);case 25:200===(null==o?void 0:o.code)&&ee(o.data),200===(null==u?void 0:u.code)&&me(u.data),d&&c&&"number"==typeof c.code&&200===c.code?(ke((null===(y=(j=c).data)||void 0===y?void 0:y.content)||[]),Se((null===(g=j.data)||void 0===g?void 0:g.totalElements)||0)):d||(ke([]),Se(0)),200===(null==p?void 0:p.code)&&(qe((null===(k=p.data)||void 0===k?void 0:k.content)||[]),De((null===(Z=p.data)||void 0===Z?void 0:Z.totalElements)||0)),200===(null==f?void 0:f.code)&&(Ae((null===(w=f.data)||void 0===w?void 0:w.content)||[]),ze((null===(C=f.data)||void 0===C?void 0:C.totalElements)||0)),200===(null==x?void 0:x.code)&&(M=(null===(T=x.data)||void 0===T?void 0:T.content)||[],q=Array.from({length:24},(function(){return 0})),M.forEach((function(e){(e.threadsCountByHour||[]).forEach((function(e,t){t>=0&&t<24&&(q[t]+=e||0)}))})),Ye(q.map((function(e,t){return{hour:"".concat(t,":00"),count:e}})))),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(3),O=e.t0 instanceof Error?e.t0.message:"加载仪表盘数据失败",m.yw.error(O);case 37:return e.prev=37,it(!1),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[3,33,37,40]])}))),[null==h?void 0:h.uid,at,st]);(0,u.useEffect)((function(){if(null!=h&&h.uid){var e="dashboard_visibility_".concat(h.uid);try{var t=localStorage.getItem(e);if(t){var n=JSON.parse(t);_e(T()(T()({},Ue),n))}else _e(Ue)}catch(e){_e(Ue)}}}),[null==h?void 0:h.uid]),(0,u.useEffect)((function(){if(null!=h&&h.uid){var e="dashboard_visibility_".concat(h.uid);try{localStorage.setItem(e,JSON.stringify(Ve))}catch(e){}}}),[Ve,null==h?void 0:h.uid]),(0,u.useEffect)((function(){ot()}),[ot]);var ut=(0,u.useMemo)((function(){var e=O,t=(null==e?void 0:e.totalTickets)||0;return[{type:"新建",value:(null==e?void 0:e.newTickets)||0},{type:"处理中",value:(null==e?void 0:e.processingTickets)||0},{type:"已解决",value:(null==e?void 0:e.resolvedTickets)||0},{type:"已关闭",value:(null==e?void 0:e.closedTickets)||0},{type:"挂起",value:(null==e?void 0:e.holdingTickets)||0},{type:"待处理",value:(null==e?void 0:e.pendingTickets)||0}].filter((function(e){return e.value>0||0===t}))}),[O]),ct=(0,u.useMemo)((function(){var e=(null==ve?void 0:ve.hourlyData)||[],t=new Map;return e.forEach((function(e){"number"==typeof e.hour&&t.set(e.hour,e)})),Array.from({length:24},(function(e,n){var r,i;return{hour:"".concat(n,":00"),tokens:(null===(r=t.get(n))||void 0===r?void 0:r.totalTokens)||0,requests:(null===(i=t.get(n))||void 0===i?void 0:i.totalRequests)||0}}))}),[ve]),lt=(0,u.useMemo)((function(){var e=w||{},t=[{type:"排队中",value:e.queuingThreadCount||0},{type:"正在服务",value:e.currentThreadCount||0},{type:"已接入",value:e.acceptedThreadCount||0},{type:"已放弃",value:e.abandonedThreadCount||0},{type:"已转接",value:e.transferredThreadCount||0},{type:"邀请接入",value:e.invitedThreadCount||0}],n=t.reduce((function(e,t){return e+(t.value||0)}),0);return t.filter((function(e){return e.value>0||0===n}))}),[w]),dt=(0,u.useMemo)((function(){var e=w||{};return[{bucket:"0-5分钟",value:e.durationWithin5Min||0},{bucket:"5-15分钟",value:e.durationWithin15Min||0},{bucket:"15分钟以上",value:e.durationOver15Min||0}]}),[w]),pt=[{title:"主叫",dataIndex:"callerIdNumber",key:"callerIdNumber",width:140},{title:"被叫",dataIndex:"destinationNumber",key:"destinationNumber",width:140},{title:"开始时间",dataIndex:"startStamp",key:"startStamp",render:function(e){return te()(e).format("MM-DD HH:mm")}},{title:"时长",dataIndex:"billsec",key:"billsec",render:function(e){return he(e)}},{title:"挂断原因",dataIndex:"hangupCause",key:"hangupCause",ellipsis:!0}],ht=[{title:"标题",dataIndex:"title",key:"title",render:function(e){return(0,j.jsx)(P.Z,{title:e,children:(0,j.jsx)(pe,{ellipsis:!0,style:{maxWidth:220,display:"inline-block"},children:e})})}},{title:"阅读",dataIndex:"readCount",key:"readCount",width:100},{title:"发布时间",dataIndex:"createdAt",key:"createdAt",width:160,render:function(e){return te()(e).format("MM-DD HH:mm")}},{title:"状态",key:"published",width:100,render:function(e,t){return t.published?(0,j.jsx)(I.Z,{color:"green",children:"已发布"}):(0,j.jsx)(I.Z,{children:"草稿"})}}],ft=[{title:"标题",dataIndex:"title",key:"title",render:function(e){return(0,j.jsx)(P.Z,{title:e,children:(0,j.jsx)(pe,{ellipsis:!0,style:{maxWidth:320,display:"inline-block"},children:e||"-"})})}},{title:"类型",dataIndex:"type",key:"type",width:120,render:function(e){return e?(0,j.jsx)(I.Z,{color:"blue",children:e}):"-"}},{title:"状态",dataIndex:"status",key:"status",width:120,render:function(e){return e?(0,j.jsx)(I.Z,{color:"published"===e?"green":"draft"===e?"default":"gold",children:e}):"-"}},{title:"发布时间",dataIndex:"createdAt",key:"createdAt",width:160,render:function(e){return e?te()(e).format("MM-DD HH:mm"):"-"}}],xt=[{title:"客服",dataIndex:"name",key:"name"},{title:"在线时长",dataIndex:"onlineTime",key:"onlineTime",render:function(e){return void 0!==e?"".concat(e,"h"):"-"}},{title:"会话数",dataIndex:"sessionCount",key:"sessionCount"},{title:"平均响应",dataIndex:"avgResponseTime",key:"avgResponseTime",render:function(e){return void 0!==e?"".concat(e,"分钟"):"-"}},{title:"平均会话",dataIndex:"avgSessionTime",key:"avgSessionTime",render:function(e){return void 0!==e?"".concat(e,"分钟"):"-"}},{title:"满意度",dataIndex:"satisfaction",key:"satisfaction",render:function(e){return void 0!==e?"".concat(e,"%"):"-"}},{title:"工时",dataIndex:"workingHours",key:"workingHours",render:function(e){return void 0!==e?"".concat(e,"h"):"-"}},{title:"转接率",dataIndex:"transferRate",key:"transferRate",render:function(e){return void 0!==e?"".concat(e,"%"):"-"}},{title:"一次解决率",dataIndex:"firstResolutionRate",key:"firstResolutionRate",render:function(e){return void 0!==e?"".concat(e,"%"):"-"}},{title:"超时数",dataIndex:"overdueCount",key:"overdueCount"}],vt=(0,u.useMemo)((function(){if(!w)return[];var e=w,t=Number(e.acceptedThreadCount||0),n=Number(e.transferredThreadCount||0),r=Number(e.onlineTime||0),i=Number(e.avgFirstResponseTime||0),a=Number(e.avgConversationTime||0),s=r>0?Math.round(r/3600*10)/10:0,o=i>0?Math.round(i/60):0,u=a>0?Math.round(a/60):0,c=fe(e.satisfactionRate),l=t>0?fe(n/t*100):0,d=void 0!==e.firstResolutionRate?fe(e.firstResolutionRate):void 0,p=void 0!==e.overdueThreadCount?Number(e.overdueThreadCount):void 0;return[{key:"org-summary",name:(null==h?void 0:h.name)||"组织汇总",onlineTime:s,sessionCount:t,avgResponseTime:o,avgSessionTime:u,satisfaction:c,workingHours:s,transferRate:l,firstResolutionRate:d,overdueCount:p}]}),[w,null==h?void 0:h.name]);return(0,j.jsxs)(D.Z,{direction:"vertical",size:16,style:{width:"100%"},children:[(0,j.jsx)(J.Z,{variant:"borderless",styles:{body:{padding:16}},children:(0,j.jsxs)(E.Z,{justify:"space-between",align:"middle",gutter:[16,16],children:[(0,j.jsxs)(X.Z,{flex:"auto",children:[(0,j.jsx)(de,{level:4,style:{margin:0},children:"运营概览"}),(0,j.jsx)(pe,{type:"secondary",children:"在线客服、工单、呼叫中心、知识库、AI助手 一体化总览"})]}),(0,j.jsx)(X.Z,{children:(0,j.jsxs)(D.Z,{children:[(0,j.jsx)(le,{allowClear:!1,value:y,onChange:function(e){return e&&g([e[0].startOf("day"),e[1].endOf("day")])},presets:[{label:"今日",value:[te()().startOf("day"),te()().endOf("day")]},{label:"昨日",value:[te()().subtract(1,"day").startOf("day"),te()().subtract(1,"day").endOf("day")]},{label:"近7天",value:[te()().startOf("day").subtract(6,"day"),te()().endOf("day")]},{label:"近30天",value:[te()().startOf("day").subtract(29,"day"),te()().endOf("day")]}]}),(0,j.jsx)(f.ZP,{icon:(0,j.jsx)(L.Z,{}),onClick:ot,children:"刷新"}),(0,j.jsx)(A.Z,{trigger:["click"],open:$e,onOpenChange:et,title:(0,j.jsx)("b",{children:"显示设置"}),content:(0,j.jsxs)(D.Z,{direction:"vertical",size:8,children:[(0,j.jsx)(R.Z,{checked:Ve.kpis,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{kpis:e.target.checked})}))},children:"KPI 指标"}),(0,j.jsx)(N.Z,{style:{margin:"4px 0"}}),(0,j.jsx)(R.Z,{checked:Ve.ticketStatusPie,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{ticketStatusPie:e.target.checked})}))},children:"工单状态分布"}),(0,j.jsx)(R.Z,{checked:Ve.aiTokenLine,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{aiTokenLine:e.target.checked})}))},children:"AI Token 今日使用趋势"}),(0,j.jsx)(N.Z,{style:{margin:"4px 0"}}),(0,j.jsx)(R.Z,{checked:Ve.serviceStatusPie,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{serviceStatusPie:e.target.checked})}))},children:"会话状态分布"}),(0,j.jsx)(R.Z,{checked:Ve.serviceDurationLine,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{serviceDurationLine:e.target.checked})}))},children:"会话时长分布"}),(0,j.jsx)(R.Z,{checked:Ve.serviceHourlyLine,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{serviceHourlyLine:e.target.checked})}))},children:"会话请求时间点"}),(0,j.jsx)(N.Z,{style:{margin:"4px 0"}}),d&&(0,j.jsx)(R.Z,{checked:Ve.recentCalls,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{recentCalls:e.target.checked})}))},children:"最近呼叫"}),(0,j.jsx)(R.Z,{checked:Ve.articles,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{articles:e.target.checked})}))},children:"最近知识库文章"}),(0,j.jsx)(R.Z,{checked:Ve.notices,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{notices:e.target.checked})}))},children:"平台动态"}),(0,j.jsx)(N.Z,{style:{margin:"4px 0"}}),(0,j.jsx)(R.Z,{checked:Ve.agentPerformance,onChange:function(e){return _e((function(t){return T()(T()({},t),{},{agentPerformance:e.target.checked})}))},children:"客服绩效统计"}),(0,j.jsxs)(D.Z,{size:8,children:[(0,j.jsx)(f.ZP,{size:"small",onClick:function(){return _e(Ue)},children:"恢复默认"}),(0,j.jsx)(f.ZP,{size:"small",type:"primary",onClick:function(){return et(!1)},children:"完成"})]})]}),children:(0,j.jsx)(f.ZP,{children:"显示设置"})})]})})]})}),Ve.kpis&&(0,j.jsxs)(E.Z,{gutter:[16,16],children:[(0,j.jsx)(X.Z,{xs:24,sm:12,md:8,lg:6,xl:4,children:(0,j.jsx)(J.Z,{loading:rt,children:(0,j.jsx)(F.Z,{title:(0,j.jsx)(P.Z,{title:"当前在线客服数量 / 总客服数",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/agent")},children:[(0,j.jsx)(G.Z,{})," 在线客服"]})}),value:null!==(e=null==w?void 0:w.onlineAgentCount)&&void 0!==e?e:0,suffix:"/ ".concat(Math.max(0,(null!==(t=null==w?void 0:w.onlineAgentCount)&&void 0!==t?t:0)+(null!==(n=null==w?void 0:w.offlineAgentCount)&&void 0!==n?n:0)))})})}),(0,j.jsx)(X.Z,{xs:24,sm:12,md:8,lg:6,xl:4,children:(0,j.jsx)(J.Z,{loading:rt,children:(0,j.jsx)(F.Z,{title:(0,j.jsx)(P.Z,{title:"当前排队中的会话数量",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(Y.Z,{})," 排队会话"]})}),value:null!==(r=null==w?void 0:w.queuingThreadCount)&&void 0!==r?r:0})})}),(0,j.jsx)(X.Z,{xs:24,sm:12,md:8,lg:6,xl:4,children:(0,j.jsx)(J.Z,{loading:rt,children:(0,j.jsx)(F.Z,{title:(0,j.jsx)(P.Z,{title:"选定时间内已接入会话占比",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(U.Z,{})," 接通率"]})}),value:fe(null==w?void 0:w.acceptRate),suffix:"%"})})}),(0,j.jsx)(X.Z,{xs:24,sm:12,md:8,lg:6,xl:4,children:(0,j.jsx)(J.Z,{loading:rt,children:(0,j.jsx)(F.Z,{title:(0,j.jsx)(P.Z,{title:"从用户发起到客服首次回复的平均时长",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(U.Z,{})," 平均首响"]})}),value:he(null==w?void 0:w.avgFirstResponseTime)})})}),(0,j.jsx)(X.Z,{xs:24,sm:12,md:8,lg:6,xl:4,children:(0,j.jsx)(J.Z,{loading:rt,children:(0,j.jsx)(F.Z,{title:(0,j.jsx)(P.Z,{title:"选定时间内创建的工单总量",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/ticket-service/overview")},children:[(0,j.jsx)(K.Z,{})," 工单总数"]})}),value:null!==(s=null==O?void 0:O.totalTickets)&&void 0!==s?s:0})})}),(0,j.jsx)(X.Z,{xs:24,sm:12,md:8,lg:6,xl:4,children:(0,j.jsx)(J.Z,{loading:rt,children:(0,j.jsx)(F.Z,{title:(0,j.jsx)(P.Z,{title:"客户评价的满意度比例",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/ticket-service/rating")},children:[(0,j.jsx)(W.Z,{})," 满意度"]})}),value:fe(null!==(o=null==O?void 0:O.customerSatisfactionRate)&&void 0!==o?o:null==w?void 0:w.satisfactionRate),suffix:"%"})})})]}),(Ve.serviceStatusPie||Ve.serviceDurationLine)&&(0,j.jsx)(E.Z,{gutter:[16,16],children:Ve.serviceStatusPie&&Ve.serviceDurationLine?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.Z,{xs:24,lg:10,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"在线客服会话的状态分布",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(G.Z,{})," 会话状态分布"]})}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)(Q.Z,{data:lt,angleField:"value",colorField:"type",radius:.9,legend:{position:"bottom"},height:300})})}),(0,j.jsx)(X.Z,{xs:24,lg:14,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"会话时长区间内的会话数量",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(U.Z,{})," 会话时长分布"]})}),extra:(0,j.jsx)(pe,{type:"secondary",children:"单位：会话数"}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)($.Z,{data:dt,xField:"bucket",yField:"value",smooth:!0,height:300,tooltip:{showMarkers:!1},xAxis:{label:{autoRotate:!1}}})})})]}):Ve.serviceStatusPie?(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"在线客服会话的状态分布",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(G.Z,{})," 会话状态分布"]})}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)(Q.Z,{data:lt,angleField:"value",colorField:"type",radius:.9,legend:{position:"bottom"},height:300})})}):(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"会话时长区间内的会话数量",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(U.Z,{})," 会话时长分布"]})}),extra:(0,j.jsx)(pe,{type:"secondary",children:"单位：会话数"}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)($.Z,{data:dt,xField:"bucket",yField:"value",smooth:!0,height:300,tooltip:{showMarkers:!1},xAxis:{label:{autoRotate:!1}}})})})}),Ve.serviceHourlyLine&&(0,j.jsx)(E.Z,{gutter:[16,16],children:(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"每小时发起会话请求的人次",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/thread")},children:[(0,j.jsx)(Y.Z,{})," 在线客服会话请求时间点"]})}),extra:(0,j.jsx)(pe,{type:"secondary",children:"单位：人次/小时"}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)($.Z,{data:Ge,xField:"hour",yField:"count",smooth:!0,height:300,tooltip:{showMarkers:!1},xAxis:{tickCount:12}})})})}),Ve.agentPerformance&&(0,j.jsx)(E.Z,{gutter:[16,16],children:(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"客服维度关键绩效指标汇总",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/online-service/agent")},children:[(0,j.jsx)(G.Z,{})," 客服绩效统计"]})}),extra:(0,j.jsx)(pe,{type:"secondary",children:"按客服汇总"}),loading:rt,children:(0,j.jsx)(H.Z,{rowKey:function(e){return e.key||"".concat(e.name)},size:"small",columns:xt,dataSource:vt,scroll:{x:!0},pagination:{pageSize:10},locale:{emptyText:"暂无数据"}})})})}),(Ve.ticketStatusPie||Ve.aiTokenLine)&&(0,j.jsx)(E.Z,{gutter:[16,16],children:Ve.ticketStatusPie&&Ve.aiTokenLine?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.Z,{xs:24,lg:10,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"选定时间内各状态工单数量占比",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/ticket-service/overview")},children:[(0,j.jsx)(K.Z,{})," 工单状态分布"]})}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)(Q.Z,{data:ut,angleField:"value",colorField:"type",radius:.9,legend:{position:"bottom"},height:300})})}),(0,j.jsx)(X.Z,{xs:24,lg:14,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"今日各小时 Token 消耗趋势",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/robot-service/token")},children:[(0,j.jsx)(V.Z,{})," AI Token 今日使用趋势"]})}),extra:(0,j.jsx)(pe,{type:"secondary",children:"单位：Token"}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)($.Z,{data:ct,xField:"hour",yField:"tokens",smooth:!0,height:300,tooltip:{showMarkers:!1},xAxis:{tickCount:12}})})})]}):Ve.ticketStatusPie?(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"选定时间内各状态工单数量占比",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/ticket-service/overview")},children:[(0,j.jsx)(K.Z,{})," 工单状态分布"]})}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)(Q.Z,{data:ut,angleField:"value",colorField:"type",radius:.9,legend:{position:"bottom"},height:300})})}):(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"今日各小时 Token 消耗趋势",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/robot-service/token")},children:[(0,j.jsx)(V.Z,{})," AI Token 今日使用趋势"]})}),extra:(0,j.jsx)(pe,{type:"secondary",children:"单位：Token"}),loading:rt,children:rt?(0,j.jsx)(z.Z,{active:!0,paragraph:{rows:6}}):(0,j.jsx)($.Z,{data:ct,xField:"hour",yField:"tokens",smooth:!0,height:300,tooltip:{showMarkers:!1},xAxis:{tickCount:12}})})})}),d&&Ve.recentCalls&&(0,j.jsx)(E.Z,{gutter:[16,16],children:(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)(P.Z,{title:"FreeSWITCH 最近呼入/呼出记录（仅调试）",children:(0,j.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return c("/bi/callcenter-service/summary")},children:[(0,j.jsx)(_.Z,{})," 最近呼叫"]})}),extra:(0,j.jsxs)(pe,{type:"secondary",children:["共 ",be," 通"]}),children:(0,j.jsx)(H.Z,{rowKey:function(e){return e.uid},size:"small",loading:rt,columns:pt,dataSource:je,pagination:!1})})})}),(Ve.articles||Ve.notices)&&(0,j.jsx)(E.Z,{gutter:[16,16],children:Ve.articles&&Ve.notices?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.Z,{xs:24,lg:12,children:(0,j.jsx)(J.Z,{title:(0,j.jsxs)("span",{children:[(0,j.jsx)(B.Z,{})," 最近知识库文章"]}),extra:(0,j.jsxs)(pe,{type:"secondary",children:["共 ",Ie," 篇"]}),children:(0,j.jsx)(H.Z,{rowKey:function(e){return e.uid},size:"small",loading:rt,columns:ht,dataSource:Me,pagination:!1})})}),(0,j.jsx)(X.Z,{xs:24,lg:12,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)("span",{children:"平台动态"}),extra:(0,j.jsxs)(pe,{type:"secondary",children:["共 ",Fe," 条"]}),children:(0,j.jsx)(H.Z,{rowKey:function(e){return e.uid},size:"small",loading:rt,columns:ft,dataSource:Xe,pagination:!1})})})]}):Ve.articles?(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsxs)("span",{children:[(0,j.jsx)(B.Z,{})," 最近知识库文章"]}),extra:(0,j.jsxs)(pe,{type:"secondary",children:["共 ",Ie," 篇"]}),children:(0,j.jsx)(H.Z,{rowKey:function(e){return e.uid},size:"small",loading:rt,columns:ht,dataSource:Me,pagination:!1})})}):(0,j.jsx)(X.Z,{xs:24,children:(0,j.jsx)(J.Z,{title:(0,j.jsx)("span",{children:"平台动态"}),extra:(0,j.jsxs)(pe,{type:"secondary",children:["共 ",Fe," 条"]}),children:(0,j.jsx)(H.Z,{rowKey:function(e){return e.uid},size:"small",loading:rt,columns:ft,dataSource:Xe,pagination:!1})})})})]})},ve=n(74424),me=function(){var e=(0,ve.Z)().contentStyle,t=((0,o.useModel)("@@initialState").initialState||{}).userInfo,n=(0,a.u)((function(e){return e.setCurrentOrg})),r=(0,o.useAccess)();r.canDebug&&S.Z.log("Developing canDebug");var c=(0,u.useState)(!1),l=i()(c,2),d=l[0],p=l[1],h=(0,u.useState)(!1),f=i()(h,2),x=f[0],v=f[1];return(0,u.useEffect)((function(){!function(){if(t){if(!t.currentOrganization)return S.Z.log("before initOrganization",t),void p(!0);var e=t.currentOrganization.vipExpireDate;if(S.Z.log("vipExpireDate",e),e){var r=new Date;r.setHours(0,0,0,0);var i=new Date(e);i.setHours(0,0,0,0),r>i&&m.yw.error("当前组织会员已过期，请联系管理员续费",3)}S.Z.log("after initOrganization"),n(t.currentOrganization)}}(),"true"!==localStorage.getItem("skipVerification")&&(!t||t.emailVerified||t.mobileVerified||v(!0)),setTimeout((function(){var e,t;(e=(0,g.NL)())!==b.OsQ&&e||(m.yw.error("检测到非法版本或许可证解密失败，系统将自动退出",3),setTimeout((function(){(0,s.NZ)()}),3e3)),((t=(0,g.Gv)())===b.OsQ||t)&&(m.yw.error("检测到非法版本或许可证解密失败或已过期，系统将自动退出",3),setTimeout((function(){(0,s.NZ)()}),3e3))}),2e3)}),[t]),(0,j.jsxs)("div",{style:e,children:[(0,j.jsx)(o.Access,{accessible:r.canAdmin()&&!r.isCommunityEdition(),fallback:(0,j.jsx)("div",{style:{marginTop:100,textAlign:"center"},children:(0,j.jsx)(w.Z,{description:"企业版&&平台版在此显示统计数据等"})}),children:(0,j.jsx)(xe,{})}),(0,j.jsx)(k,{open:d,onClose:function(){return p(!1)},onSuccess:function(e){n(e),window.location.reload()}}),(0,j.jsx)(Z,{open:x,onClose:function(){return v(!1)}})]})}},34599:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(5488),i=n(16894),a=n(45034),s=n(47401),o=(0,i.Ue)()((0,a.mW)((0,a.tJ)((0,s.n)((function(e,t){return{currentOrg:{uid:"",name:"",description:""},setCurrentOrg:function(t){e({currentOrg:t})},deleteOrg:function(){return e({},!0)}}})),{name:r.IzN})))}}]);