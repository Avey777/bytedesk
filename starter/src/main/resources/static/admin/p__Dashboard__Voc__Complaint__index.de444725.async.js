"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8094,2180],{15722:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(77260),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=a(54183),l=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var i=n.forwardRef(l)},11090:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(77260),n=a(44194),s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},o=a(54183),l=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var i=n.forwardRef(l)},2484:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(77260),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},o=a(54183),l=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var i=n.forwardRef(l)},82669:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(77260),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=a(54183),l=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var i=n.forwardRef(l)},47783:function(e,t,a){var r=a(39328),n=a(17323),s=a(55824),o=a(44194),l=a(32871),i=a(64665),c=a(31549),d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var a=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,h=e.showSearch,x=e.options,M=(0,n.Z)(e,d),y=(0,o.useContext)(l.Z);return(0,c.jsx)(i.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:x,mode:g,showSearch:h,getPopupContainer:y.getPopupContainer},a),ref:t,proFieldProps:f},M),{},{children:u}))},f=o.forwardRef((function(e,t){var a=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,h=e.options,x=(0,n.Z)(e,u),M=(0,r.Z)({options:h,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},a),y=(0,o.useContext)(l.Z);return(0,c.jsx)(i.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:y.getPopupContainer},M),ref:t,proFieldProps:f},x),{},{children:d}))})),g=o.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",t.Z=g},48821:function(e,t,a){var r=a(76285),n=a(39328),s=a(17323),o=a(81424),l=a(20903),i=a(26411),c=a(34573),d=a(44194),u=a(64665),p=a(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",v=function(e){var t=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),a=(0,r.Z)(t,2),s=a[0],c=a[1];return(0,p.jsx)(l.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var a,r=t.getFieldValue(e.name||[]);return(0,p.jsx)(i.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return c(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(a=e.statusRender)||void 0===a?void 0:a.call(e,r),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:s,children:e.children}))}})},h=function(e){var t=e.fieldProps,a=e.proFieldProps,r=(0,s.Z)(e,f);return(0,p.jsx)(u.Z,(0,n.Z)({valueType:m,fieldProps:t,filedConfig:{valueType:m},proFieldProps:a},r))};h.Password=function(e){var t=e.fieldProps,a=e.proFieldProps,o=(0,s.Z)(e,g),l=(0,d.useState)(!1),i=(0,r.Z)(l,2),f=i[0],h=i[1];return null!=t&&t.statusRender&&o.name?(0,p.jsx)(v,{name:o.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:h,children:(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,c.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var a;null==t||null===(a=t.onBlur)||void 0===a||a.call(t,e),h(!1)},onClick:function(e){var a;null==t||null===(a=t.onClick)||void 0===a||a.call(t,e),h(!0)}}),proFieldProps:a,filedConfig:{valueType:m}},o))})}):(0,p.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:t,proFieldProps:a,filedConfig:{valueType:m}},o))},h.displayName="ProFormComponent",t.Z=h},16331:function(e,t,a){var r=a(39328),n=a(17323),s=a(44194),o=a(64665),l=a(31549),i=["fieldProps","proFieldProps"],c=function(e,t){var a=e.fieldProps,s=e.proFieldProps,c=(0,n.Z)(e,i);return(0,l.jsx)(o.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:a,proFieldProps:s},c))};t.Z=s.forwardRef(c)},38197:function(e,t,a){var r=a(39328),n=a(17323),s=a(44194),o=a(64665),l=a(31549),i=["fieldProps","request","params","proFieldProps"],c=function(e,t){var a=e.fieldProps,s=e.request,c=e.params,d=e.proFieldProps,u=(0,n.Z)(e,i);return(0,l.jsx)(o.Z,(0,r.Z)({valueType:"treeSelect",fieldProps:a,ref:t,request:s,params:c,filedConfig:{customLightMode:!0},proFieldProps:d},u))},d=s.forwardRef(c);t.Z=d},34982:function(e,t,a){a.r(t),a.d(t,{default:function(){return se}});var r=a(93322),n=a(74424),s=a(5488),o=a(42699),l=a(84176),i=a.n(l),c=a(73193),d=a.n(c),u=a(90819),p=a.n(u),f=a(89933),g=a.n(f),m=a(45332),v=a.n(m),h=a(44194),x=a(68349),M=a(88344),y=a(27473),w=a(5780),Z=a(78359),j=a(5025),P=a(14870);function b(e){return C.apply(this,arguments)}function C(){return(C=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/api/v1/complaint/query/org",{method:"GET",params:d()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/api/v1/complaint/create",{method:"POST",data:d()(d()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return O.apply(this,arguments)}function O(){return(O=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/api/v1/complaint/update",{method:"POST",data:d()(d()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return E.apply(this,arguments)}function E(){return(E=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/api/v1/complaint/delete",{method:"POST",data:d()(d()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return z.apply(this,arguments)}function z(){return(z=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/api/v1/complaint/delete/all",{method:"POST",data:d()(d()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=a(34599),R=a(8065),$=a(15722),N=a(5321),A=a(10162),D=a(11090),G=a(2484),B=a(54881),H=a(81084),L=a(28977),U=a.n(L),V=a(18580),J=a(32394),W=a(48821),X=a(47783),Y=a(16331),Q=a(68724),K=a(49616),_=a(31549),ee=function(e){var t=e.isEdit,a=e.isViewMode,r=void 0!==a&&a,n=e.complaint,s=e.open,o=(e.level,e.onClose),l=e.onSubmit,i=J.A.useForm(),c=v()(i,1)[0],d=(0,P.useIntl)(),u=(0,q.u)((function(e){return e.currentOrg}));(0,h.useEffect)((function(){t&&n&&c?c.setFieldsValue({uid:null==n?void 0:n.uid,name:null==n?void 0:n.name,type:null==n?void 0:n.type,description:null==n?void 0:n.description,level:null==n?void 0:n.level,platform:null==n?void 0:n.platform}):(console.log("form resetFields"),c.resetFields())}),[n,c,t]);var p=function(){console.log("handleSubmit"),c.validateFields().then((function(e){console.log("Form values:",e);var a={uid:t?null==n?void 0:n.uid:"",name:e.name,type:e.type,description:e.description,level:e.level,platform:e.platform,orgUid:null==u?void 0:u.uid};console.log("complaintObject:",a),l(a)})).catch((function(e){console.log("Form errors:",e)}))},f=r?d.formatMessage({id:"pages.complaint.drawer.view",defaultMessage:"查看投诉"}):t?d.formatMessage({id:"pages.complaint.drawer.edit",defaultMessage:"编辑投诉"}):d.formatMessage({id:"pages.complaint.drawer.create",defaultMessage:"新建投诉"});return(0,_.jsx)("div",{children:(0,_.jsx)(Q.Z,{title:f,width:650,onClose:o,open:s,extra:r?null:(0,_.jsxs)(K.Z,{children:[(0,_.jsx)(w.ZP,{onClick:o,children:d.formatMessage({id:"pages.complaint.drawer.cancel",defaultMessage:"取消"})}),(0,_.jsx)(w.ZP,{onClick:p,type:"primary",children:d.formatMessage({id:"pages.complaint.drawer.save",defaultMessage:"保存"})})]}),children:(0,_.jsxs)(J.A,{form:c,name:"complaint",submitter:!t&&!r&&{searchConfig:{resetText:d.formatMessage({id:"pages.complaint.drawer.cancel",defaultMessage:"取消"}),submitText:d.formatMessage({id:"pages.complaint.drawer.save",defaultMessage:"保存"})},onReset:o},onFinish:t||r?void 0:p,children:[(0,_.jsx)(W.Z,{label:d.formatMessage({id:"pages.complaint.drawer.name",defaultMessage:"名称"}),name:"name",required:!0,readonly:r,tooltip:d.formatMessage({id:"pages.complaint.drawer.name.tooltip",defaultMessage:"投诉名称"}),fieldProps:{placeholder:d.formatMessage({id:"pages.complaint.drawer.name.placeholder",defaultMessage:"请输入投诉名称"})}}),(0,_.jsx)(W.Z,{label:d.formatMessage({id:"pages.complaint.drawer.type",defaultMessage:"类型"}),name:"type",readonly:r,tooltip:d.formatMessage({id:"pages.complaint.drawer.type.tooltip",defaultMessage:"投诉类型"}),fieldProps:{placeholder:d.formatMessage({id:"pages.complaint.drawer.type.placeholder",defaultMessage:"请输入投诉类型"})}}),(0,_.jsx)(X.Z,{label:d.formatMessage({id:"pages.complaint.drawer.level",defaultMessage:"级别"}),name:"level",readonly:r,tooltip:d.formatMessage({id:"pages.complaint.drawer.level.tooltip",defaultMessage:"投诉级别"}),options:[{label:"高",value:"HIGH"},{label:"中",value:"MEDIUM"},{label:"低",value:"LOW"}],fieldProps:{placeholder:d.formatMessage({id:"pages.complaint.drawer.level.placeholder",defaultMessage:"请选择投诉级别"})}}),(0,_.jsx)(W.Z,{label:d.formatMessage({id:"pages.complaint.drawer.platform",defaultMessage:"平台"}),name:"platform",readonly:r,tooltip:d.formatMessage({id:"pages.complaint.drawer.platform.tooltip",defaultMessage:"投诉平台"}),fieldProps:{placeholder:d.formatMessage({id:"pages.complaint.drawer.platform.placeholder",defaultMessage:"请输入投诉平台"})}}),(0,_.jsx)(Y.Z,{label:d.formatMessage({id:"pages.complaint.drawer.description",defaultMessage:"描述"}),name:"description",readonly:r,fieldProps:{placeholder:d.formatMessage({id:"pages.complaint.drawer.description.placeholder",defaultMessage:"请输入投诉描述"}),rows:6},tooltip:d.formatMessage({id:"pages.complaint.drawer.description.tooltip",defaultMessage:"详细描述投诉内容"})})]})})})},te=["current","pageSize","name","description"],ae=function(e){var t=e.level,a=(0,h.useRef)(),r=(0,P.useIntl)(),n=(0,h.useState)(!0),o=v()(n,2),l=o[0],c=o[1],u=(0,h.useState)(!1),f=v()(u,2),m=f[0],C=f[1],k=(0,h.useState)(1),O=v()(k,2),E=O[0],z=O[1],L=(0,h.useState)(10),J=v()(L,2),W=J[0],X=J[1],Y=(0,h.useState)(!1),Q=v()(Y,2),K=Q[0],ae=Q[1],re=(0,h.useState)({}),ne=v()(re,2),se=ne[0],oe=ne[1],le=(0,q.u)((function(e){return e.currentOrg})),ie=(0,R.v)((function(e){return e.currentCategory})),ce=x.Z.useModal(),de=v()(ce,2),ue=de[0],pe=de[1],fe=(0,h.useState)(0),ge=v()(fe,2),me=ge[0],ve=ge[1],he=(0,h.useState)({}),xe=v()(he,2),Me=xe[0],ye=xe[1],we=function(){ue.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,_.jsx)($.Z,{}),content:r.formatMessage({id:"deleteAllAffirm",defaultMessage:"Delete all complaints?"}),onOk:function(){je()},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})})},Ze=function(){var e=g()(p()().mark((function e(t){var n,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading(r.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,F({uid:t.uid});case 3:200===(n=e.sent).code?(j.yw.destroy(),j.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),null===(s=a.current)||void 0===s||s.reload()):(j.yw.destroy(),j.yw.error(n.message));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=g()(p()().mark((function e(){var t,n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading(r.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,I({orgUid:null==le?void 0:le.uid});case 3:200===(t=e.sent).code?(j.yw.destroy(),j.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),null===(n=a.current)||void 0===n||n.reload()):(j.yw.destroy(),j.yw.error(t.message));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=g()(p()().mark((function e(t){var n,s,o,i;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=8;break}return j.yw.loading(r.formatMessage({id:"updating",defaultMessage:"Updating"})),e.next=4,T(t);case 4:200===(n=e.sent).code?(j.yw.success(r.formatMessage({id:"update.success",defaultMessage:"update success"})),null===(s=a.current)||void 0===s||s.reload(),ae(!1)):j.yw.error(n.message),e.next=13;break;case 8:return j.yw.loading(r.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=11,S(t);case 11:200===(o=e.sent).code?(j.yw.success(r.formatMessage({id:"create.success",defaultMessage:"create success"})),null===(i=a.current)||void 0===i||i.reload(),ae(!1)):j.yw.error(o.message);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.reload()}),[ie]);var be=function(){var e=g()(p()().mark((function e(a,r,n){var o,l;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",a,r,n),o=localStorage.getItem(s.LA8),l=d()({orgUid:t===s.Hxq?"":null==le?void 0:le.uid,categoryUid:(null==ie?void 0:ie.uid)===s.zBg?"":null==ie?void 0:ie.uid,accessToken:o||"",exportType:a},Me),"current"===a?(l.pageNumber=String(E-1),l.pageSize=String(W)):"all"===a?(l.pageNumber="0",l.pageSize="1000"):"range"===a&&void 0!==r&&void 0!==n&&(l.pageNumber=String(r),l.pageSize=String(n)),window.open((0,V.kG)()+"/api/v1/complaint/export?"+new URLSearchParams(l).toString());case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),Ce=function(e){for(var t=[],a=1e3,r=Math.ceil(e/a),n=function(){var r=s,n=s*a+1,o=Math.min((s+1)*a,e);t.push({key:"export-".concat(s),label:"".concat(n,"-").concat(o," (").concat(o-n+1,"条)"),onClick:function(){return be("range",r,a)}})},s=0;s<r;s++)n();return t},Se=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:r.formatMessage({id:"pages.complaint.name",defaultMessage:"名称"}),dataIndex:"name",hideInSearch:!1,fixed:"left",width:200,copyable:!0,ellipsis:!0,tooltip:r.formatMessage({id:"pages.complaint.name.tooltip",defaultMessage:"投诉名称"}),render:function(e,t){return t.name||"-"}},{title:r.formatMessage({id:"pages.complaint.type",defaultMessage:"类型"}),dataIndex:"type",width:120,copyable:!0,ellipsis:!0,tooltip:r.formatMessage({id:"pages.complaint.type.tooltip",defaultMessage:"投诉类型"}),render:function(e,t){return t.type||"-"}},{title:r.formatMessage({id:"pages.complaint.description",defaultMessage:"描述"}),dataIndex:"description",ellipsis:!0,hideInSearch:!1,copyable:!0,width:300,tooltip:r.formatMessage({id:"pages.complaint.description.tooltip",defaultMessage:"投诉描述"}),render:function(e,t){return t.description||"-"}},{title:r.formatMessage({id:"pages.complaint.level",defaultMessage:"级别"}),dataIndex:"level",width:100,tooltip:r.formatMessage({id:"pages.complaint.level.tooltip",defaultMessage:"投诉级别"}),render:function(e,t){if(t.level){return(0,_.jsx)(M.Z,{color:{HIGH:"red",MEDIUM:"orange",LOW:"green"}[t.level]||"default",children:t.level})}return"-"}},{title:r.formatMessage({id:"pages.complaint.platform",defaultMessage:"平台"}),dataIndex:"platform",width:120,tooltip:r.formatMessage({id:"pages.complaint.platform.tooltip",defaultMessage:"投诉平台"}),render:function(e,t){return t.platform||"-"}},{title:r.formatMessage({id:"pages.complaint.createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,width:160,hideInSearch:!0,tooltip:r.formatMessage({id:"pages.complaint.createdAt.tooltip",defaultMessage:"投诉创建时间"}),render:function(e,t){return t.createdAt?U()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:r.formatMessage({id:"actions",defaultMessage:"操作"}),dataIndex:"option",valueType:"option",width:120,fixed:"right",tooltip:r.formatMessage({id:"pages.complaint.actions.tooltip",defaultMessage:"可进行的操作"}),render:function(e,t){return[(0,_.jsx)(y.Z,{title:r.formatMessage({id:"pages.complaint.view",defaultMessage:"查看"}),children:(0,_.jsx)("a",{onClick:function(){return function(e){c(!0),C(!0),oe(e),ae(!0)}(t)},children:(0,_.jsx)(N.Z,{})})},"view"),(0,_.jsx)("a",{onClick:function(){return function(e){c(!0),C(!1),oe(e),ae(!0)}(t)},children:r.formatMessage({id:"pages.complaint.edit",defaultMessage:"Edit"})},"edit"),(0,_.jsx)("a",{onClick:function(){return e=t,void ue.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,_.jsx)($.Z,{}),content:"".concat(r.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.name,"】？"),onOk:function(){Ze(e)},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})});var e},children:r.formatMessage({id:"pages.complaint.delete",defaultMessage:"Delete"})},"delete")]}}],ke=function(){var e=g()(p()().mark((function e(a,n,o){var l,c,u,f,g,m,v,h,x,M;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),l=a.current,c=a.pageSize,u=a.name,f=a.description,g=i()(a,te),z(l),X(c),ye(d()(d()({},g),{},{name:u,description:f})),m=void 0,v=void 0,n&&Object.keys(n).length>0&&(h=Object.keys(n)[0],m=h,v="ascend"===n[h]?"ascend":"descend"),x=d()({pageNumber:l-1,pageSize:c,orgUid:t===s.Hxq?"":null==le?void 0:le.uid,name:u,description:f,sortBy:m,sortDirection:v},g),e.next=11,b(x);case 11:if(M=e.sent,console.log("queryComplaintsByOrg response:",M,x),200!==M.code){e.next=19;break}return j.yw.destroy(),ve(M.data.totalElements),e.abrupt("return",{data:M.data.content,success:!0,total:M.data.totalElements});case 19:return j.yw.destroy(),j.yw.error(M.message),e.abrupt("return",{data:[],success:!1,total:0});case 22:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(H.Z,{columns:Se,actionRef:a,cardBordered:!0,rowKey:"uid",scroll:{x:1e3},search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,pageSize:10,onChange:function(e,t){z(e),X(t)}},dateFormatter:"string",headerTitle:r.formatMessage({id:"pages.complaint.list",defaultMessage:"客户投诉列表"}),toolBarRender:function(){var e=[(0,_.jsx)(w.ZP,{type:"primary",onClick:function(){c(!1),C(!1),oe({}),ae(!0)},icon:(0,_.jsx)(A.Z,{}),children:r.formatMessage({id:"pages.complaint.create",defaultMessage:"添加投诉"})},"create")],t=[{key:"export-current",icon:(0,_.jsx)(D.Z,{}),label:r.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return be("current")}}];return me>0&&(me<=1e3?t.push({key:"export-all",icon:(0,_.jsx)(D.Z,{}),label:r.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(me,"条)"),onClick:function(){return be("all")}}):t.push({key:"export-range",icon:(0,_.jsx)(D.Z,{}),label:r.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(me,"条)"),children:Ce(me)})),e.push((0,_.jsx)(Z.Z,{menu:{items:t},placement:"bottom",children:(0,_.jsxs)(w.ZP,{type:"primary",icon:(0,_.jsx)(D.Z,{}),children:[r.formatMessage({id:"export",defaultMessage:"导出"}),(0,_.jsx)(G.Z,{})]})},"export")),e.push((0,_.jsx)(w.ZP,{danger:!0,onClick:we,icon:(0,_.jsx)(B.Z,{}),children:r.formatMessage({id:"pages.complaint.deleteAll",defaultMessage:"删除全部"})},"deleteAll")),e},request:ke}),K&&(0,_.jsx)(ee,{isEdit:l,isViewMode:m,complaint:se,level:t,open:K,onClose:function(){ae(!1),C(!1)},onSubmit:Pe}),pe]})},re=r.Z.Sider,ne=r.Z.Content,se=function(){var e=(0,n.Z)(),t=e.leftSiderStyle,a=e.leftSiderWidth,l=e.contentStyle;return(0,_.jsxs)(r.Z,{children:[(0,_.jsx)(re,{width:a,style:t,children:(0,_.jsx)(o.Z,{type:s.URt,level:s.whQ,showKbase:!1})}),(0,_.jsx)(r.Z,{children:(0,_.jsx)(ne,{style:l,children:(0,_.jsx)(ae,{level:s.whQ})})})]})}},34599:function(e,t,a){a.d(t,{u:function(){return l}});var r=a(5488),n=a(16894),s=a(45034),o=a(47401),l=(0,n.Ue)()((0,s.mW)((0,s.tJ)((0,o.n)((function(e,t){return{currentOrg:{uid:"",name:"",description:""},setCurrentOrg:function(t){e({currentOrg:t})},deleteOrg:function(){return e({},!0)}}})),{name:r.IzN})))},90317:function(e,t,a){a.d(t,{Z:function(){return j}});var r=a(44194),n=a(51865),s=a.n(n),o=a(34573),l=a(86992),i=a(35779),c=a(79255),d=a(77167);const u=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],f=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return s()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const a=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${a}`]:a&&u.includes(a)}})(e,t)),((e,t)=>{const a={};return f.forEach((r=>{a[`${e}-align-${r}`]=t.align===r})),a[`${e}-align-stretch`]=!t.align&&!!t.vertical,a})(e,t)),((e,t)=>{const a={};return p.forEach((r=>{a[`${e}-justify-${r}`]=t.justify===r})),a})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},v=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},h=e=>{const{componentCls:t}=e,a={};return u.forEach((e=>{a[`${t}-wrap-${e}`]={flexWrap:e}})),a},x=e=>{const{componentCls:t}=e,a={};return f.forEach((e=>{a[`${t}-align-${e}`]={alignItems:e}})),a},M=e=>{const{componentCls:t}=e,a={};return p.forEach((e=>{a[`${t}-justify-${e}`]={justifyContent:e}})),a};var y=(0,c.I$)("Flex",(e=>{const{paddingXS:t,padding:a,paddingLG:r}=e,n=(0,d.IX)(e,{flexGapSM:t,flexGap:a,flexGapLG:r});return[m(n),v(n),h(n),x(n),M(n)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const Z=r.forwardRef(((e,t)=>{const{prefixCls:a,rootClassName:n,className:c,style:d,flex:u,gap:p,vertical:f=!1,component:m="div"}=e,v=w(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component"]),{flex:h,direction:x,getPrefixCls:M}=r.useContext(i.E_),Z=M("flex",a),[j,P,b]=y(Z),C=null!=f?f:null==h?void 0:h.vertical,S=s()(c,n,null==h?void 0:h.className,Z,P,b,g(Z,e),{[`${Z}-rtl`]:"rtl"===x,[`${Z}-gap-${p}`]:(0,l.n)(p),[`${Z}-vertical`]:C}),k=Object.assign(Object.assign({},null==h?void 0:h.style),d);return u&&(k.flex=u),p&&!(0,l.n)(p)&&(k.gap=p),j(r.createElement(m,Object.assign({ref:t,className:S,style:k},(0,o.Z)(v,["justify","wrap","align"]))))}));var j=Z}}]);