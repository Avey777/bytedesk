"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3247],{20252:function(e,n,r){r.d(n,{Jr:function(){return p},LF:function(){return u},Oh:function(){return h},WS:function(){return v}});var t=r(90819),o=r.n(t),l=r(73193),a=r.n(l),i=r(89933),s=r.n(i),d=r(2622),c=r(59318);function u(e){return m.apply(this,arguments)}function m(){return(m=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/query/org",{method:"GET",params:a()(a()({},n),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/create",{method:"POST",data:a()(a()({},n),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/update",{method:"POST",data:a()(a()({},n),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/delete",{method:"POST",data:a()(a()({},n),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},44631:function(e,n,r){r.d(n,{G9:function(){return w},J$:function(){return b},N6:function(){return y},VM:function(){return d},c8:function(){return u},gF:function(){return v},rg:function(){return p},sF:function(){return h}});var t=r(90819),o=r.n(t),l=r(89933),a=r.n(l),i=r(2622),s=r(59318);function d(){return c.apply(this,arguments)}function c(){return(c=a()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/ping",{method:"GET",params:{channel:i.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return m.apply(this,arguments)}function m(){return(m=a()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/local-models",{method:"GET",params:{channel:i.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=a()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/models",{method:"GET",params:{channel:i.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/library/models/"+n+"/details",{method:"GET",params:{channel:i.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/models/"+n+"/details",{method:"GET",params:{channel:i.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return j.apply(this,arguments)}function j(){return(j=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/models/pull",{method:"POST",params:{channel:i.XtJ},data:{model:n}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return P.apply(this,arguments)}function P(){return(P=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/models/delete",{method:"POST",params:{channel:i.XtJ},data:{model:n}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return Z.apply(this,arguments)}function Z(){return(Z=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/ollama4j/embedding-model/exists",{method:"GET",params:{channel:i.XtJ,model:n}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},76450:function(e,n,r){var t=r(90819),o=r.n(t),l=r(89933),a=r.n(l),i=r(45332),s=r.n(i),d=r(44194),c=r(37420),u=r(78929),m=r(31557),p=r(67794),f=r(59318),v=r(71589),g=r(42286),h=r(20374),x=r(15716),y=r(49297),j=r(59983),w=r(89520),P=r(2622),b=r(83381),Z=r(6992),k=r(23195),M=r(57575),C=r(90616),L=r(31549);n.Z=function(e){var n,r,t=e.level,l=e.superUser,i=(0,m.Z)().isDarkMode,S=(0,f.useIntl)(),z=(0,p.Z)(),I=z.translateString,T=z.translateStringTranct,U=(0,w.u)((function(e){return e.currentOrg})),E=(0,d.useState)(!1),R=s()(E,2),q=R[0],O=R[1],N=(0,d.useState)(!1),F=s()(N,2),A=F[0],D=F[1],K=(0,k.A)((function(e){return{llmproviderResult:e.llmproviderResult,currentLlmProvider:e.currentLlmProvider,setLlmProviderResult:e.setLlmProviderResult,insertLlmProvider:e.insertLlmProvider,setCurrentLlmProvider:e.setCurrentLlmProvider,upgradeLlmProvider:e.upgradeLlmProvider,deleteCurrentLlmProvider:e.deleteCurrentLlmProvider}})),J=K.llmproviderResult,B=K.currentLlmProvider,_=K.setLlmProviderResult,G=K.insertLlmProvider,X=K.setCurrentLlmProvider,H=K.upgradeLlmProvider,V=K.deleteCurrentLlmProvider,Y=(0,C.$)((function(e){return{llmproviderResultPlatform:e.llmproviderResultPlatform,currentLlmProviderPlatform:e.currentLlmProviderPlatform,setLlmProviderResultPlatform:e.setLlmProviderResultPlatform,insertLlmProviderPlatform:e.insertLlmProviderPlatform,setCurrentLlmProviderPlatform:e.setCurrentLlmProviderPlatform,upgradeLlmProviderPlatform:e.upgradeLlmProviderPlatform,deleteCurrentLlmProviderPlatform:e.deleteCurrentLlmProviderPlatform}})),W=Y.llmproviderResultPlatform,$=Y.currentLlmProviderPlatform,Q=Y.setLlmProviderResultPlatform,ee=Y.insertLlmProviderPlatform,ne=Y.setCurrentLlmProviderPlatform,re=Y.upgradeLlmProviderPlatform,te=Y.deleteCurrentLlmProviderPlatform,oe=(0,d.useState)(t===P.Hxq),le=s()(oe,1)[0],ae=le?$:B,ie=v.Z.useModal(),se=s()(ie,2),de=se[0],ce=se[1],ue=function(){var e=a()(o()().mark((function e(n){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),u.yw.loading(S.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,c.HH)(n);case 4:r=e.sent,console.log("delete robot response",r),200===r.code?(u.yw.destroy(),u.yw.success(S.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),le?te(n.uid):V(n.uid)):(u.yw.destroy(),u.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),me=function(){var e=a()(o()().mark((function e(){var n,r,l,a,i,s;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmProviders"),n={pageNumber:0,pageSize:50,sortBy:"createdAt",sortDirection:"ascend",status:t===P.Hxq?"":P.KY,orgUid:t===P.Hxq?"":null==U?void 0:U.uid,level:t},e.next=4,(0,c.mK)(n);case 4:r=e.sent,console.log("queryLlmProvidersByOrg: ",r),200===r.code?le?(Q(r),(null==r||null===(l=r.data)||void 0===l?void 0:l.content.length)>0&&ne(null==r||null===(a=r.data)||void 0===a?void 0:a.content[0])):(_(r),(null==r||null===(i=r.data)||void 0===i?void 0:i.content.length)>0&&X(null==r||null===(s=r.data)||void 0===s?void 0:s.content[0])):u.yw.error(r.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){me()}),[]);var pe=function(){var e=a()(o()().mark((function e(n){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createLlmProvider",n),u.yw.loading(S.formatMessage({id:"creating"})),e.next=4,(0,c.T)(n);case 4:r=e.sent,console.log("createLlmProvider:",r),200===r.code?(u.yw.destroy(),u.yw.success(S.formatMessage({id:"create.success",defaultMessage:"create success"})),le?ee(r.data):G(r.data),O(!1)):(u.yw.destroy(),u.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fe=function(){var e=a()(o()().mark((function e(n){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.yw.loading(S.formatMessage({id:"updating"})),e.next=3,(0,c.fx)(n);case 3:r=e.sent,console.log("updateLlmProvider:",n,r),200===r.code?(u.yw.destroy(),u.yw.success(S.formatMessage({id:"update.success",defaultMessage:"update success"})),le?re(r.data):H(r.data),O(!1)):(u.yw.destroy(),u.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{margin:10},children:(0,L.jsxs)(g.Z,{gap:"small",align:"flex-start",children:[(0,L.jsx)(h.ZP,{size:"small",type:"primary",icon:(0,L.jsx)(Z.Z,{}),onClick:function(){console.log("new llmProvider"),D(!1),O(!0)},children:S.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,L.jsx)(h.ZP,{size:"small",onClick:function(){console.log("edit llmProvider"),D(!0),O(!0)},disabled:""===(null==ae?void 0:ae.uid),children:S.formatMessage({id:"edit",defaultMessage:"Edit"})}),(0,L.jsx)(h.ZP,{onClick:function(){return function(e){de.confirm({title:S.formatMessage({id:"deleteTip"}),icon:(0,L.jsx)(b.Z,{}),content:"".concat(S.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(I(e.nickname),"】？"),onOk:function(){ue(e)},onCancel:function(){},okText:S.formatMessage({id:"ok"}),cancelText:S.formatMessage({id:"cancel"})})}(ae)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==ae?void 0:ae.uid),children:S.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),(0,L.jsx)(x.Z,{itemLayout:"horizontal",dataSource:le?(null==W||null===(n=W.data)||void 0===n?void 0:n.content)||[]:(null==J||null===(r=J.data)||void 0===r?void 0:r.content)||[],renderItem:function(e,n){return(0,L.jsx)(x.Z.Item,{style:(null==ae?void 0:ae.uid)===e.uid?{backgroundColor:i?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return n=e,void(le?ne(n):X(n));var n},children:(0,L.jsx)(x.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,L.jsx)(y.Z,{src:e.logo}),title:(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,L.jsx)("span",{children:T(null==e?void 0:e.nickname)}),(0,L.jsx)(j.Z,{color:null!=e&&e.enabled?"green":"red",children:null!=e&&e.enabled?"启用":"禁用"})]}),description:(0,L.jsxs)("div",{children:[l&&(0,L.jsx)("div",{children:(null==e?void 0:e.status)===P.KY?"上线发布":"未上线"}),(null==e?void 0:e.description)&&(0,L.jsx)("div",{style:{marginTop:l?"4px":"0",color:"#666"},children:e.description})]})})})}}),q&&(0,L.jsx)(M.Z,{open:q,isEdit:A,level:t,llmProvider:ae,onCancel:function(){O(!1)},onSubmit:function(e){A?fe(e):pe(e)}}),ce]})}},99627:function(e,n,r){r.d(n,{Z:function(){return ye}});var t=r(76711),o=r.n(t),l=r(45332),a=r.n(l),i=r(44194),s=r(43807),d=r(86222),c=r.n(d),u=r(73193),m=r.n(u),p=r(90819),f=r.n(p),v=r(89933),g=r.n(v),h=r(78929),x=r(20252),y=r(89520),j=r(2622),w=r(58889),P=r(71589),b=r(49297),Z=r(67333),k=r(20374),M=r(2462),C=r(12722),L=r(56389),S=r(15716),z=r(62821),I=r(92964),T=r(59935),U=r(67896),E=r(22916),R=r(81396),q=r(18613),O=r(59318),N=r(31549),F=function(e){var n=e.isEdit,r=e.llmmodel,t=e.provider,o=e.open,l=e.level,s=e.onClose,d=e.onSubmit,c=I.A.useForm(),u=a()(c,1)[0],m=(0,O.useIntl)(),p=(0,y.u)((function(e){return e.currentOrg})),f=[{label:m.formatMessage({id:"model.type.text"}),value:j.l55},{label:m.formatMessage({id:"model.type.embedding"}),value:j.xTq},{label:m.formatMessage({id:"model.type.rerank"}),value:j.SeQ},{label:m.formatMessage({id:"model.type.vision"}),value:j.xZ8},{label:m.formatMessage({id:"model.type.code"}),value:j.rrk},{label:m.formatMessage({id:"model.type.reasoning"}),value:j.GNM},{label:m.formatMessage({id:"model.type.text2image"}),value:j.eQL},{label:m.formatMessage({id:"model.type.image2text"}),value:j.ztv},{label:m.formatMessage({id:"model.type.audio2text"}),value:j._D8},{label:m.formatMessage({id:"model.type.text2audio"}),value:j.YNO},{label:m.formatMessage({id:"model.type.text2video"}),value:j.GZK},{label:m.formatMessage({id:"model.type.video2text"}),value:j.B6M}];(0,i.useEffect)((function(){var e;n&&r&&u?u.setFieldsValue({uid:null==r?void 0:r.uid,name:null==r?void 0:r.name,nickname:null==r?void 0:r.nickname,description:null==r?void 0:r.description,type:null==r?void 0:r.type,enabled:null!==(e=null==r?void 0:r.enabled)&&void 0!==e&&e}):(console.log("form resetFields"),u.resetFields(),u.setFieldValue("type",j.l55),u.setFieldValue("enabled",!0))}),[r]);return(0,i.useEffect)((function(){}),[r]),(0,N.jsx)("div",{children:(0,N.jsx)(q.Z,{title:n?m.formatMessage({id:"model.edit"}):m.formatMessage({id:"model.create"}),width:600,onClose:s,open:o,extra:(0,N.jsxs)(C.Z,{children:[(0,N.jsx)(k.ZP,{onClick:s,children:m.formatMessage({id:"cancel"})}),(0,N.jsx)(k.ZP,{onClick:function(){console.log("handleSubmit"),u.validateFields().then((function(e){var o;console.log("Form values:",e);var a={uid:n?null==r?void 0:r.uid:"",name:e.name,nickname:e.nickname,description:e.description,type:e.type,enabled:null===(o=e.enabled)||void 0===o||o,providerUid:null==t?void 0:t.uid,providerName:null==t?void 0:t.name,level:l,orgUid:null==p?void 0:p.uid};console.log("llmmodelObject:",a),d(a)})).catch((function(e){console.log("Form errors:",e)}))},type:"primary",children:m.formatMessage({id:"ok"})})]}),children:(0,N.jsxs)(I.A,{form:u,name:"model",submitter:!1,children:[(0,N.jsx)(T.Z,{label:m.formatMessage({id:"model.name"}),name:"name"}),(0,N.jsx)(T.Z,{label:m.formatMessage({id:"model.nickname"}),name:"nickname"}),(0,N.jsx)(U.Z,{label:m.formatMessage({id:"model.description"}),name:"description",placeholder:m.formatMessage({id:"model.description.placeholder"}),fieldProps:{rows:3,maxLength:500,showCount:!0}}),(0,N.jsx)(E.Z,{label:m.formatMessage({id:"model.type"}),name:"type",options:f,placeholder:m.formatMessage({id:"model.type.placeholder"}),rules:[{required:!0,message:m.formatMessage({id:"model.type.required"})}]}),(0,N.jsx)(R.Z,{label:m.formatMessage({id:"model.enabled",defaultMessage:"启用状态"}),name:"enabled",tooltip:m.formatMessage({id:"model.enabled.tooltip",defaultMessage:"是否启用该大模型"}),checkedChildren:m.formatMessage({id:"enabled",defaultMessage:"启用"}),unCheckedChildren:m.formatMessage({id:"disabled",defaultMessage:"禁用"})})]})})})},A=r(83381),D=r(28031),K=r(41881),J=r(35911),B=r(6992),_=r(17194),G=r(37420),X=r(31557),H=r(67794),V=r(23195),Y=r(57575),W=r(59983),$=r(34640),Q=r(48430),ee=z.Z.Text,ne=function(e){var n=e.provider,r=e.open,t=(e.level,e.onClose),o=e.onSubmit,l=e.existingModels,s=void 0===l?[]:l,d=((0,O.useIntl)(),(0,i.useState)(!1)),c=a()(d,2),u=c[0],m=c[1],p=(0,i.useState)([]),v=a()(p,2),y=v[0],w=v[1],P=(0,i.useState)([]),b=a()(P,2),Z=b[0],M=b[1],L=function(e){return s.some((function(n){return n.name===e.name}))},S=function(){var e=g()(f()().mark((function e(){var r,t,o,l;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,r={pageNumber:0,pageSize:100,level:j.Hxq,providerName:n.name},e.next=5,(0,x.LF)(r);case 5:t=e.sent,console.log("获取平台模型列表:",t),200===t.code?(o=t.data.content||[],w(o),l=o.filter((function(e){return L(e)})).map((function(e){return e.uid})),M(l)):h.yw.error(t.message||"获取模型列表失败"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("获取平台模型异常:",e.t0),h.yw.error("获取模型列表异常");case 14:return e.prev=14,m(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){r&&S()}),[r]);var z=[{title:"名称",dataIndex:"name",key:"name",render:function(e,n){return(0,N.jsxs)(C.Z,{children:[e,L(n)&&(0,N.jsx)(W.Z,{color:"green",children:"已存在"})]})}},{title:"别名",dataIndex:"nickname",key:"nickname"},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0}],I={selectedRowKeys:Z,onChange:function(e){M(e)}};return(0,N.jsxs)(q.Z,{title:"导入".concat(n.nickname,"模型"),width:700,open:r,onClose:t,destroyOnClose:!0,footer:(0,N.jsxs)(C.Z,{children:[(0,N.jsx)(k.ZP,{onClick:t,children:"取消"}),(0,N.jsxs)(k.ZP,{type:"primary",onClick:function(){if(0!==Z.length){var e=y.filter((function(e){return Z.includes(e.uid)}));o(e)}else h.yw.warning("请至少选择一个模型")},disabled:0===Z.length,children:["导入已选(",Z.length,")"]})]}),children:[(0,N.jsxs)(ee,{type:"secondary",children:["从平台已有的",n.nickname,"模型中选择并导入到当前组织",s.length>0&&(0,N.jsx)(ee,{type:"secondary",style:{marginLeft:8},children:"（已有标签的模型表示已导入到当前组织）"})]}),(0,N.jsx)("div",{style:{marginTop:16},children:(0,N.jsx)($.Z,{spinning:u,children:(0,N.jsx)(Q.Z,{rowKey:"uid",columns:z,dataSource:y,pagination:{pageSize:10},rowSelection:I,size:"small"})})}),0===y.length&&!u&&(0,N.jsx)("div",{style:{textAlign:"center",margin:"20px 0"},children:(0,N.jsx)(ee,{type:"secondary",children:"没有找到可导入的平台模型"})})]})},re=function(e){var n=e.provider,r=e.level,t=(0,O.useIntl)(),o=(0,X.Z)().isDarkMode,l=(0,i.useState)(!0),s=a()(l,2),d=s[0],u=s[1],p=(0,i.useState)(!0),v=a()(p,2),I=v[0],T=v[1],U=(0,H.Z)(),E=U.translateString,R=(U.translateStringTranct,(0,i.useState)()),q=a()(R,2),W=q[0],$=q[1],Q=(0,i.useState)(!1),ee=a()(Q,2),re=ee[0],te=ee[1],oe=(0,i.useState)(!1),le=a()(oe,2),ae=le[0],ie=le[1],se=(0,y.u)((function(e){return e.currentOrg})),de=(0,i.useState)([]),ce=a()(de,2),ue=ce[0],me=ce[1],pe=(0,V.A)((function(e){return e.upgradeLlmProvider})),fe=P.Z.useModal(),ve=a()(fe,2),ge=ve[0],he=ve[1],xe=(0,i.useState)(!1),ye=a()(xe,2),je=ye[0],we=ye[1],Pe=(0,i.useState)(!1),be=a()(Pe,2),Ze=be[0],ke=be[1],Me=(0,i.useState)({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,n){return"".concat(n[0],"-").concat(n[1]," / ").concat(e)},pageSizeOptions:["10","20","50","100"]}),Ce=a()(Me,2),Le=Ce[0],Se=Ce[1],ze=(0,V.A)((function(e){var n;return(null===(n=e.llmproviderResult)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.content)||[]})).find((function(e){return e.uid===(null==n?void 0:n.uid)}))||n,Ie=function(){var e=g()(f()().mark((function e(n){var r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),h.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,x.Oh)(n);case 4:r=e.sent,console.log("delete robot response",r),200===r.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),Te(Le.current,Le.pageSize)):(h.yw.destroy(),h.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Te=function(){var e=g()(f()().mark((function e(){var n,t,o,l,a=arguments;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:1,t=a.length>1&&void 0!==a[1]?a[1]:10,console.log("requestModels",{page:n,size:t}),ke(!0),o={pageNumber:n-1,pageSize:t,providerUid:null==ze?void 0:ze.uid,orgUid:null==se?void 0:se.uid,level:r},e.next=7,(0,x.LF)(o);case 7:l=e.sent,console.log("queryLlmModelsByOrg: ",l,o),200===l.code?(me(l.data.content),Se((function(e){return m()(m()({},e),{},{current:n,pageSize:t,total:l.data.totalElements||0})})),ke(!1)):(ke(!1),h.yw.error(l.message));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=g()(f()().mark((function e(){var n,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("refreshProvider"),null!=ze&&ze.uid){e.next=4;break}return h.yw.error(t.formatMessage({id:"provider.uid.notexist"})),e.abrupt("return");case 4:return h.yw.loading(t.formatMessage({id:"loading",defaultMessage:"Loading"})),n={uid:ze.uid,orgUid:null==se?void 0:se.uid,level:r},e.prev=6,e.next=9,(0,G.N0)(n);case 9:o=e.sent,console.log("queryLlmProviderByUid: ",o,n),200===o.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"provider.refresh.success"})),pe(o.data)):(h.yw.destroy(),h.yw.error(o.message)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),h.yw.destroy(),h.yw.error(t.formatMessage({id:"provider.refresh.failed"})),console.error("refreshProvider error:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){Te(1,10)}),[]);var Ee=function(){te(!1)},Re=function(){ie(!1)},qe=function(){var e=g()(f()().mark((function e(n){var r,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmitDrawer:",n),!d){e.next=9;break}return e.next=4,(0,x.WS)(n);case 4:r=e.sent,console.log("updateLlmModel:",r.data),200===r.code?(h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),Te(Le.current,Le.pageSize),Ee()):h.yw.error(r.message),e.next=14;break;case 9:return e.next=11,(0,x.Jr)(n);case 11:o=e.sent,console.log("createLlmModel:",o.data),200===o.code?(h.yw.success(t.formatMessage({id:"create.success",defaultMessage:"create success"})),Te(1,Le.pageSize),Ee()):h.yw.error(o.message);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Oe=function(){var e=g()(f()().mark((function e(n){var o,l,a,i,s,d,u,m;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("导入选中的模型:",n),n&&0!==n.length){e.next=5;break}return h.yw.warning(t.formatMessage({id:"model.import.none.selected"})),Re(),e.abrupt("return");case 5:if(o=ue.map((function(e){return e.name})),l=n.filter((function(e){return!o.includes(e.name)})),0!==l.length){e.next=11;break}return h.yw.info(t.formatMessage({id:"model.import.already.exist"})),Re(),e.abrupt("return");case 11:h.yw.loading("".concat(t.formatMessage({id:"loading"})).concat(l.length).concat(t.formatMessage({id:"model.add"}),"...")),e.prev=12,a=0,i=c()(l),e.prev=15,i.s();case 17:if((s=i.n()).done){e.next=27;break}return d=s.value,u={name:d.name,nickname:d.nickname,description:d.description,type:d.type,enabled:!0,providerUid:ze.uid,providerName:ze.name,orgUid:null==se?void 0:se.uid,level:r},e.next=22,(0,x.Jr)(u);case 22:m=e.sent,console.log("createLlmModel:",m,u),200===m.code&&a++;case 25:e.next=17;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(15),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:h.yw.destroy(),a>0?(h.yw.success(t.formatMessage({id:"model.import.success"},{count:a})),Te(1,Le.pageSize)):h.yw.warning(t.formatMessage({id:"model.import.none.success"})),e.next=44;break;case 39:e.prev=39,e.t1=e.catch(12),console.error("导入模型出错:",e.t1),h.yw.destroy(),h.yw.error(t.formatMessage({id:"model.import.failed"}));case 44:Re();case 45:case"end":return e.stop()}}),e,null,[[12,39],[15,29,32,35]])})));return function(n){return e.apply(this,arguments)}}(),Ne=function(){var e=g()(f()().mark((function e(n){var r,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUpdateProvider:",ze),r=m()(m()({},ze),{},{status:n?j.KY:j.L2A}),e.next=4,(0,G.fx)(r);case 4:o=e.sent,console.log("updateLlmProvider:",r,o),200===o.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),pe(o.data)):(h.yw.destroy(),h.yw.error(o.message));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Fe=function(e){var n;console.log("list on delete",e),n=e,ge.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,N.jsx)(A.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(E(n.nickname),"】？"),onOk:function(){Ie(n)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})},Ae=function(){var e=g()(f()().mark((function e(n){var r,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("switch enabled to ".concat(n)),r=m()(m()({},ze),{},{enabled:n}),h.yw.loading(t.formatMessage({id:"updating"})),e.next=5,(0,G.fx)(r);case 5:o=e.sent,console.log("updateLlmProvider enabled:",r,o),200===o.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),pe(o.data)):(h.yw.destroy(),h.yw.error(o.message));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),De=function(){var e=g()(f()().mark((function e(n){var r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.yw.loading(t.formatMessage({id:"updating"})),e.next=3,(0,G.fx)(n);case 3:r=e.sent,console.log("updateLlmProvider:",n,r),200===r.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),pe(r.data),we(!1)):(h.yw.destroy(),h.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ke=function(){var e=g()(f()().mark((function e(n,o){var l,a;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("switch model enabled to ".concat(n),o),l=m()(m()({},o),{},{enabled:n,providerUid:null==ze?void 0:ze.uid,orgUid:null==se?void 0:se.uid,level:r}),h.yw.loading(t.formatMessage({id:"updating"})),e.next=5,(0,x.WS)(l);case 5:a=e.sent,console.log("updateLlmModel enabled:",l,a),200===a.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),me((function(e){return e.map((function(e){return e.uid===o.uid?m()(m()({},e),{},{enabled:n}):e}))}))):(h.yw.destroy(),h.yw.error(a.message));case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("h1",{children:[(0,N.jsx)(b.Z,{src:null==ze?void 0:ze.logo}),(0,N.jsx)("span",{style:{marginLeft:"12px"},children:null==ze?void 0:ze.nickname}),(0,N.jsx)(Z.Z,{checked:null==ze?void 0:ze.enabled,onChange:Ae,checkedChildren:t.formatMessage({id:"provider.enabled"}),unCheckedChildren:t.formatMessage({id:"provider.disabled"}),style:{marginLeft:"8px"}}),(0,N.jsx)(k.ZP,{type:"text",icon:(0,N.jsx)(D.Z,{}),onClick:function(){window.open(null==ze?void 0:ze.webUrl,"_blank")}}),(0,N.jsx)(k.ZP,{type:"text",icon:(0,N.jsx)(K.Z,{}),onClick:function(){T(!0),we(!0)}}),(0,N.jsx)(k.ZP,{type:"text",icon:(0,N.jsx)(J.Z,{}),onClick:Ue})]}),(null==ze?void 0:ze.description)&&(0,N.jsx)("div",{style:{marginBottom:"16px",color:"#666",fontSize:"14px"},children:ze.description}),(0,N.jsx)(M.Z,{message:t.formatMessage({id:"provider.config.alert"}),type:null!=ze&&ze.enabled?"success":"warning",showIcon:!0,style:{marginBottom:"16px"}}),(0,N.jsx)("div",{style:{marginBottom:"16px"},children:(0,N.jsxs)(C.Z,{direction:"vertical",style:{width:"100%"},children:[(0,N.jsxs)("div",{children:[(0,N.jsxs)("span",{children:["apiUrl: ",null==ze?void 0:ze.apiUrl]}),(0,N.jsx)(k.ZP,{type:"link",size:"small",icon:(0,N.jsx)(K.Z,{}),onClick:function(){T(!0),we(!0)},children:t.formatMessage({id:"provider.edit"})})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("span",{children:["apiKey: ",null!=ze&&ze.apiKey?"".concat(ze.apiKey.slice(0,3)).concat("*".repeat(20)):""]}),(0,N.jsx)(k.ZP,{type:"link",size:"small",icon:(0,N.jsx)(K.Z,{}),onClick:function(){T(!0),we(!0)},children:t.formatMessage({id:"provider.edit"})})]})]})}),r===j.Hxq&&(0,N.jsx)(Z.Z,{checkedChildren:t.formatMessage({id:"provider.online"}),unCheckedChildren:t.formatMessage({id:"provider.offline"}),defaultChecked:(null==ze?void 0:ze.status)===j.KY,onChange:function(e){console.log("switch to ".concat(e)),Ne(e)}}),(0,N.jsx)(L.Z,{orientation:"left",children:t.formatMessage({id:"model.list"})}),(0,N.jsxs)(C.Z,{children:[(0,N.jsx)(k.ZP,{icon:(0,N.jsx)(B.Z,{}),type:"primary",onClick:function(){u(!1),te(!0)},children:t.formatMessage({id:"model.add"})}),"ollama"!==ze.name&&r===j.whQ&&(0,N.jsx)(k.ZP,{icon:(0,N.jsx)(_.Z,{}),onClick:function(){return ie(!0)},children:t.formatMessage({id:"model.import"})}),(0,N.jsx)(k.ZP,{icon:(0,N.jsx)(J.Z,{}),onClick:function(){return Te(Le.current,Le.pageSize)},children:t.formatMessage({id:"model.refresh"})})]}),(0,N.jsx)(S.Z,{itemLayout:"horizontal",style:{marginTop:10},loading:Ze,dataSource:ue,pagination:m()(m()({},Le),{},{onChange:function(e,n){console.log("Pagination onChange:",{page:e,pageSize:n}),Te(e,n)},onShowSizeChange:function(e,n){console.log("Pagination onShowSizeChange:",{current:e,size:n}),Te(1,n)}}),renderItem:function(e,n){return(0,N.jsx)(S.Z.Item,{style:(null==W?void 0:W.uid)===e.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){$(e)},actions:[(0,N.jsx)(k.ZP,{type:"link",onClick:function(){return n=e,console.log("list on edit",n),$(n),u(!0),void te(!0);var n},children:t.formatMessage({id:"edit",defaultMessage:"Edit"})},"edit"),(0,N.jsx)(k.ZP,{type:"link",onClick:function(){return Fe(e)},children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})},"delete")],children:(0,N.jsx)(S.Z.Item.Meta,{style:{marginLeft:"15px"},title:(0,N.jsxs)(C.Z,{children:[(0,N.jsxs)("span",{style:{color:"#999",fontWeight:"normal",minWidth:"30px",fontSize:"14px"},children:[(Le.current-1)*Le.pageSize+n+1,"."]}),(0,N.jsx)("span",{children:e.nickname}),(0,w.Rb)(e.type),(0,N.jsx)(Z.Z,{size:"small",checked:e.enabled,onChange:function(n){return Ke(n,e)},checkedChildren:t.formatMessage({id:"model.enabled"}),unCheckedChildren:t.formatMessage({id:"model.disabled"})},"enabled")]}),description:(0,N.jsxs)("div",{children:[(0,N.jsx)(z.Z.Text,{type:"secondary",children:e.name}),e.description&&(0,N.jsx)("div",{style:{marginTop:"4px"},children:(0,N.jsx)(z.Z.Text,{type:"secondary",ellipsis:{tooltip:e.description},children:e.description})})]})})})}}),re&&(0,N.jsx)(F,{isEdit:d,llmmodel:W,provider:ze,open:re,level:r,onClose:Ee,onSubmit:qe}),ae&&(0,N.jsx)(ne,{provider:ze,open:ae,level:r,onClose:Re,onSubmit:Oe,existingModels:ue}),je&&(0,N.jsx)(Y.Z,{open:je,isEdit:I,level:r,llmProvider:ze,onCancel:function(){return we(!1)},onSubmit:De}),he]})},te=r(44631),oe=r(89348),le=r(34937),ae=r(91768),ie=r(69755),se=r(4959),de=r(59639),ce=r(9368),ue=r(71370),me=r(12715),pe=r(16829),fe=r(52382),ve=function(e){var n,r,t,o,l,s,d,c,u,m,p,f=e.visible,v=e.onClose,g=e.modelName,h=e.modelDetails,x=e.loading,y=e.onRefresh,j=e.onPull,w=e.onDelete,P=(e.isRemoteModel,e.isLocalModel),b=e.pullingModelName,Z=e.localModelNames,z=void 0===Z?[]:Z,I=(0,i.useState)(""),T=a()(I,2),U=T[0],E=T[1],R=h&&"model"in h&&"tags"in h,O=h&&"license"in h&&"modelfile"in h,F=z.includes(g);return(0,N.jsxs)(q.Z,{title:"模型详情 - ".concat(g),width:600,placement:"right",onClose:v,open:f,zIndex:1002,children:[x?(0,N.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80%"},children:(0,N.jsx)($.Z,{tip:"加载中...",spinning:!0,children:(0,N.jsx)("div",{style:{padding:"50px",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",minHeight:"200px"}})})}):h?(0,N.jsxs)(N.Fragment,{children:[R&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(ce.Z,{bordered:!0,column:1,title:"基本信息",styles:{label:{width:"120px"}},children:[(0,N.jsx)(ce.Z.Item,{label:"名称",children:(0,N.jsxs)(C.Z,{children:[(null===(n=h.model)||void 0===n?void 0:n.name)||g,F&&(0,N.jsx)(W.Z,{color:"success",children:"已安装"})]})}),(null===(r=h.model)||void 0===r?void 0:r.description)&&(0,N.jsx)(ce.Z.Item,{label:"描述",children:h.model.description}),(null===(t=h.model)||void 0===t?void 0:t.lastUpdated)&&(0,N.jsx)(ce.Z.Item,{label:"最后更新",children:h.model.lastUpdated}),(null===(o=h.model)||void 0===o?void 0:o.pullCount)&&(0,N.jsx)(ce.Z.Item,{label:"下载次数",children:h.model.pullCount}),(null===(l=h.model)||void 0===l?void 0:l.totalTags)&&(0,N.jsx)(ce.Z.Item,{label:"标签数量",children:h.model.totalTags}),(null===(s=h.model)||void 0===s?void 0:s.popularTags)&&h.model.popularTags.length>0&&(0,N.jsx)(ce.Z.Item,{label:"热门标签",children:(0,N.jsx)(C.Z,{wrap:!0,children:h.model.popularTags.map((function(e,n){return(0,N.jsx)(W.Z,{color:"blue",children:e},n)}))})}),(null===(d=h.model)||void 0===d?void 0:d.modified_at)&&(0,N.jsx)(ce.Z.Item,{label:"修改时间",children:(0,de.mr)(h.model.modified_at.toString())})]}),h.tags&&h.tags.length>0&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(L.Z,{orientation:"left",children:"可用版本"}),(0,N.jsx)(ue.Z,{placeholder:"搜索版本...",prefix:(0,N.jsx)(me.Z,{}),value:U,onChange:function(e){return E(e.target.value)},style:{marginBottom:16},allowClear:!0}),(0,N.jsx)(S.Z,{itemLayout:"horizontal",dataSource:function(){if(!R||!h.tags)return[];var e=h.tags;if(!U)return e;var n=U.toLowerCase();return e.filter((function(e){return e.tag.toLowerCase().includes(n)||e.name.toLowerCase().includes(n)}))}(),renderItem:function(e){var n=function(e,n){var r="".concat(e,":").concat(n);return z.includes(r)}(g,e.tag),r="".concat(g,":").concat(e.tag);return(0,N.jsxs)(S.Z.Item,{children:[(0,N.jsx)(S.Z.Item.Meta,{title:(0,N.jsxs)(C.Z,{children:[(0,N.jsx)("span",{children:e.name}),(0,N.jsx)(W.Z,{color:"green",children:e.tag}),e.size&&(0,N.jsx)(W.Z,{color:"orange",children:e.size}),n&&(0,N.jsx)(W.Z,{color:"success",children:"已安装"})]}),description:(0,N.jsxs)("span",{children:["最后更新: ",e.lastUpdated]})}),(0,N.jsx)(C.Z,{children:(0,N.jsx)(se.Z,{title:n?"模型版本已安装":"点击拉取此版本",children:(0,N.jsx)(k.ZP,{type:"primary",size:"small",icon:n?(0,N.jsx)(pe.Z,{}):(0,N.jsx)(fe.Z,{}),loading:b===r,onClick:function(){j(r)},disabled:n,children:n?"已安装":"拉取此版本"})})})]})}})]})]}),O&&(0,N.jsxs)(ce.Z,{bordered:!0,column:1,title:"模型详情",styles:{label:{width:"120px"}},children:[(null===(c=h.details)||void 0===c?void 0:c.format)&&(0,N.jsx)(ce.Z.Item,{label:"模型格式",children:h.details.format}),(null===(u=h.details)||void 0===u?void 0:u.family)&&(0,N.jsx)(ce.Z.Item,{label:"模型系列",children:h.details.family}),(null===(m=h.details)||void 0===m?void 0:m.parameter_size)&&(0,N.jsx)(ce.Z.Item,{label:"参数大小",children:h.details.parameter_size}),(null===(p=h.details)||void 0===p?void 0:p.quantization_level)&&(0,N.jsx)(ce.Z.Item,{label:"量化等级",children:h.details.quantization_level}),h.system&&(0,N.jsx)(ce.Z.Item,{label:"系统信息",children:h.system}),h.template&&(0,N.jsx)(ce.Z.Item,{label:"模板",children:(0,N.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:h.template})}),h.modelfile&&(0,N.jsx)(ce.Z.Item,{label:"模型文件",children:(0,N.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:h.modelfile})}),(0,N.jsx)(ce.Z.Item,{label:"许可证",children:h.license})]})]}):(0,N.jsx)(M.Z,{message:"无法获取详细信息",type:"warning"}),(0,N.jsx)(L.Z,{}),(0,N.jsxs)(C.Z,{children:[!x&&(0,N.jsx)(k.ZP,{type:"primary",onClick:function(){return y(g)},icon:(0,N.jsx)(J.Z,{}),children:"刷新详情"}),P&&(0,N.jsx)(ie.Z,{title:"删除模型",description:"确定要删除模型 ".concat(g," 吗？"),onConfirm:function(){w(g),v()},okText:"确定",cancelText:"取消",children:(0,N.jsx)(k.ZP,{type:"primary",danger:!0,icon:(0,N.jsx)(ae.Z,{}),children:"删除此模型"})})]})]})},ge=function(e){var n=e.visible,r=e.onClose,t=e.models,o=e.loading,l=e.onRefresh,s=e.onModelDetails,d=e.onPull,c=e.pullingModelName,u=e.localModelNames,m=void 0===u?[]:u,p=(0,i.useState)(""),f=a()(p,2),v=f[0],g=f[1],h=t.filter((function(e){var n=v.toLowerCase();return e.name.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n)||e.popularTags&&e.popularTags.some((function(e){return e.toLowerCase().includes(n)}))}));return(0,N.jsxs)(q.Z,{title:"Ollama 远程模型库",width:600,placement:"right",onClose:r,open:n,zIndex:1001,children:[(0,N.jsxs)(C.Z,{direction:"vertical",style:{width:"100%",marginBottom:16},children:[(0,N.jsxs)(C.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,N.jsx)(k.ZP,{icon:(0,N.jsx)(J.Z,{}),loading:o,onClick:l,children:"刷新远程模型"}),(0,N.jsxs)("span",{style:{color:"#999",fontSize:"14px"},children:["共 ",h.length,"/",t.length," 个模型"]})]}),(0,N.jsx)(ue.Z,{placeholder:"搜索模型名称、描述或标签",prefix:(0,N.jsx)(me.Z,{}),onChange:function(e){return g(e.target.value)},allowClear:!0})]}),(0,N.jsx)(S.Z,{itemLayout:"vertical",loading:o,dataSource:h,renderItem:function(e){var n,r,t=(r=e.name,m.includes(r));return(0,N.jsx)(S.Z.Item,{extra:(0,N.jsxs)(C.Z,{children:[(0,N.jsx)(k.ZP,{type:"default",icon:(0,N.jsx)(le.Z,{}),onClick:function(){return s(e.name)},style:{marginRight:8},children:"详情"}),(0,N.jsx)(se.Z,{title:t?"模型已存在于本地":"点击拉取模型",children:(0,N.jsx)(k.ZP,{type:"primary",icon:t?(0,N.jsx)(pe.Z,{}):(0,N.jsx)(fe.Z,{}),loading:c===e.name,onClick:function(){return d(e.name)},disabled:t,children:t?"已安装":"拉取"})})]}),children:(0,N.jsx)(S.Z.Item.Meta,{title:(0,N.jsxs)(C.Z,{children:[(0,N.jsx)("strong",{children:e.name}),t&&(0,N.jsx)(W.Z,{color:"success",children:"已安装"})]}),description:(0,N.jsxs)(C.Z,{direction:"vertical",style:{width:"100%"},children:[(0,N.jsxs)(C.Z,{children:[e.pullCount&&(0,N.jsxs)(W.Z,{color:"cyan",children:["下载: ",e.pullCount]}),e.lastUpdated&&(0,N.jsxs)(W.Z,{color:"orange",children:["更新: ",e.lastUpdated]})]}),(0,N.jsx)("div",{children:e.description||"暂无描述"}),(0,N.jsx)(C.Z,{style:{marginTop:8},children:null===(n=e.popularTags)||void 0===n?void 0:n.map((function(e,n){return(0,N.jsx)(W.Z,{color:"blue",children:e},n)}))})]})})})}})]})},he=function(e){var n=e.provider,r=e.level,t=(0,O.useIntl)(),o=(0,X.Z)().isDarkMode,l=(0,i.useState)(!1),s=a()(l,2),d=s[0],c=s[1],u=(0,i.useState)(!1),p=a()(u,2),v=p[0],x=p[1],y=(0,i.useState)([]),j=a()(y,2),w=j[0],P=j[1],z=(0,i.useState)(!1),I=a()(z,2),T=I[0],U=I[1],E=(0,V.A)((function(e){return e.upgradeLlmProvider})),R=(0,i.useState)(),q=a()(R,2),F=q[0],A=q[1],B=(0,V.A)((function(e){var n;return(null===(n=e.llmproviderResult)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.content)||[]})).find((function(e){return e.uid===(null==n?void 0:n.uid)}))||n,_=(0,i.useState)(!1),H=a()(_,2),$=H[0],Q=H[1],ee=(0,i.useState)([]),ne=a()(ee,2),re=ne[0],ce=ne[1],ue=(0,i.useState)(!1),me=a()(ue,2),pe=me[0],fe=me[1],he=(0,i.useState)(""),xe=a()(he,2),ye=xe[0],je=xe[1],we=(0,i.useState)(""),Pe=a()(we,2),be=Pe[0],Ze=Pe[1],ke=(0,i.useState)(!1),Me=a()(ke,2),Ce=Me[0],Le=Me[1],Se=(0,i.useState)(!1),ze=a()(Se,2),Ie=ze[0],Te=ze[1],Ue=(0,i.useState)(null),Ee=a()(Ue,2),Re=Ee[0],qe=Ee[1],Oe=(0,i.useState)(""),Ne=a()(Oe,2),Fe=Ne[0],Ae=Ne[1],De=function(){var e=g()(f()().mark((function e(){var n;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),console.log("pingOllama"),e.next=4,(0,te.VM)();case 4:n=e.sent,console.log("getOllamaServerStatus: ",n),200===n.code?(x(n.data),c(!1)):(x(!1),c(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=g()(f()().mark((function e(){var n,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("requestLocalModels"),c(!0),e.next=4,(0,te.c8)();case 4:n=e.sent,console.log("getOllamaLocalModels: ",n),200===n.code&&(r=n.data.map((function(e){var n=e.name.split(":"),r=n[0]||e.name,t=n.length>1?n[1]:"default";return m()(m()({},e),{},{modelName:r,modelVersion:t})})),P(r)),c(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=g()(f()().mark((function e(){var n;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe(!0),e.next=3,(0,te.rg)();case 3:n=e.sent,console.log("getOllamaLibraryModels: ",n),200===n.code?ce(n.data):h.yw.error(n.message||"获取远程模型列表失败"),fe(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){De(),Ke()};(0,i.useEffect)((function(){Be()}),[]);var _e=function(){var e=g()(f()().mark((function e(n){var r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.yw.loading(t.formatMessage({id:"updating"})),e.next=3,(0,G.fx)(n);case 3:r=e.sent,console.log("updateLlmProvider:",n,r),200===r.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),E(r.data),U(!1)):(h.yw.destroy(),h.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ge=function(){var e=g()(f()().mark((function e(n){var r,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("switch enabled to ".concat(n)),!n||v){e.next=4;break}return h.yw.error("Ollama 服务未运行，无法启用。请先启动 Ollama 服务。"),e.abrupt("return");case 4:return r=m()(m()({},B),{},{enabled:n}),h.yw.loading(t.formatMessage({id:"updating"})),e.next=8,(0,G.fx)(r);case 8:o=e.sent,console.log("updateLlmProvider enabled:",r,o),200===o.code?(h.yw.destroy(),h.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),E(o.data)):(h.yw.destroy(),h.yw.error(o.message));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Xe=function(){var e=g()(f()().mark((function e(n){var r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=3;break}return h.yw.error("Ollama未运行，无法删除模型"),e.abrupt("return");case 3:return je(n),h.yw.loading("正在删除模型 ".concat(n,"...")),e.prev=5,e.next=8,(0,te.G9)(n);case 8:r=e.sent,console.log("deleteOllamaModel:",r.data,n),200===r.code&&r.data?(h.yw.success("成功删除模型 ".concat(n)),Ke()):h.yw.error(r.message||"删除模型 ".concat(n," 失败")),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("删除模型出错:",e.t0),h.yw.error("删除模型时发生错误: ".concat(e.t0));case 17:return e.prev=17,je(""),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(n){return e.apply(this,arguments)}}(),He=function(){var e=g()(f()().mark((function e(n){var r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=3;break}return h.yw.error("Ollama未运行，无法拉取模型"),e.abrupt("return");case 3:return Ze(n),h.yw.loading("正在拉取模型 ".concat(n,"...")),e.prev=5,e.next=8,(0,te.N6)(n);case 8:200===(r=e.sent).code&&r.data?(h.yw.success("成功拉取模型 ".concat(n,"，模型下载可能需要一些时间")),Q(!1),Ke()):h.yw.error(r.message||"拉取模型 ".concat(n," 失败")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("拉取模型出错:",e.t0),h.yw.error("拉取模型时发生错误: ".concat(e.t0));case 16:return e.prev=16,Ze(""),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,12,16,19]])})));return function(n){return e.apply(this,arguments)}}(),Ve=function(){var e=g()(f()().mark((function e(n){var r,t,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(!0),Ae(n),Le(!0),e.prev=3,r=w.some((function(e){return e.name===n})),t=re.some((function(e){return e.name===n})),!r){e.next=13;break}return e.next=9,(0,te.sF)(n);case 9:o=e.sent,console.log("getOllamaModelDetails (local):",o),e.next=24;break;case 13:if(!t){e.next=20;break}return e.next=16,(0,te.gF)(n);case 16:o=e.sent,console.log("getOllamaLibraryModelDetails (remote):",o),e.next=24;break;case 20:return e.next=22,(0,te.gF)(n);case 22:o=e.sent,console.log("getOllamaLibraryModelDetails (default):",o);case 24:200===o.code?qe(o.data):(h.yw.error(o.message||"获取模型 ".concat(n," 详情失败")),qe(null)),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(3),console.error("获取模型详情出错:",e.t0),h.yw.error("获取详情时发生错误: ".concat(e.t0)),qe(null);case 32:return e.prev=32,Te(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[3,27,32,35]])})));return function(n){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("h1",{children:[(0,N.jsx)(b.Z,{src:null==B?void 0:B.logo}),(0,N.jsx)("span",{style:{marginLeft:"12px"},children:null==B?void 0:B.nickname}),(0,N.jsx)(Z.Z,{checked:null==B?void 0:B.enabled,onChange:Ge,checkedChildren:"已启用",unCheckedChildren:"已禁用",style:{marginLeft:"8px"}}),(0,N.jsx)(k.ZP,{type:"text",icon:(0,N.jsx)(D.Z,{}),onClick:function(){window.open(null==B?void 0:B.webUrl,"_blank")}}),(0,N.jsx)(k.ZP,{type:"text",icon:(0,N.jsx)(K.Z,{}),onClick:function(){return U(!0)}})]}),(null==B?void 0:B.description)&&(0,N.jsx)("div",{style:{marginBottom:"16px",color:"#666",fontSize:"14px"},children:B.description}),(0,N.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,N.jsxs)("span",{children:["apiUrl: ",null==B?void 0:B.apiUrl]}),(0,N.jsx)(k.ZP,{type:"link",size:"small",icon:(0,N.jsx)(K.Z,{}),onClick:function(){return U(!0)},children:"编辑"})]}),(0,N.jsxs)(C.Z,{children:[(0,N.jsx)(k.ZP,{icon:(0,N.jsx)(J.Z,{}),loading:d,type:"primary",onClick:Be,children:"刷新"}),(0,N.jsx)(k.ZP,{icon:(0,N.jsx)(oe.Z,{}),type:"primary",onClick:function(){Q(!0),Je()},children:"远程模型库"})]}),(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),v?(0,N.jsx)(M.Z,{message:"Ollama运行中",type:"success"}):(0,N.jsx)(M.Z,{message:"请首先启动Ollama",type:"error"}),(0,N.jsx)(L.Z,{orientation:"left",children:"本地模型列表"}),(0,N.jsx)(S.Z,{itemLayout:"horizontal",style:{marginTop:10},loading:d,dataSource:w,renderItem:function(e,n){return(0,N.jsx)(S.Z.Item,{style:(null==F?void 0:F.name)===(null==e?void 0:e.name)?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){A(e)},actions:[(0,N.jsx)(k.ZP,{type:"text",icon:(0,N.jsx)(le.Z,{}),onClick:function(n){n.stopPropagation(),Ve(null==e?void 0:e.name)},children:"详情"},"details"),(0,N.jsx)(ie.Z,{title:"删除模型",description:"确定要删除模型 ".concat(null==e?void 0:e.name," 吗？"),onConfirm:function(n){null==n||n.stopPropagation(),Xe(null==e?void 0:e.modelName)},okText:"确定",cancelText:"取消",onCancel:function(e){return null==e?void 0:e.stopPropagation()},children:(0,N.jsx)(k.ZP,{type:"text",danger:!0,icon:(0,N.jsx)(ae.Z,{}),loading:ye===(null==e?void 0:e.modelName),onClick:function(e){return e.stopPropagation()},children:"删除"})},"delete")],children:(0,N.jsx)(S.Z.Item.Meta,{title:(0,N.jsxs)(C.Z,{children:[(0,N.jsx)("span",{children:null==e?void 0:e.modelName}),(0,N.jsx)(W.Z,{color:"blue",children:null==e?void 0:e.modelVersion}),(null==e?void 0:e.size)&&(0,N.jsx)(W.Z,{color:"green",children:(0,de.sS)(null==e?void 0:e.size)}),(null==e?void 0:e.parameter_size)&&(0,N.jsx)(se.Z,{title:"参数大小",children:(0,N.jsx)(W.Z,{color:"purple",children:null==e?void 0:e.parameter_size})})]}),description:(0,N.jsxs)(C.Z,{direction:"vertical",children:[(0,N.jsxs)("div",{children:["完整名称: ",null==e?void 0:e.name]}),(0,N.jsxs)("div",{children:["digest: ",null==e?void 0:e.digest]}),(null==e?void 0:e.family)&&(0,N.jsxs)("div",{children:["系列: ",null==e?void 0:e.family]}),(null==e?void 0:e.quantization_level)&&(0,N.jsxs)("div",{children:["量化等级: ",null==e?void 0:e.quantization_level]}),(0,N.jsxs)("div",{children:["更新时间: ",(0,de.mr)(null==e?void 0:e.modified_at.toString())]})]}),style:{marginLeft:"15px"}})})}}),(0,N.jsx)(ge,{visible:$,onClose:function(){return Q(!1)},models:re,loading:pe,onRefresh:Je,onModelDetails:Ve,onPull:He,pullingModelName:be,localModelNames:w.map((function(e){return e.modelName}))}),(0,N.jsx)(ve,{visible:Ce,onClose:function(){return Le(!1)},modelName:Fe,modelDetails:Re,loading:Ie,onRefresh:Ve,onPull:He,onDelete:Xe,isRemoteModel:re.some((function(e){return e.name===Fe})),isLocalModel:w.some((function(e){return e.name===Fe})),pullingModelName:be,localModelNames:w.map((function(e){return e.name}))}),T&&(0,N.jsx)(Y.Z,{open:T,isEdit:!0,level:r,llmProvider:B,onCancel:function(){return U(!1)},onSubmit:_e})]})},xe=r(90616),ye=function(e){var n=e.level,r=(0,i.useState)(""),t=a()(r,2),l=t[0],d=t[1],c=(0,i.useState)([]),u=a()(c,2),m=u[0],p=u[1],f=(0,V.A)((function(e){return{currentLlmProvider:e.currentLlmProvider,llmproviderResult:e.llmproviderResult,setCurrentLlmProvider:e.setCurrentLlmProvider}})),v=f.currentLlmProvider,g=f.llmproviderResult,h=f.setCurrentLlmProvider,x=(0,xe.$)((function(e){return{currentLlmProviderPlatform:e.currentLlmProviderPlatform,llmproviderResultPlatform:e.llmproviderResultPlatform,setCurrentLlmProviderPlatform:e.setCurrentLlmProviderPlatform}})),y=x.currentLlmProviderPlatform,w=x.llmproviderResultPlatform,P=x.setCurrentLlmProviderPlatform,b=(0,i.useState)(n===j.Hxq),Z=a()(b,1)[0],k=Z?y:v;(0,i.useEffect)((function(){if(k&&k.name)if(console.log("llmProvider: ",k),m.find((function(e){return e.key===k.name})))d(k.name);else{var e=o()(m);"ollama"===k.name?e.push({label:k.nickname||k.name,children:(0,N.jsx)(he,{provider:k,level:n}),key:k.name,closable:!0}):e.push({label:k.nickname||k.name,children:(0,N.jsx)(re,{provider:k,level:n}),key:k.name,closable:!0}),p(e),d(k.name)}}),[k,m]);return 0===m.length?null:(0,N.jsx)(s.Z,{type:"editable-card",onChange:function(e){var n,r;d(e);var t=(Z?(null==w||null===(n=w.data)||void 0===n?void 0:n.content)||[]:(null==g||null===(r=g.data)||void 0===r?void 0:r.content)||[]).find((function(n){return n.name===e}));t&&(Z?P(t):h(t))},activeKey:l,onEdit:function(e,n){"remove"===n&&function(e){var n=l,r=-1;m.forEach((function(n,t){n.key===e&&(r=t-1)}));var t=m.filter((function(n){return n.key!==e}));if(t.length&&n===e){var o,a;n=r>=0?t[r].key:t[0].key;var i=(Z?(null==w||null===(o=w.data)||void 0===o?void 0:o.content)||[]:(null==g||null===(a=g.data)||void 0===a?void 0:a.content)||[]).find((function(e){return e.name===n}));i&&(Z?P(i):h(i))}p(t),d(n)}(e)},items:m})}},57575:function(e,n,r){var t=r(90819),o=r.n(t),l=r(89933),a=r.n(l),i=r(45332),s=r.n(i),d=r(78929),c=r(89520),u=r(2622),m=r(92964),p=r(59935),f=r(67896),v=r(22916),g=r(81396),h=r(37802),x=r(18613),y=r(20374),j=r(49297),w=r(44194),P=r(78991),b=r(22014),Z=r(31549);n.Z=function(e){var n=e.open,r=e.isEdit,t=e.llmProvider,l=e.level,i=e.onCancel,k=e.onSubmit,M=h.Z.useForm(),C=s()(M,1)[0],L=(0,c.u)((function(e){return e.currentOrg})),S=(0,w.useState)(),z=s()(S,2),I=z[0],T=z[1],U=(0,w.useState)(""),E=s()(U,2),R=E[0],q=E[1],O=r&&["ollama","zhipuai","deepseek","dashscope","silicon","gitee","tencent","baidu","volcengine","minimax","xinghuo","moonshot","baichuan","yi","stepfun","openrouter","groq","anthropic","openai","gemini","aihubmix"].includes((null==t?void 0:t.name)||"");(0,w.useEffect)((function(){var e;r?(T(t),q((null==t?void 0:t.logo)||""),C.setFieldsValue({logo:null==t?void 0:t.logo,name:null==t?void 0:t.name,nickname:null==t?void 0:t.nickname,description:null==t?void 0:t.description,webUrl:null==t?void 0:t.webUrl,status:null==t?void 0:t.status,apiUrl:null==t?void 0:t.apiUrl,apiKey:null==t?void 0:t.apiKey,enabled:null===(e=null==t?void 0:t.enabled)||void 0===e||e})):(C.resetFields(),q(""),C.setFieldsValue({enabled:!0}))}),[r,t]);return(0,Z.jsx)("div",{children:(0,Z.jsx)(x.Z,{title:r?"编辑大模型提供商":"添加大模型提供商",open:n,onClose:i,width:500,extra:(0,Z.jsx)(y.ZP,{type:"primary",onClick:function(){C.validateFields().then(function(){var e=a()(o()().mark((function e(n){var a,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={uid:r?null==t?void 0:t.uid:"",name:null==n?void 0:n.name,nickname:null==n?void 0:n.nickname,logo:R||(null==I?void 0:I.logo),description:null==n?void 0:n.description,webUrl:null==n?void 0:n.webUrl,status:(null==n?void 0:n.status)||u.L2A,apiUrl:null==n?void 0:n.apiUrl,apiKey:null==n?void 0:n.apiKey,enabled:null===(a=null==n?void 0:n.enabled)||void 0===a||a,level:l,orgUid:null==L?void 0:L.uid},console.log("handleSaveLlmProvider:",n,i),k(i);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Failed:",e),d.yw.error("创建角色失败")}))},children:r?"更新":"确定"}),children:(0,Z.jsxs)(m.A,{form:C,name:"form",style:{maxWidth:400},submitter:{render:function(){return null}},children:[(0,Z.jsx)(m.A.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:"Logo",children:(0,Z.jsxs)(P.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),q(e)},onError:function(e){console.log("handleUploadError:",e),d.yw.error("图片上传失败")},children:[(0,Z.jsx)(j.Z,{src:R,size:64}),(0,Z.jsx)(y.ZP,{icon:(0,Z.jsx)(b.Z,{}),style:{marginLeft:8},children:"上传Logo"})]})}),(0,Z.jsx)(p.Z,{width:"md",name:"name",label:"唯一标识",placeholder:"请输入唯一标识，仅支持字母和数字",disabled:O,rules:[{required:!0,message:"请输入名称!"},{pattern:/^[a-zA-Z0-9]+$/,message:"名称仅支持字母和数字!"}],fieldProps:{onPressEnter:function(e){console.log("onPressEnter:",e)}},tooltip:O?"系统预定义供应商，不允许修改唯一标识":void 0}),(0,Z.jsx)(p.Z,{label:"昵称",name:"nickname",rules:[{required:!0,message:"请输入昵称!"}],fieldProps:{onPressEnter:function(e){console.log("onPressEnter:",e)}}}),(0,Z.jsx)(f.Z,{label:"描述",name:"description",fieldProps:{onPressEnter:function(e){console.log("onPressEnter:",e)}}}),(0,Z.jsx)(p.Z,{label:"官网",name:"webUrl",placeholder:"请输入官网地址",rules:[{type:"url",message:"请输入有效的网址!"}],fieldProps:{onPressEnter:function(e){console.log("onPressEnter:",e)}}}),(0,Z.jsx)(v.Z,{label:"状态",name:"status",options:[{label:"开发中",value:u.L2A},{label:"生产环境",value:u.KY}],rules:[{required:!0,message:"请选择状态!"}],fieldProps:{placeholder:"请选择状态"}}),(0,Z.jsx)(p.Z,{label:"ApiUrl",name:"apiUrl",placeholder:"请输入 API 地址",rules:[{required:!0,message:"请输入apiUrl!"},{validator:function(e,n){return n&&n.endsWith("/")?Promise.reject(new Error('API 地址结尾不能为 "/"')):Promise.resolve()}}],fieldProps:{onPressEnter:function(e){console.log("onPressEnter:",e)}},extra:"注意：API 地址结尾不能为 '/'"}),"ollama"!==(null==I?void 0:I.name)&&(0,Z.jsx)(p.Z.Password,{label:"ApiKey",name:"apiKey",fieldProps:{placeholder:"请输入apiKey",allowClear:!0,visibilityToggle:!0,onPressEnter:function(e){console.log("onPressEnter:",e)}}}),(0,Z.jsx)(g.Z,{label:"启用状态",name:"enabled",tooltip:"是否启用该大模型提供商",checkedChildren:"启用",unCheckedChildren:"禁用"})]})})})}},78991:function(e,n,r){r.d(n,{G:function(){return p}});var t=r(73193),o=r.n(t),l=(r(44194),r(51679)),a=r(2622),i=r(28977),s=r.n(i),d=r(18598),c=r(78929),u=r(32157),m=r(31549),p=function(e){var n=e.children,r=e.onSuccess,t=e.onError,i={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:a.IrL,categoryUid:"",kbUid:"",channel:a.XtJ},p={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(a.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){d.Z.log("beforeUpload",e);var n=s()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return i.file=e,i.fileName=n,i.fileType=e.type,d.Z.log("beforeUpload",i),!0},onChange:function(e){if("uploading"!==e.file.status&&d.Z.log("not uploading:",e.file),"done"===e.file.status)if(d.Z.log("response: ",e.file.response),200===e.file.response.code){var n=e.file.response.data.fileUrl;r(n),c.yw.success("".concat(e.file.name," 上传成功"))}else t(e.file),c.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(c.yw.error("".concat(e.file.name," 上传失败")),t(e.file))}};return(0,m.jsx)(l.Z,o()(o()({},p),{},{children:n}))}},85195:function(e,n,r){var t=r(31557);n.Z=function(){var e=(0,t.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},90616:function(e,n,r){r.d(n,{$:function(){return u}});var t=r(73193),o=r.n(t),l=r(76711),a=r.n(l),i=r(2622),s=r(16894),d=r(45034),c=r(47401),u=(0,s.Ue)()((0,d.mW)((0,d.tJ)((0,c.n)((function(e,n){return{llmproviderResultPlatform:{data:{content:[]}},currentLlmProviderPlatform:{uid:"",nickname:""},insertLlmProviderPlatform:function(n){e((function(e){e.llmproviderResultPlatform.data.content.unshift(n)}))},upgradeLlmProviderPlatform:function(n){e((function(e){var r=e.llmproviderResultPlatform.data.content,t=r.findIndex((function(e){return e.uid===n.uid}));-1!==t?r[t]=n:console.warn("LlmProvider with uid ".concat(n.uid," not found."))}))},setLlmProviderResultPlatform:function(r){e({llmproviderResultPlatform:r});var t,o=n().currentLlmProviderPlatform;""!==o.uid&&void 0!==o||(null===(t=r.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmProviderPlatform:r.data.content[0]})},setCurrentLlmProviderPlatform:function(r){var t=n().llmproviderResultPlatform.data.content,l=t.findIndex((function(e){return e.uid===r.uid}));if(-1!==l){var i=[].concat(a()(t.slice(0,l)),[r],a()(t.slice(l+1))),s=o()(o()({},n().llmproviderResultPlatform),{},{data:{content:i}});e({llmproviderResultPlatform:s,currentLlmProviderPlatform:r})}else e({currentLlmProviderPlatform:r})},deleteCurrentLlmProviderPlatform:function(r){var t=n().llmproviderResultPlatform.data.content,l=t.findIndex((function(e){return e.uid===r}));-1!==l?e({llmproviderResultPlatform:o()(o()({},n().llmproviderResultPlatform),{},{data:{content:[].concat(a()(t.slice(0,l)),a()(t.slice(l+1)))}})}):console.warn("LlmProvider not found in cache:",r),n().currentLlmProviderPlatform.uid===r&&e({currentLlmProviderPlatform:{uid:""}})},deleteLlmProviderCachePlatform:function(){return e({},!0)}}})),{name:i.dNm})))}}]);