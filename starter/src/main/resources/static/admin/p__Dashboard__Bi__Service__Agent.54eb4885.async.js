"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[23,2180],{61107:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(77260),r=n(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},s=n(54183),o=function(e,t){return r.createElement(s.Z,(0,a.Z)({},e,{ref:t,icon:i}))};var u=r.forwardRef(o)},80556:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(77260),r=n(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},s=n(54183),o=function(e,t){return r.createElement(s.Z,(0,a.Z)({},e,{ref:t,icon:i}))};var u=r.forwardRef(o)},94956:function(e,t,n){n.d(t,{AT:function(){return p},Lr:function(){return k},_t:function(){return d},i8:function(){return M},n1:function(){return y},sE:function(){return h},x_:function(){return m}});var a=n(90819),r=n.n(a),i=n(73193),s=n.n(i),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(e){return f.apply(this,arguments)}function f(){return(f=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/query/org",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/query/uid",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/create",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/update",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/update/avatar",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return w.apply(this,arguments)}function w(){return(w=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/update/autoreply",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return j.apply(this,arguments)}function j(){return(j=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/agent/delete",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},72657:function(e,t,n){n.d(t,{Eb:function(){return d},RU:function(){return p},xL:function(){return m}});var a=n(90819),r=n.n(a),i=n(73193),s=n.n(i),o=n(89933),u=n.n(o),c=n(5488),l=n(14870);function d(){return f.apply(this,arguments)}function f(){return(f=u()(r()().mark((function e(){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/service/statistic/query",{method:"GET",params:{channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/service/statistic/query/date",{method:"GET",params:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/service/statistic/calculate",{method:"POST",data:s()(s()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},40629:function(e,t,n){n.d(t,{LE:function(){return l},W5:function(){return v},c$:function(){return f},n1:function(){return x},p0:function(){return g},zl:function(){return b}});var a=n(90819),r=n.n(a),i=n(73193),s=n.n(i),o=n(89933),u=n.n(o),c=n(14870);function l(e){return d.apply(this,arguments)}function d(){return(d=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/query/org",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/query/uid",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/create",{method:"POST",data:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return(h=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/update",{method:"POST",data:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return(y=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/update/avatar",{method:"POST",data:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return M.apply(this,arguments)}function M(){return(M=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/delete",{method:"POST",data:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},68113:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var a=n(90819),r=n.n(a),i=n(89933),s=n.n(i),o=n(45332),u=n.n(o),c=n(44194),l=n(72207),d=n(27904),f=n(49260),p=n(45681),g=n(63628),m=n(79401),v=n(49616),h=n(32973),x=n(5780),y=n(27473),b=n(53504),M=n(78875),w=n(20228),k=n(65532),j=n(61155),T=n(80556),S=n(61107),Z=n(10022),C=n(86994),Y=n(48004),R=n(77260),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"},O=n(54183),q=function(e,t){return c.createElement(O.Z,(0,R.Z)({},e,{ref:t,icon:D}))};var z=c.forwardRef(q),U=n(72657),A=n(40629),P=n(94956),E=n(28977),F=n.n(E),I=n(34599),J=n(14870),B=n(5488),H=n(18580),X=n(31549),L=l.default.RangePicker,V=d.Z.Option,G=function(){var e=(0,J.useIntl)(),t=(0,c.useState)(!1),n=u()(t,2),a=n[0],i=n[1],o=(0,I.u)((function(e){return e.currentOrg})),l=(0,c.useState)([]),R=u()(l,2),D=R[0],O=R[1],q=(0,c.useState)({onlineAgents:0,totalSessions:0,avgResponseTime:0,avgSatisfaction:0,onlineAgentCount:0,offlineAgentCount:0,avgFirstResponseTime:0,avgConversationTime:0}),E=u()(q,2),G=E[0],W=E[1],N=(0,c.useState)(F()().startOf("day")),Q=u()(N,2),_=Q[0],$=Q[1],K=(0,c.useState)(F()().endOf("day")),ee=u()(K,2),te=ee[0],ne=ee[1],ae=(0,c.useState)("today"),re=u()(ae,2),ie=re[0],se=re[1],oe=(0,c.useState)([F()().startOf("day"),F()().endOf("day")]),ue=u()(oe,2),ce=ue[0],le=ue[1],de=(0,c.useState)({current:1,pageSize:20,total:0}),fe=u()(de,2),pe=fe[0],ge=fe[1],me=(0,c.useState)(B.whQ),ve=u()(me,2),he=ve[0],xe=ve[1],ye=(0,c.useState)(),be=u()(ye,2),Me=be[0],we=be[1],ke=(0,c.useState)(),je=u()(ke,2),Te=je[0],Se=je[1],Ze=(0,c.useState)([]),Ce=u()(Ze,2),Ye=Ce[0],Re=Ce[1],De=(0,c.useState)([]),Oe=u()(De,2),qe=Oe[0],ze=Oe[1],Ue=c.useMemo((function(){var e=new Map;return(qe||[]).forEach((function(t){null!=t&&t.uid&&e.set(t.uid,t)})),e}),[qe]),Ae=[{label:(0,X.jsx)(J.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,X.jsx)(J.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,X.jsx)(J.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,X.jsx)(J.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,X.jsx)(J.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,X.jsx)(J.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}];(0,c.useEffect)((function(){null!=o&&o.uid&&((0,A.LE)({orgUid:o.uid,pageNumber:0,pageSize:100}).then((function(e){var t;200===e.code&&Re((null===(t=e.data)||void 0===t?void 0:t.content)||[])})),(0,P._t)({orgUid:o.uid,pageNumber:0,pageSize:100}).then((function(e){var t;200===e.code&&ze((null===(t=e.data)||void 0===t?void 0:t.content)||[])})))}),[o]);var Pe=function(){var e=s()(r()().mark((function e(){var t,n,a,s,u,c,l,d=arguments;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:1,n=d.length>1&&void 0!==d[1]?d[1]:20,i(!0),e.prev=3,a={pageNumber:t-1,pageSize:n,orgUid:null==o?void 0:o.uid,startDate:ce[0].format("YYYY-MM-DD"),endDate:ce[1].format("YYYY-MM-DD"),type:he,workgroupUid:he===B.v5D?Me:void 0,agentUid:he===B.fyH?Te:void 0},e.next=7,(0,U.RU)(a);case 7:s=e.sent,console.log("queryStatisticServiceByDate response:",s.data,a),200===s.code&&s.data&&(u=s.data,c=u.agentUid?Ue.get(u.agentUid):void 0,ge({current:t,pageSize:n,total:1}),l=[{key:u.agentUid||"unknown",agentUid:u.agentUid||"unknown",nickname:(null==c?void 0:c.nickname)||u.agentUid||"Unknown Agent",avatar:(null==c?void 0:c.avatar)||"",totalSessions:u.acceptedThreadCount||0,avgResponseTime:u.avgFirstResponseTime?Math.round(u.avgFirstResponseTime/60):0,avgSatisfaction:u.satisfactionRate||0,avgConversationTime:u.avgConversationTime?Math.round(u.avgConversationTime/60):0,onlineTime:u.onlineTime?Math.round(u.onlineTime/3600):0,busyTime:u.busyTime?Math.round(u.busyTime/3600):0,agentMessageCount:u.agentMessageCount||0,visitorMessageCount:u.visitorMessageCount||0,avgMessagePerThread:u.avgMessagePerThread||0}],O(l)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),f.ZP.error("获取客服数据失败"),console.error("获取客服数据失败:",e.t0);case 16:return e.prev=16,i(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){if("custom"===ie)$(_),ne(te);else{var e=F()();"today"===ie?($(e.startOf("day")),ne(e.endOf("day"))):"yesterday"===ie?($(e.subtract(1,"day").startOf("day")),ne(e.subtract(1,"day").endOf("day"))):"week"===ie?($(e.startOf("week")),ne(e.endOf("week"))):"lastWeek"===ie?($(e.subtract(1,"week").startOf("week")),ne(e.subtract(1,"week").endOf("week"))):"month"===ie&&($(e.startOf("month")),ne(e.endOf("month")))}}),[ie]),(0,c.useEffect)((function(){le([_,te])}),[_,te]);var Ee=function(){var e=s()(r()().mark((function e(){var t,n,a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={orgUid:null==o?void 0:o.uid,startDate:ce[0].format("YYYY-MM-DD"),endDate:ce[1].format("YYYY-MM-DD"),type:he,workgroupUid:he===B.v5D?Me:void 0,agentUid:he===B.fyH?Te:void 0},e.next=4,(0,U.RU)(t);case 4:n=e.sent,console.log("queryStatisticServiceByDate response:",n.data,t),200===n.code&&n.data&&(a=n.data,W({onlineAgents:a.onlineAgentCount||0,totalSessions:a.acceptedThreadCount||0,avgResponseTime:a.avgFirstResponseTime?Math.round(a.avgFirstResponseTime/60):0,avgSatisfaction:a.satisfactionRate||0,onlineAgentCount:a.onlineAgentCount||0,offlineAgentCount:a.offlineAgentCount||0,avgFirstResponseTime:a.avgFirstResponseTime?Math.round(a.avgFirstResponseTime/60):0,avgConversationTime:a.avgConversationTime?Math.round(a.avgConversationTime/60):0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("获取统计数据失败:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){Ee(),Pe()}),[ce,he,Me,Te]);var Fe=[{title:e.formatMessage({id:"bi.agent.table.name"}),dataIndex:"nickname",key:"nickname",render:function(e,t){return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(p.Z,{src:t.avatar,style:{marginRight:8}}),e]})}},{title:e.formatMessage({id:"bi.agent.table.totalSessions"}),dataIndex:"totalSessions",key:"totalSessions",sorter:function(e,t){return e.totalSessions-t.totalSessions}},{title:e.formatMessage({id:"bi.agent.table.avgResponseTime"}),dataIndex:"avgResponseTime",key:"avgResponseTime",render:function(t){return"".concat(t).concat(e.formatMessage({id:"bi.time.minute"}))}},{title:e.formatMessage({id:"bi.agent.table.avgConversationTime"}),dataIndex:"avgConversationTime",key:"avgConversationTime",render:function(t){return"".concat(t).concat(e.formatMessage({id:"bi.time.minute"}))}},{title:e.formatMessage({id:"bi.agent.table.onlineTime"}),dataIndex:"onlineTime",key:"onlineTime",render:function(t){return"".concat(t).concat(e.formatMessage({id:"bi.time.hour"}))}},{title:e.formatMessage({id:"bi.agent.table.busyTime"}),dataIndex:"busyTime",key:"busyTime",render:function(t){return"".concat(t).concat(e.formatMessage({id:"bi.time.hour"}))}},{title:e.formatMessage({id:"bi.agent.table.agentMessageCount"}),dataIndex:"agentMessageCount",key:"agentMessageCount"},{title:e.formatMessage({id:"bi.agent.table.visitorMessageCount"}),dataIndex:"visitorMessageCount",key:"visitorMessageCount"},{title:e.formatMessage({id:"bi.agent.table.avgMessagePerThread"}),dataIndex:"avgMessagePerThread",key:"avgMessagePerThread"},{title:e.formatMessage({id:"bi.agent.table.satisfaction"}),dataIndex:"avgSatisfaction",key:"avgSatisfaction",render:function(t){return(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{style:{marginRight:8},children:t>0?"".concat(t,"%"):e.formatMessage({id:"bi.common.noRating"})}),t>0&&(0,X.jsx)(g.Z,{percent:t,size:"small",showInfo:!1})]})}}];return(0,X.jsxs)("div",{style:{padding:"24px"},children:[(0,X.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,X.jsx)("h2",{children:e.formatMessage({id:"bi.agent.title"})}),(0,X.jsxs)("p",{children:[e.formatMessage({id:"bi.agent.description"}),"today"===ie&&(0,X.jsxs)("span",{style:{color:"#666",marginLeft:8},children:["(",_.format("YYYY-MM-DD"),")"]}),"yesterday"===ie&&(0,X.jsxs)("span",{style:{color:"#666",marginLeft:8},children:["(",_.format("YYYY-MM-DD"),")"]}),("week"===ie||"lastWeek"===ie||"month"===ie||"custom"===ie)&&(0,X.jsxs)("span",{style:{color:"#666",marginLeft:8},children:["(",_.format("YYYY-MM-DD")," ~ ",te.format("YYYY-MM-DD"),")"]})]})]}),(0,X.jsx)(m.Z,{style:{marginBottom:"24px"},children:(0,X.jsx)(v.Z,{direction:"vertical",style:{width:"100%"},children:(0,X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,X.jsxs)(v.Z,{wrap:!0,children:[(0,X.jsx)(h.ZP.Group,{value:ie,onChange:function(e){return se(e.target.value)},children:Ae.map((function(e){return(0,X.jsx)(h.ZP.Button,{value:e.value,children:e.label},e.value)}))}),"custom"===ie&&(0,X.jsx)(L,{value:[_,te],onChange:function(e){$(e[0]),ne(e[1])}})]}),(0,X.jsxs)(v.Z,{wrap:!0,children:[(0,X.jsxs)(d.Z,{value:he,style:{width:120},onChange:function(e){xe(e),we(void 0),Se(void 0)},children:[(0,X.jsx)(V,{value:B.whQ,children:e.formatMessage({id:"bi.statistic.level.organization"})}),(0,X.jsx)(V,{value:B.v5D,children:e.formatMessage({id:"bi.statistic.level.workgroup"})}),(0,X.jsx)(V,{value:B.fyH,children:e.formatMessage({id:"bi.statistic.level.agent"})})]}),he===B.v5D&&(0,X.jsx)(d.Z,{value:Me,style:{width:150},onChange:we,placeholder:e.formatMessage({id:"bi.statistic.level.workgroup"}),allowClear:!0,children:Ye.map((function(e){return(0,X.jsx)(V,{value:e.uid,children:e.nickname},e.uid)}))}),he===B.fyH&&(0,X.jsx)(d.Z,{value:Te,style:{width:150},onChange:Se,placeholder:e.formatMessage({id:"bi.statistic.level.agent"}),allowClear:!0,children:qe.map((function(e){return(0,X.jsx)(V,{value:e.uid,children:e.nickname},e.uid)}))}),(0,X.jsx)(x.ZP,{type:"primary",icon:(0,X.jsx)(T.Z,{}),onClick:function(){return Pe()},loading:a,children:e.formatMessage({id:"bi.common.refresh"})}),(0,X.jsx)(y.Z,{title:e.formatMessage({id:"ticket.statistic.filter.export"}),children:(0,X.jsx)(x.ZP,{icon:(0,X.jsx)(S.Z,{}),onClick:function(){var e=localStorage.getItem(B.LA8);window.open((0,H.kG)()+"/api/v1/service/statistic/export?"+new URLSearchParams({type:he,startDate:ce[0].format("YYYY-MM-DD"),endDate:ce[1].format("YYYY-MM-DD"),workgroupUid:he===B.v5D?Me:"",agentUid:he===B.fyH?Te:"",orgUid:(null==o?void 0:o.uid)||"",accessToken:e||""}).toString())},children:e.formatMessage({id:"ticket.statistic.filter.export"})})})]})]})})}),(0,X.jsxs)(b.Z,{spinning:a,children:[(0,X.jsxs)(M.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.onlineAgents"}),value:G.onlineAgentCount,prefix:(0,X.jsx)(Z.Z,{}),valueStyle:{color:"#3f8600"}})})}),(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.offlineAgents"}),value:G.offlineAgentCount,prefix:(0,X.jsx)(Z.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.totalSessions"}),value:G.totalSessions,prefix:(0,X.jsx)(C.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.avgResponseTime"}),value:G.avgResponseTime,prefix:(0,X.jsx)(Y.Z,{}),valueStyle:{color:"#722ed1"},suffix:e.formatMessage({id:"bi.time.minute"})})})})]}),(0,X.jsxs)(M.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.avgFirstResponseTime"}),value:G.avgFirstResponseTime,prefix:(0,X.jsx)(Y.Z,{}),valueStyle:{color:"#13c2c2"},suffix:e.formatMessage({id:"bi.time.minute"})})})}),(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.avgConversationTime"}),value:G.avgConversationTime,prefix:(0,X.jsx)(Y.Z,{}),valueStyle:{color:"#fa8c16"},suffix:e.formatMessage({id:"bi.time.minute"})})})}),(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.avgSatisfaction"}),value:G.avgSatisfaction,prefix:(0,X.jsx)(z,{}),valueStyle:{color:"#eb2f96"},suffix:"%"})})}),(0,X.jsx)(w.Z,{span:6,children:(0,X.jsx)(m.Z,{children:(0,X.jsx)(k.Z,{title:e.formatMessage({id:"bi.agent.card.totalAgents"}),value:G.onlineAgentCount+G.offlineAgentCount,prefix:(0,X.jsx)(Z.Z,{}),valueStyle:{color:"#52c41a"}})})})]}),(0,X.jsx)(m.Z,{title:e.formatMessage({id:"bi.agent.ranking"}),style:{marginBottom:"24px"},children:(0,X.jsx)(M.Z,{gutter:16,children:D.sort((function(e,t){return t.totalSessions-e.totalSessions})).slice(0,3).map((function(t,n){return(0,X.jsx)(w.Z,{span:8,children:(0,X.jsxs)(m.Z,{size:"small",style:{textAlign:"center"},children:[(0,X.jsx)(p.Z,{size:64,src:t.avatar}),(0,X.jsxs)("div",{style:{marginTop:8},children:[(0,X.jsx)("div",{style:{fontWeight:"bold"},children:t.nickname}),(0,X.jsxs)("div",{style:{color:"#666"},children:[t.totalSessions,e.formatMessage({id:"bi.time.unit"})]})]})]})},t.key)}))})}),(0,X.jsx)(m.Z,{title:e.formatMessage({id:"bi.agent.detailData"}),children:(0,X.jsx)(j.Z,{columns:Fe,dataSource:D,pagination:{current:pe.current,pageSize:pe.pageSize,total:pe.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}},onChange:function(e){Pe(e.current,e.pageSize)},size:"middle"})})]})]})}},34599:function(e,t,n){n.d(t,{u:function(){return o}});var a=n(5488),r=n(16894),i=n(45034),s=n(47401),o=(0,r.Ue)()((0,i.mW)((0,i.tJ)((0,s.n)((function(e,t){return{currentOrg:{uid:"",name:"",description:""},setCurrentOrg:function(t){e({currentOrg:t})},deleteOrg:function(){return e({},!0)}}})),{name:a.IzN})))}}]);