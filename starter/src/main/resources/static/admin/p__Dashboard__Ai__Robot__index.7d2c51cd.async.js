"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8472],{5651:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(77260),r=n(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},s=n(54183),a=function(e,t){return r.createElement(s.Z,(0,o.Z)({},e,{ref:t,icon:l}))};var i=r.forwardRef(a)},54822:function(e,t,n){n(45332),n(16698),n(68100),n(87663),n(5488),n(14870),n(44194),n(31549)},79519:function(e,t,n){var o=n(45332),r=n.n(o),l=n(34599),s=n(5488),a=n(32394),i=n(48821),u=n(47783),d=n(14870),c=n(68349),f=n(44194),g=n(31549);t.Z=function(e){var t=e.open,n=e.onClose,o=e.onSubmit,m=(0,d.useIntl)(),p=a.A.useForm(),v=r()(p,1)[0],h=(0,l.u)((function(e){return e.currentOrg})),b=function(){console.log("handleSaveRobot"),v.validateFields().then((function(e){console.log("handleSaveRobot values:",e);var t={name:e.nickname,nickname:e.nickname,type:e.type,serviceSettings:{showQuickFaqs:!1,quickFaqs:[],showFaqs:!1,faqs:[],showGuessFaqs:!1,guessFaqs:[],showHotFaqs:!1,hotFaqs:[],showShortcutFaqs:!1,shortcutFaqs:[]},kbEnabled:!1,orgUid:null==h?void 0:h.uid};console.log("robotObject:",t),o(t),v.resetFields()})).catch((function(e){console.log("Form errors:",e)}))};return(0,f.useEffect)((function(){console.log("RobotForm useEffect"),t&&(v.resetFields(),v.setFieldsValue({type:s.f4h}))}),[t,v]),(0,g.jsx)("div",{children:(0,g.jsx)(c.Z,{title:m.formatMessage({id:"pages.robot.new",defaultMessage:"New"}),open:t,forceRender:!0,okText:m.formatMessage({id:"save",defaultMessage:"Save"}),onOk:b,onCancel:function(){v.resetFields(),n()},children:(0,g.jsxs)(a.A,{form:v,name:"basic",style:{maxWidth:400},submitter:!1,children:[(0,g.jsx)(i.Z,{label:m.formatMessage({id:"nickname",defaultMessage:"Nickname"}),name:"nickname",rules:[{required:!0,message:m.formatMessage({id:"nickname",defaultMessage:"Nickname"})}],fieldProps:{onPressEnter:function(){return b()}}}),(0,g.jsx)(u.Z,{label:m.formatMessage({id:"type",defaultMessage:"Type"}),name:["type"],options:[{label:m.formatMessage({id:s.f4h,defaultMessage:"Service"}),value:s.f4h},{label:m.formatMessage({id:s.Qeb,defaultMessage:"Chat"}),value:s.Qeb}],rules:[{required:!0,message:m.formatMessage({id:"choose",defaultMessage:"Choose"})}],fieldProps:{placeholder:m.formatMessage({id:"choose",defaultMessage:"Choose"}),onChange:function(e){console.log("onTreeSelectChange:",e)},allowClear:!0}})]})})})}},8211:function(e,t,n){n.r(t),n.d(t,{default:function(){return Le}});var o=n(66985),r=n(44194),l=n(76711),s=n.n(l),a=n(73193),i=n.n(a),u=n(90819),d=n.n(u),c=n(89933),f=n.n(c),g=n(45332),m=n.n(g),p=n(68100),v=n(68349),h=n(90317),b=n(5780),x=n(27259),y=n(96501),M=n(45681),C=n(15722),k=n(82669),j=n(90727),w=n(14870),Z=n(24522),S=n(79519),F=n(33232),q=n(5025),T=n(34599),P=n(18751),R=n(5488),E=n(31549),U=function(){var e=(0,Z.Z)().isDarkMode,t=(0,w.useIntl)(),n=(0,r.useRef)(!1),o=(0,P.Z)(),l=o.translateString,a=(o.translateStringTranct,(0,p.V)((function(e){return{robotResult:e.robotResult,currentRobot:e.currentRobot,insertRobot:e.insertRobot,deleteCurrentRobot:e.deleteCurrentRobot,setRobotResult:e.setRobotResult,setCurrentRobot:e.setCurrentRobot}}))),u=a.robotResult,c=a.currentRobot,g=a.insertRobot,U=a.deleteCurrentRobot,I=a.setRobotResult,$=a.setCurrentRobot,O=(0,T.u)((function(e){return e.currentOrg})),A=(0,r.useState)(""),V=m()(A,2),L=V[0],z=V[1],N=(0,r.useState)(!1),B=m()(N,2),W=B[0],H=B[1],D=(0,r.useState)(!0),Q=m()(D,2),X=Q[0],K=Q[1],_=(0,r.useState)(0),G=m()(_,2),J=G[0],Y=G[1],ee=v.Z.useModal(),te=m()(ee,2),ne=te[0],oe=te[1],re=function(){var e=f()(d()().mark((function e(n){var o;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),q.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,F.gf)(n);case 4:o=e.sent,console.log("delete robot response",o),200===o.code?(q.yw.destroy(),q.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),U(n.uid)):(q.yw.destroy(),q.yw.error(o.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=(0,r.useCallback)(f()(d()().mark((function e(){var t,o,r,l,a,f,g,m,p,v,h,b,x,y=arguments;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:0,o=y.length>1&&void 0!==y[1]&&y[1],!W&&!n.current){e.next=4;break}return e.abrupt("return");case 4:return n.current=!0,H(!0),r={pageNumber:t,pageSize:20,categoryUid:"",level:R.whQ,type:R.f4h,orgUid:null==O?void 0:O.uid,searchText:L},e.prev=7,e.next=10,(0,F.p0)(r);case 10:l=e.sent,console.log("queryRobotsByOrg: ",l,r),200===l.code?(m=(null==l||null===(a=l.data)||void 0===a?void 0:a.content)||[],p=null!==(f=null==l||null===(g=l.data)||void 0===g?void 0:g.last)&&void 0!==f?f:0===m.length,K(!p),Y(t),o?(h=(null==u||null===(v=u.data)||void 0===v?void 0:v.content)||[],b=i()(i()({},l),{},{data:i()(i()({},l.data),{},{content:[].concat(s()(h),s()(m))})}),I(b)):(I(l),m.length>0&&(x=c&&m.some((function(e){return e.uid===(null==c?void 0:c.uid)})),c&&x||$(m[0])))):q.yw.error(l.message);case 13:return e.prev=13,n.current=!1,H(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[7,,13,17]])}))),[W,L,null==O?void 0:O.uid,u,c,I,$]);(0,r.useEffect)((function(){Y(0),K(!0),le(0,!1)}),[L,null==O?void 0:O.uid]);var se=(0,r.useState)(!1),ae=m()(se,2),ie=ae[0],ue=ae[1],de=function(){var e=f()(d()().mark((function e(n){var o;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.yw.loading(t.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=3,(0,F.lg)(n);case 3:o=e.sent,console.log("handleSaveRobot response:",o),200===o.code?(q.yw.destroy(),q.yw.success(t.formatMessage({id:"create.success"})),g(o.data),$(o.data),ue(!1)):(q.yw.destroy(),ue(!1),q.yw.error(o.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){return t.formatMessage({id:null==e?void 0:e.type,defaultMessage:null==e?void 0:e.type})};return(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{style:{margin:10},children:[(0,E.jsxs)(h.Z,{gap:"small",align:"flex-start",children:[(0,E.jsx)(b.ZP,{size:"small",type:"primary",icon:(0,E.jsx)(k.Z,{}),onClick:function(){ue(!0)},children:t.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,E.jsx)(b.ZP,{size:"small",onClick:function(){Y(0),K(!0),le(0,!1)},children:t.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,E.jsx)(b.ZP,{onClick:function(){return function(e){ne.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,E.jsx)(C.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(l(e.nickname),"】？"),onOk:function(){re(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})}(c)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==c?void 0:c.uid),children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,E.jsx)("div",{style:{marginTop:16},children:(0,E.jsx)(x.Z.Search,{placeholder:t.formatMessage({id:"robot.search.placeholder",defaultMessage:"搜索机器人名称或描述"}),value:L,onChange:function(e){return z(e.target.value)},onSearch:function(e){console.log("搜索内容:",e)},enterButton:(0,E.jsx)(j.Z,{}),allowClear:!0,style:{width:"100%"}})})]}),(0,E.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 260px)"},onScroll:function(e){var t=e.currentTarget,n=t.scrollTop;t.scrollHeight-n-t.clientHeight<50&&X&&!W&&le(J+1,!0)},children:(0,E.jsx)(y.Z,{itemLayout:"horizontal",dataSource:u.data.content,renderItem:function(t,n){return(0,E.jsx)(y.Z.Item,{style:(null==c?void 0:c.uid)===t.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){$(t)},children:(0,E.jsx)(y.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,E.jsx)(M.Z,{src:t.avatar}),title:(0,E.jsx)(E.Fragment,{children:null==t?void 0:t.nickname}),description:ce(t)})})}})}),ie&&(0,E.jsx)(S.Z,{open:ie,onClose:function(){ue(!1)},onSubmit:de}),oe]})},I=n(37963),$=n(29787),O=n(92023),A=n(59908),V=n(32394),L=n(48821),z=n(16331),N=n(20903),B=(n(53),function(){var e,t=V.A.useForm(),n=m()(t,1)[0],o=(0,w.useIntl)(),l=(0,P.Z)().translateString,s=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=s.currentRobot,u=s.setCurrentRobot,c=(0,r.useState)(""),g=m()(c,2),v=g[0],h=g[1],x=(0,r.useState)(l(null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.welcomeTip)||""),y=m()(x,2),C=y[0],k=y[1];(0,r.useEffect)((function(){var e;a&&(n.setFieldValue("nickname",l(null==a?void 0:a.nickname)),k(l(null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.welcomeTip)),n.setFieldValue("description",l(null==a?void 0:a.description)))}),[a]);var j=function(){var e=f()(d()().mark((function e(t){var n,r,l,s,c,f,g,m;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),q.yw.loading(o.formatMessage({id:"updating"})),g=i()(i()({},a),{},{serviceSettings:i()(i()({},a.serviceSettings),{},{welcomeTip:C,welcomeFaqUids:null==a||null===(n=a.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),quickFaqUids:null==a||null===(r=a.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.faqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==a||null===(s=a.serviceSettings)||void 0===s||null===(s=s.guessFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),hotFaqUids:null==a||null===(c=a.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))}),nickname:t.nickname,description:t.description,avatar:v}),console.log("robotObject:",g),e.next=6,(0,F.$l)(g);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(q.yw.success(o.formatMessage({id:"update.success"})),u(m.data)):q.yw.error(m.message),q.yw.destroy();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=f()(d()().mark((function e(t){var n,r;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),h(t),n=i()(i()({},a),{},{avatar:t}),e.next=5,(0,F.lz)(n);case 5:r=e.sent,console.log("updateAvatar response:",r),200===r.code?(q.yw.success(o.formatMessage({id:"update.success"})),u(r.data)):q.yw.error(r.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h(null==a?void 0:a.avatar)}),[a]),(0,E.jsxs)(V.A,{form:n,style:{marginLeft:"20px"},onFinish:j,children:[(0,E.jsx)(N.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:null==e?void 0:e.fileList},label:o.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,E.jsxs)(O.G,{onSuccess:Z,onError:function(e){console.log("handleUploadError:",e)},children:[(0,E.jsx)(M.Z,{src:v}),(0,E.jsx)(b.ZP,{icon:(0,E.jsx)(A.Z,{}),children:o.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,E.jsx)(L.Z,{width:"md",name:"nickname",label:o.formatMessage({id:"agent.info.nickname"}),rules:[{required:!0,message:o.formatMessage({id:"agent.info.nickname.required"})}]}),(0,E.jsx)(z.Z,{width:"md",name:"description",label:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),rules:[{required:!0,message:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})}]})]})}),W=n(90486),H=n(5321),D=n(5651),Q=n(11137),X=n(47783),K=n(49616),_=function(){var e=(0,w.useIntl)(),t=(0,w.useNavigate)(),n=V.A.useForm(),o=m()(n,1)[0],l=(0,P.Z)().translateString,s=(0,r.useState)(),a=m()(s,2),u=a[0],c=a[1],g=(0,T.u)((function(e){return e.currentOrg})),v=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),h=v.currentRobot,x=v.setCurrentRobot,y=function(){var t=f()(d()().mark((function t(){var n,o;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,type:R.QPQ,orgUid:null==g?void 0:g.uid},t.next=4,(0,W.AP)(n);case 4:o=t.sent,console.log("getKeywordBase response:",n,o),q.yw.destroy(),200===o.code?c(o):q.yw.error(o.message);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){y()}),[]),(0,r.useEffect)((function(){o.setFieldValue("kbUid",null==h?void 0:h.kbUid),o.setFieldValue("kbEnabled",null==h?void 0:h.kbEnabled)}),[h]);var M=function(){var t=f()(d()().mark((function t(n){var o,r,l,s,a,u,c;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onFinish values:",n),u=i()(i()({},h),{},{serviceSettings:i()(i()({},h.serviceSettings),{},{faqUids:null==h||null===(o=h.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==h||null===(r=h.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==h||null===(l=h.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==h||null===(s=h.serviceSettings)||void 0===s||null===(s=s.hotFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),shortcutFaqUids:null==h||null===(a=h.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),kbUid:n.kbUid,kbEnabled:n.kbEnabled}),console.log("robotObject:",u),t.next=5,(0,F.$l)(u);case 5:c=t.sent,console.log("updateRobot response:",c),200===c.code?(q.yw.destroy(),q.yw.success(e.formatMessage({id:"update.success"})),x(c.data)):(q.yw.destroy(),q.yw.error(c.message));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var e=f()(d()().mark((function e(t){var n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setFieldValue("kbEnabled",t),e.prev=1,e.next=4,o.validateFields();case 4:n=e.sent,M(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("验证失败:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,E.jsx)("div",{children:(0,E.jsxs)(V.A,{form:o,onFinish:M,submitter:{render:function(t,n){return(0,E.jsxs)(K.Z,{children:[n,(0,E.jsx)(b.ZP,{color:"danger",variant:"outlined",icon:(0,E.jsx)(H.Z,{}),onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:e.formatMessage({id:"chat.test",defaultMessage:"ChatTest"})})]})}},children:[(0,E.jsx)(Q.Z,{name:"kbEnabled",label:e.formatMessage({id:"robot.kb.enable",defaultMessage:"启用大模型知识库"}),tooltip:e.formatMessage({id:"robot.kb.enable.tooltip",defaultMessage:"开启后，机器人将优先使用知识库回答问题"}),fieldProps:{onChange:C}}),(0,E.jsx)(X.Z,{width:"md",name:"kbUid",label:"大模型知识库",options:null==u?void 0:u.data.content.map((function(e){return{value:e.uid,label:l(e.name)}})),fieldProps:{onChange:function(e){console.log("kbUid:",e)}}}),(0,E.jsx)(V.A.Item,{children:(0,E.jsx)(b.ZP,{icon:(0,E.jsx)(D.Z,{}),onClick:function(){t("/kb/llm")},children:"添加大模型知识库"},"github")})]})})},G=n(72054),J=n(94146),Y=(n(50027),n(10154)),ee=n.n(Y),te=n(91221),ne=n(41282),oe=n(39328),re=n(17323),le=n(64665),se=["fieldProps","proFieldProps","min","max","step","marks","vertical","range"],ae=r.forwardRef((function(e,t){var n=e.fieldProps,o=e.proFieldProps,r=e.min,l=e.max,s=e.step,a=e.marks,i=e.vertical,u=e.range,d=(0,re.Z)(e,se);return(0,E.jsx)(le.Z,(0,oe.Z)({valueType:"slider",fieldProps:(0,oe.Z)((0,oe.Z)({},n),{},{min:r,max:l,step:s,marks:a,vertical:i,range:u,style:null==n?void 0:n.style}),ref:t,proFieldProps:o,filedConfig:{ignoreWidth:!0}},d))})),ie=n(85817),ue=n(79401),de=n(52202),ce=n(21463),fe=n(18580),ge=n(33363),me=function(){var e,t=(0,w.useIntl)(),n=(0,Z.Z)().isDarkMode,o=V.A.useForm(),l=m()(o,1)[0],s=(0,P.Z)().translateString,a=(0,T.u)((function(e){return e.currentOrg})),u=(0,r.useState)([]),c=m()(u,2),g=c[0],v=c[1],h=(0,r.useState)({}),x=m()(h,2),y=x[0],M=x[1],C=(0,r.useState)(!1),k=m()(C,2),j=k[0],S=k[1],U=(0,r.useState)(""),I=m()(U,2),$=I[0],O=I[1],A=(0,r.useState)(""),L=m()(A,2),N=L[0],B=L[1],W=(0,r.useState)(""),H=m()(W,2),D=H[0],K=H[1],_=(0,r.useState)(""),G=m()(_,2),J=(G[0],G[1]),Y=(0,r.useState)(""),oe=m()(Y,2),re=(oe[0],oe[1]),le=(0,r.useState)(!1),se=m()(le,2),me=se[0],pe=se[1],ve=(0,r.useState)(""),he=m()(ve,2),be=(he[0],he[1]),xe=(0,r.useState)(""),ye=m()(xe,2),Me=ye[0],Ce=ye[1],ke=(0,r.useState)(""),je=m()(ke,2),we=je[0],Ze=je[1],Se=(0,r.useState)(""),Fe=m()(Se,2),qe=Fe[0],Te=Fe[1],Pe=(0,r.useState)({}),Re=m()(Pe,2),Ee=Re[0],Ue=Re[1],Ie=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),$e=Ie.currentRobot,Oe=Ie.setCurrentRobot;(0,r.useEffect)((function(){var e,t,n,o,r,a,i,u,d,c,f,g,m,p,v,h,b,x,y,M,C,k,j;l.setFieldValue("enabled",null==$e||null===(e=$e.llm)||void 0===e?void 0:e.enabled),l.setFieldValue("enableThinking",null==$e||null===(t=$e.llm)||void 0===t?void 0:t.enableThinking),l.setFieldValue("topK",null==$e||null===(n=$e.llm)||void 0===n?void 0:n.topK),l.setFieldValue("scoreThreshold",null==$e||null===(o=$e.llm)||void 0===o?void 0:o.scoreThreshold),l.setFieldValue("textProviderUid",null==$e||null===(r=$e.llm)||void 0===r?void 0:r.textProviderUid),l.setFieldValue("textModel",null==$e||null===(a=$e.llm)||void 0===a?void 0:a.textModel),l.setFieldValue("temperature",null==$e||null===(i=$e.llm)||void 0===i?void 0:i.temperature),l.setFieldValue("topP",null==$e||null===(u=$e.llm)||void 0===u?void 0:u.topP),l.setFieldValue("prompt",s(null==$e||null===(d=$e.llm)||void 0===d?void 0:d.prompt)),l.setFieldValue("defaultReply",null==$e||null===(c=$e.llm)||void 0===c?void 0:c.defaultReply),l.setFieldValue("contextMsgCount",null==$e||null===(f=$e.llm)||void 0===f?void 0:f.contextMsgCount),l.setFieldValue("rerankEnabled",null==$e||null===(g=$e.llm)||void 0===g?void 0:g.rerankEnabled),l.setFieldValue("rerankProvider",null==$e||null===(m=$e.llm)||void 0===m?void 0:m.rerankProvider),l.setFieldValue("rerankProviderUid",null==$e||null===(p=$e.llm)||void 0===p?void 0:p.rerankProviderUid),l.setFieldValue("rerankModel",null==$e||null===(v=$e.llm)||void 0===v?void 0:v.rerankModel),l.setFieldValue("searchType",(null==$e||null===(h=$e.llm)||void 0===h?void 0:h.searchType)||"MIXED");var w=(null==$e||null===(b=$e.llm)||void 0===b?void 0:b.textProviderUid)||"",Z=(null==$e||null===(x=$e.llm)||void 0===x?void 0:x.textModel)||"";J((null==$e||null===(y=$e.llm)||void 0===y?void 0:y.rerankProvider)||""),re((null==$e||null===(M=$e.llm)||void 0===M?void 0:M.rerankModel)||""),O(w),B(Z);var S=(null==$e||null===(C=$e.llm)||void 0===C?void 0:C.rerankProvider)||"",F=(null==$e||null===(k=$e.llm)||void 0===k?void 0:k.rerankProviderUid)||"",q=(null==$e||null===(j=$e.llm)||void 0===j?void 0:j.rerankModel)||"";be(S),Ce(F),Ze(q),Z&&!D&&K(Z)}),[$e]),(0,r.useEffect)((function(){var e=$,t=N;if(e&&t&&y[e]){var n=y[e].find((function(e){return e.value===t}));n&&K(n.label)}}),[y,$,N]),(0,r.useEffect)((function(){var e=Me,t=we;if(e&&t&&Ee[e]){var n=Ee[e].find((function(e){return e.value===t}));n&&Te(n.label)}}),[Ee,Me,we]);var Ae=function(){var e=f()(d()().mark((function e(){var t,n,o,r,l,s,i;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={pageNumber:0,pageSize:100,sortBy:"createdAt",sortDirection:"ascend",enabled:!0,orgUid:null==a?void 0:a.uid,level:R.whQ},e.next=4,(0,te.mK)(t);case 4:n=e.sent,console.log("queryLlmProvidersByOrg:",n,t),200===n.code?(r=n.data.content||[],l=r.filter((function(e){return!ge.ju.includes(e.type)})),v(l),(s=null==$e||null===(o=$e.llm)||void 0===o?void 0:o.textProviderUid)&&(i=l.find((function(e){return e.uid===s})))&&(i.type===R.CZ7?Xe(i):_e(i))):q.yw.error(n.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch providers:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){Ae()}),[]);var Ve=(0,r.useCallback)((function(){S(!0)}),[]),Le=(0,r.useCallback)((function(){S(!1)}),[]),ze=(0,r.useCallback)((function(e,t,n){S(!1);var o=g.find((function(t){return t.uid===e})),r=o?o.type:e;O(e),B(t),K(n),l.setFieldsValue({textProvider:r,textProviderUid:e,textModel:t}),l.submit()}),[l,g]),Ne=((0,r.useCallback)((function(){pe(!0)}),[]),(0,r.useCallback)((function(){pe(!1)}),[])),Be=(0,r.useCallback)((function(e,t,n){pe(!1);var o=g.find((function(t){return t.uid===e})),r=o?o.type:e;be(r),Ce(e),Ze(t),Te(n),l.setFieldsValue({rerankProvider:r,rerankProviderUid:e,rerankModel:t}),l.submit()}),[l,g]),We=(0,r.useCallback)((function(e,t){M((function(n){return i()(i()({},n),{},ee()({},e,t))}))}),[]),He=(0,r.useCallback)((function(e,t){Ue((function(n){return i()(i()({},n),{},ee()({},e,t))}))}),[]),De=function(){var e=f()(d()().mark((function e(n){var o,r,l,s,a,u,c,f;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.yw.loading(t.formatMessage({id:"updating"})),c=i()(i()({},$e),{},{serviceSettings:i()(i()({},$e.serviceSettings),{},{welcomeFaqUids:null==$e||null===(o=$e.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null===(r=$e.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==$e||null===(l=$e.serviceSettings)||void 0===l||null===(l=l.quickFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==$e||null===(s=$e.serviceSettings)||void 0===s||null===(s=s.guessFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),hotFaqUids:null==$e||null===(a=$e.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==$e||null===(u=$e.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),llm:i()(i()({},$e.llm),{},{enabled:n.enabled,enableThinking:n.enableThinking,topK:n.topK,scoreThreshold:n.scoreThreshold,textProvider:n.textProvider,textProviderUid:n.textProviderUid,textModel:n.textModel,temperature:n.temperature,topP:n.topP,prompt:n.prompt,defaultReply:n.defaultReply,contextMsgCount:n.contextMsgCount,rerankEnabled:n.rerankEnabled,rerankProvider:n.rerankProvider,rerankProviderUid:n.rerankProviderUid,rerankModel:n.rerankModel,searchType:n.searchType})}),e.next=4,(0,F.$l)(c);case 4:200===(f=e.sent).code?(q.yw.destroy(),q.yw.success(t.formatMessage({id:"update.success"})),Oe(f.data)):(q.yw.destroy(),q.yw.error(f.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=(0,r.useCallback)((function(e,n){return[(0,E.jsx)(b.ZP,{type:"default",onClick:function(){var t;null===(t=e.form)||void 0===t||t.resetFields()},children:t.formatMessage({id:"llm.reset"})},"reset"),(0,E.jsx)(b.ZP,{type:"primary",onClick:function(){var t;null===(t=e.form)||void 0===t||t.submit()},children:t.formatMessage({id:"llm.save"})},"submit")]}),[t]),Xe=function(){var e=f()(d()().mark((function e(n){var o,r;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={baseUrl:n.baseUrl},e.next=4,(0,de.VM)(o);case 4:r=e.sent,console.log("getOllamaServerStatus: ",r),200===r.code&&r.data?Ke(n):q.yw.error(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to check Ollama status:",e.t0),q.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=f()(d()().mark((function e(n){var o,r,l,s;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={baseUrl:n.baseUrl},e.next=4,(0,de.c8)(o);case 4:r=e.sent,console.log("getOllamaLocalModels: ",r),200===r.code?(l=r.data.map((function(e){return{value:e.name,label:e.name,providerName:n.uid}})),M((function(e){return i()(i()({},e),{},ee()({},n.uid,l))})),$===n.uid&&N&&(s=l.find((function(e){return e.value===N})))&&K(s.label)):q.yw.error(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch local models:",e.t0),q.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=f()(d()().mark((function e(n){var o,r,s,u;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={pageNumber:0,pageSize:50,providerUid:null==n?void 0:n.uid,orgUid:null==a?void 0:a.uid,level:R.whQ},e.next=4,(0,ne.LF)(o);case 4:r=e.sent,console.log("queryLlmModelsByOrg: ",r,o),200===r.code?(s=r.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,providerName:n.nickname}})),M((function(e){return i()(i()({},e),{},ee()({},n.uid,s))})),n.uid===l.getFieldValue("textProviderUid")&&N&&(u=s.find((function(e){return e.value===N})))&&K(u.label)):q.yw.error(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch models:",e.t0),q.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(V.A,{form:l,size:"large",layout:"vertical",style:{maxWidth:"800px"},submitter:{render:Qe,submitButtonProps:{size:"large",htmlType:"button"}},onFinish:De,children:[(0,fe.OJ)()&&(0,E.jsx)(X.Z,{width:"lg",name:"searchType",label:t.formatMessage({id:"llm.searchType.label"}),tooltip:t.formatMessage({id:"llm.searchType.tooltip"}),options:[{label:t.formatMessage({id:"llm.searchType.fulltext"}),value:R.ccx},{label:t.formatMessage({id:"llm.searchType.vector"}),value:R.DGp},{label:t.formatMessage({id:"llm.searchType.mixed"}),value:R.rk3}],rules:[{required:!0,message:t.formatMessage({id:"llm.searchType.required"})}],fieldProps:{popupRender:function(e){return(0,E.jsxs)("div",{children:[e,(0,E.jsxs)("div",{style:{padding:"8px 12px"},children:[(0,E.jsx)("div",{style:{borderTop:"1px solid #e8e8e8",margin:"4px 0"}}),(0,E.jsxs)("div",{style:{padding:"8px 0",fontSize:"12px",color:n?"rgba(255, 255, 255, 0.7)":"rgba(0,0,0,0.45)"},children:[(0,E.jsxs)("strong",{children:[t.formatMessage({id:"llm.searchType.fulltext"}),"："]}),t.formatMessage({id:"llm.searchType.fulltext.description"}),(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsxs)("strong",{children:[t.formatMessage({id:"llm.searchType.vector"}),"："]}),t.formatMessage({id:"llm.searchType.vector.description"}),(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsxs)("strong",{children:[t.formatMessage({id:"llm.searchType.mixed"}),"："]}),t.formatMessage({id:"llm.searchType.mixed.description"})]})]})]})}}}),!1,(0,E.jsx)(Q.Z,{width:"lg",name:"enabled",label:t.formatMessage({id:"llm.enabled.label"}),tooltip:t.formatMessage({id:"llm.enabled.tooltip"}),fieldProps:{onChange:function(e){setTimeout((function(){l.submit()}),100)}}}),l.getFieldValue("enabled")&&(0,E.jsxs)(E.Fragment,{children:[!1,(0,E.jsx)(z.Z,{width:"lg",name:"prompt",label:t.formatMessage({id:"llm.prompt.label"}),tooltip:t.formatMessage({id:"llm.prompt.tooltip"}),placeholder:t.formatMessage({id:"llm.prompt.placeholder"}),fieldProps:{rows:13,maxLength:16383,showCount:!0},rules:[{required:!0,message:t.formatMessage({id:"llm.prompt.required"})},{max:16383,message:t.formatMessage({id:"llm.prompt.maxLength"})}]}),(0,E.jsx)(z.Z,{width:"lg",name:"defaultReply",label:t.formatMessage({id:"llm.defaultReply.label"}),tooltip:t.formatMessage({id:"llm.defaultReply.tooltip"}),placeholder:t.formatMessage({id:"llm.defaultReply.placeholder"}),fieldProps:{rows:1,maxLength:100,showCount:!0},rules:[{required:!0,message:t.formatMessage({id:"llm.defaultReply.required"})},{max:100,message:t.formatMessage({id:"llm.defaultReply.maxLength"})}]}),(0,E.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,E.jsx)(ie.Z.Text,{strong:!0,style:{marginRight:"8px"},children:t.formatMessage({id:"llm.modelSelection.label"})}),(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:"8px"},children:(0,E.jsx)(ue.Z,{size:"small",style:{width:"100%",maxWidth:"500px",cursor:"pointer",border:"1px solid #d9d9d9"},onClick:Ve,children:$&&N?(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(ie.Z.Text,{type:"secondary",children:t.formatMessage({id:"llm.modelSelection.provider"})}),(0,E.jsx)(ie.Z.Text,{strong:!0,children:s((null===(e=g.find((function(e){return e.uid===$})))||void 0===e?void 0:e.nickname)||$)}),(0,E.jsx)("br",{}),(0,E.jsx)(ie.Z.Text,{type:"secondary",children:t.formatMessage({id:"llm.modelSelection.model"})}),(0,E.jsx)(ie.Z.Text,{strong:!0,children:D||N})]}),(0,E.jsx)(b.ZP,{type:"primary",children:t.formatMessage({id:"llm.modelSelection.change"})})]}):(0,E.jsx)("div",{style:{textAlign:"center"},children:(0,E.jsx)(b.ZP,{type:"primary",children:t.formatMessage({id:"llm.modelSelection.select"})})})})}),(0,E.jsxs)("div",{style:{display:"none"},children:[(0,E.jsx)(X.Z,{name:"textProvider",width:"lg"}),(0,E.jsx)(X.Z,{name:"textProviderUid",width:"lg"}),(0,E.jsx)(X.Z,{name:"textModel",width:"lg"})]})]}),(0,E.jsxs)("div",{style:{width:"500px"},children:[(0,E.jsx)(ae,{width:"md",label:t.formatMessage({id:"llm.temperature.label"}),name:"temperature",min:0,max:1,step:.1,marks:{0:t.formatMessage({id:"llm.temperature.precise"}),.5:t.formatMessage({id:"llm.temperature.balanced"}),1:t.formatMessage({id:"llm.temperature.creative"})},tooltip:t.formatMessage({id:"llm.temperature.tooltip"}),rules:[{required:!0,message:t.formatMessage({id:"llm.temperature.required"})}]}),(0,E.jsx)(ae,{width:"md",label:t.formatMessage({id:"llm.topP.label"}),name:"topP",min:0,max:1,step:.05,marks:{0:t.formatMessage({id:"llm.topP.low"}),.5:t.formatMessage({id:"llm.topP.medium"}),1:t.formatMessage({id:"llm.topP.high"})},tooltip:t.formatMessage({id:"llm.topP.tooltip"})}),(0,E.jsx)(ae,{width:"md",label:t.formatMessage({id:"llm.contextMsgCount.label"}),name:"contextMsgCount",min:0,max:50,step:1,marks:{0:"0",5:"5",10:"10",15:"15",20:"20",25:"25",30:"30",35:"35",40:"40",45:"45",50:"50"},tooltip:t.formatMessage({id:"llm.contextMsgCount.tooltip"}),rules:[{required:!0,message:t.formatMessage({id:"llm.contextMsgCount.required"})}]})]})]})]}),(0,E.jsx)(ce.Z,{visible:j,onCancel:Le,onOk:ze,initialProvider:$,initialModel:N,initialModelLabel:D,providers:g,currentOrgUid:null==a?void 0:a.uid,existingProviderModels:y,onModelsLoaded:We,allowedModelTypes:[R.l55,"CHAT"]}),(0,E.jsx)(ce.Z,{visible:me,onCancel:Ne,onOk:Be,initialProvider:Me,initialModel:we,initialModelLabel:qe,providers:g,currentOrgUid:null==a?void 0:a.uid,existingProviderModels:Ee,onModelsLoaded:He,allowedModelTypes:[R.SeQ]})]})},pe=(n(74790),n(59956)),ve=n(3642),he=n(67072),be=n(10826),xe=(n(39120),n(54822),function(){var e=(0,w.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"kb",label:(0,E.jsx)(w.FormattedMessage,{id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,E.jsx)(_,{})},{key:"faq",label:(0,E.jsx)(w.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,E.jsx)(G.Z,{type:R._X4})},{key:"quickFaqs",label:(0,E.jsx)(w.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"Quick Button"}),children:(0,E.jsx)(J.Z,{type:R._X4})},{key:"llm",label:(0,E.jsx)(w.FormattedMessage,{id:"llm",defaultMessage:"LLM"}),children:(0,E.jsx)(me,{})},{key:"rate",label:(0,E.jsx)(w.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,E.jsx)(be.Z,{type:R._X4})},{key:"right",label:(0,E.jsx)(w.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,E.jsx)(ve.Z,{type:R._X4})},{key:"popup",label:(0,E.jsx)(w.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,E.jsx)(pe.Z,{type:R._X4})},{key:"trigger",label:(0,E.jsx)(w.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,E.jsx)(he.Z,{type:R._X4})}]}),[e]);return(0,E.jsx)(I.Z,{tabPosition:"left",items:t})}),ye=n(1155),Me=n(92634),Ce=n(27473),ke=n(53504),je=n(78875),we=n(20228),Ze=n(65532),Se=n(82373),Fe=n(80556),qe=n(40074),Te=n(58791),Pe=n(61353),Re=n(16852),Ee=n(40439),Ue=n(86994),Ie=n(58087),$e=n(75831),Oe=function(){var e=(0,w.useIntl)(),t=(0,r.useContext)($e.I).isDarkMode,n=(0,p.V)((function(e){return e.currentRobot})),o=(0,T.u)((function(e){return e.currentOrg})),l=(0,r.useState)(!1),s=m()(l,2),a=s[0],u=s[1],c=(0,r.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),g=m()(c,2),v=g[0],h=g[1],x=function(){var t=f()(d()().mark((function t(){var r,l,s,a,i,c,f,g,m,p,v,b,x;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),u(!0),q.yw.info(e.formatMessage({id:"refresh",defaultMessage:"正在刷新队列数据..."})),t.prev=3,r={pageNumber:0,pageSize:100,agentUid:null==n?void 0:n.uid,orgUid:null==o?void 0:o.uid},t.next=7,(0,Me.Wq)(r);case 7:l=t.sent,console.log("queryQueuesByOrg response:",l.data),200===(null==l?void 0:l.code)?(q.yw.destroy(),null!=l&&null!==(s=l.data)&&void 0!==s&&s.content&&l.data.content.length>0?(x=l.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),h({totalCount:null!==(a=x.totalCount)&&void 0!==a?a:0,queuingCount:null!==(i=x.queuingCount)&&void 0!==i?i:0,chattingCount:null!==(c=x.chattingCount)&&void 0!==c?c:0,offlineCount:null!==(f=x.offlineCount)&&void 0!==f?f:0,closedCount:null!==(g=x.closedCount)&&void 0!==g?g:0,leaveMsgCount:null!==(m=x.leaveMsgCount)&&void 0!==m?m:0,robotToAgentCount:null!==(p=x.robotToAgentCount)&&void 0!==p?p:0,avgWaitTime:null!==(v=x.avgWaitTime)&&void 0!==v?v:0,avgResolveTime:null!==(b=x.avgResolveTime)&&void 0!==b?b:0})):h({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):q.yw.error(null==l?void 0:l.message);case 10:return t.prev=10,u(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){x()}),[n]);var y={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},M={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,E.jsxs)("div",{style:{padding:"4px"},children:[(0,E.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,E.jsx)(Ce.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"刷新数据"}),children:(0,E.jsx)(b.ZP,{type:"primary",icon:(0,E.jsx)(Fe.Z,{}),loading:a,onClick:x,size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})})})}),(0,E.jsxs)(ke.Z,{spinning:a,children:[(0,E.jsxs)(je.Z,{gutter:[16,16],children:[(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.totalCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"总会话"}),value:v.totalCount,prefix:(0,E.jsx)(qe.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.queuingCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"排队中"}),value:v.queuingCount,prefix:(0,E.jsx)(Te.Z,{}),valueStyle:{color:"#fa8c16"}})})}),(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.chattingCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"会话中"}),value:v.chattingCount,prefix:(0,E.jsx)(Pe.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.offlineCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"离线留言"}),value:v.offlineCount,prefix:(0,E.jsx)(Re.Z,{}),valueStyle:{color:"#8c8c8c"}})})}),(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.closedCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"已关闭"}),value:v.closedCount,prefix:(0,E.jsx)(Ee.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.leaveMsgCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"留言数"}),value:v.leaveMsgCount,prefix:(0,E.jsx)(Ue.Z,{}),valueStyle:{color:M.leaveMsgCount.valueColor}})})})]}),(0,E.jsx)(Se.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"更多统计"})}),(0,E.jsx)(je.Z,{gutter:[16,16],children:(0,E.jsx)(we.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(ue.Z,{style:i()(i()({},y),{},{backgroundColor:M.robotToAgentCount.bg}),hoverable:!0,children:(0,E.jsx)(Ze.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"转人工数"}),value:v.robotToAgentCount,prefix:(0,E.jsx)(Ie.Z,{}),valueStyle:{color:M.robotToAgentCount.valueColor}})})})})]})]})},Ae=function(){var e=(0,w.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,E.jsx)(B,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,E.jsx)(ye.Z,{type:R._X4})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,E.jsx)(xe,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,E.jsx)(Oe,{}),disabled:!(0,fe.OJ)()},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,E.jsx)($.Z,{type:R._X4})}]}),[e]);return(0,E.jsx)(I.Z,{defaultActiveKey:"basic",items:t})},Ve=n(74424),Le=function(){var e=(0,Ve.Z)(),t=e.leftSiderStyle,n=e.contentStyle;return(0,E.jsxs)(o.Z,{style:{height:"100%"},children:[(0,E.jsx)(o.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:t,children:(0,E.jsx)(U,{})}),(0,E.jsx)(o.Z.Panel,{style:n,children:(0,E.jsx)(Ae,{})})]})}},93892:function(e,t,n){n.d(t,{Z:function(){return O}});var o=n(44194),r=n(58644),l=n(92520),s=n(14377),a=n(64985),i=n(18701),u=n(51865),d=n.n(u),c=n(42976),f=n(63941),g=n(65489),m=n(15288),p=n(35779),v=n(59199),h=n(49336),b=n(79255);const x=(e,t,n,o,r)=>({background:e,border:`${(0,v.bf)(o.lineWidth)} ${o.lineType} ${t}`,[`${r}-icon`]:{color:n}}),y=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:o,marginSM:r,fontSize:l,fontSizeLG:s,lineHeight:a,borderRadiusLG:i,motionEaseInOutCirc:u,withDescriptionIconSize:d,colorText:c,colorTextHeading:f,withDescriptionPadding:g,defaultPadding:m}=e;return{[t]:Object.assign(Object.assign({},(0,h.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:m,wordWrap:"break-word",borderRadius:i,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:l,lineHeight:a},"&-message":{color:f},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${u}, opacity ${n} ${u},\n        padding-top ${n} ${u}, padding-bottom ${n} ${u},\n        margin-bottom ${n} ${u}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:g,[`${t}-icon`]:{marginInlineEnd:r,fontSize:d,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:f,fontSize:s},[`${t}-description`]:{display:"block",color:c}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},M=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:l,colorWarningBorder:s,colorWarningBg:a,colorError:i,colorErrorBorder:u,colorErrorBg:d,colorInfo:c,colorInfoBorder:f,colorInfoBg:g}=e;return{[t]:{"&-success":x(r,o,n,e,t),"&-info":x(g,f,c,e,t),"&-warning":x(a,s,l,e,t),"&-error":Object.assign(Object.assign({},x(d,u,i,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},C=e=>{const{componentCls:t,iconCls:n,motionDurationMid:o,marginXS:r,fontSizeIcon:l,colorIcon:s,colorIconHover:a}=e;return{[t]:{"&-action":{marginInlineStart:r},[`${t}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:l,lineHeight:(0,v.bf)(l),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:s,transition:`color ${o}`,"&:hover":{color:a}}},"&-close-text":{color:s,transition:`color ${o}`,"&:hover":{color:a}}}}};var k=(0,b.I$)("Alert",(e=>[y(e),M(e),C(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}))),j=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const w={success:r.Z,info:i.Z,error:l.Z,warning:a.Z},Z=e=>{const{icon:t,prefixCls:n,type:r}=e,l=w[r]||null;return t?(0,m.wm)(t,o.createElement("span",{className:`${n}-icon`},t),(()=>({className:d()(`${n}-icon`,t.props.className)}))):o.createElement(l,{className:`${n}-icon`})},S=e=>{const{isClosable:t,prefixCls:n,closeIcon:r,handleClose:l,ariaProps:a}=e,i=!0===r||void 0===r?o.createElement(s.Z,null):r;return t?o.createElement("button",Object.assign({type:"button",onClick:l,className:`${n}-close-icon`,tabIndex:0},a),i):null},F=o.forwardRef(((e,t)=>{const{description:n,prefixCls:r,message:l,banner:s,className:a,rootClassName:i,style:u,onMouseEnter:m,onMouseLeave:v,onClick:h,afterClose:b,showIcon:x,closable:y,closeText:M,closeIcon:C,action:w,id:F}=e,q=j(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[T,P]=o.useState(!1);const R=o.useRef(null);o.useImperativeHandle(t,(()=>({nativeElement:R.current})));const{getPrefixCls:E,direction:U,closable:I,closeIcon:$,className:O,style:A}=(0,p.dj)("alert"),V=E("alert",r),[L,z,N]=k(V),B=t=>{var n;P(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},W=o.useMemo((()=>void 0!==e.type?e.type:s?"warning":"info"),[e.type,s]),H=o.useMemo((()=>!("object"!=typeof y||!y.closeIcon)||(!!M||("boolean"==typeof y?y:!1!==C&&null!=C||!!I))),[M,C,y,I]),D=!(!s||void 0!==x)||x,Q=d()(V,`${V}-${W}`,{[`${V}-with-description`]:!!n,[`${V}-no-icon`]:!D,[`${V}-banner`]:!!s,[`${V}-rtl`]:"rtl"===U},O,a,i,N,z),X=(0,f.Z)(q,{aria:!0,data:!0}),K=o.useMemo((()=>"object"==typeof y&&y.closeIcon?y.closeIcon:M||(void 0!==C?C:"object"==typeof I&&I.closeIcon?I.closeIcon:$)),[C,y,M,$]),_=o.useMemo((()=>{const e=null!=y?y:I;if("object"==typeof e){const{closeIcon:t}=e;return j(e,["closeIcon"])}return{}}),[y,I]);return L(o.createElement(c.ZP,{visible:!T,motionName:`${V}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:b},(({className:t,style:r},s)=>o.createElement("div",Object.assign({id:F,ref:(0,g.sQ)(R,s),"data-show":!T,className:d()(Q,t),style:Object.assign(Object.assign(Object.assign({},A),u),r),onMouseEnter:m,onMouseLeave:v,onClick:h,role:"alert"},X),D?o.createElement(Z,{description:n,icon:e.icon,prefixCls:V,type:W}):null,o.createElement("div",{className:`${V}-content`},l?o.createElement("div",{className:`${V}-message`},l):null,n?o.createElement("div",{className:`${V}-description`},n):null),w?o.createElement("div",{className:`${V}-action`},w):null,o.createElement(S,{isClosable:H,prefixCls:V,closeIcon:K,handleClose:B,ariaProps:_})))))}));var q=F,T=n(40730),P=n(22633),R=n(81880),E=n(18232);let U=function(e){function t(){var e;return(0,T.Z)(this,t),(e=(0,R.Z)(this,t,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,E.Z)(t,e),(0,P.Z)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:n,children:r}=this.props,{error:l,info:s}=this.state,a=(null==s?void 0:s.componentStack)||null,i=void 0===e?(l||"").toString():e,u=void 0===t?a:t;return l?o.createElement(q,{id:n,type:"error",message:i,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},u)}):r}}])}(o.Component);var I=U;const $=q;$.ErrorBoundary=I;var O=$},81880:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(88126),r=n(49717),l=n(98277);function s(e,t,n){return t=(0,o.Z)(t),(0,l.Z)(e,(0,r.Z)()?Reflect.construct(t,n||[],(0,o.Z)(e).constructor):t.apply(e,n))}}}]);