"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{22014:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(73743),a=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},o=n(5901),i=function(e,r){return a.createElement(o.Z,(0,t.Z)({},e,{ref:r,icon:s}))};var c=a.forwardRef(i)},87587:function(e,r,n){var t=n(7657),a=n(75101),s=n(44194),o=n(11764),i=n(31549),c=["fieldProps","proFieldProps"],l=function(e,r){var n=e.fieldProps,s=e.proFieldProps,l=(0,a.Z)(e,c);return(0,i.jsx)(o.Z,(0,t.Z)({ref:r,valueType:"textarea",fieldProps:n,proFieldProps:s},l))};r.Z=s.forwardRef(l)},13181:function(e,r,n){n.d(r,{Z:function(){return w}});var t=n(90819),a=n.n(t),s=n(89933),o=n.n(s),i=n(45332),c=n.n(i),l=n(63926),u=n(93363);function d(){return f.apply(this,arguments)}function f(){return(f=o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/kaptcha/api/v1/get",{method:"GET",params:{client:l.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,r){return g.apply(this,arguments)}function g(){return(g=o()(a()().mark((function e(r,n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/kaptcha/api/v1/check",{method:"POST",data:{captchaUid:r,captchaCode:n,client:l.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=n(80597),m=n(6546),x=n(44194),v=n(31549),w=function(e){var r=e.onKaptchaChange,n=e.onKaptchaCheck,t=(0,u.useIntl)(),s=(0,x.useState)(),i=c()(s,2),l=i[0],f=i[1],g=(0,x.useState)(),w=c()(g,2),y=w[0],j=w[1],b=function(){var e=o()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:200===(r=e.sent).code&&(f(r.data.captchaUid),j(r.data.captchaImage));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=o()(a()().mark((function e(r,t){var s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r,t);case 2:s=e.sent,console.log("checkCaptcha response",s),200===s.code?n&&n(!0):n&&n(!1);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){b()}),[]);return(0,v.jsx)(v.Fragment,{children:y&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.Z,{onChange:function(e){r&&(r(l,e.target.value),e.target.value&&""!==e.target.value&&4===e.target.value.trim().length?Z(l,e.target.value):n&&n(!1))},prefix:(0,v.jsx)(h.Z,{}),placeholder:t.formatMessage({id:"captcha",defaultMessage:"captcha"}),style:{width:"65%",float:"left",height:40},allowClear:!0}),(0,v.jsx)("img",{src:y,alt:"captcha",onClick:b})]})})}},19079:function(e,r,n){n.d(r,{G:function(){return f}});var t=n(73193),a=n.n(t),s=(n(44194),n(37575)),o=n(63926),i=n(28977),c=n.n(i),l=n(28370),u=n(82954),d=n(31549),f=function(e){var r=e.children,n=e.onSuccess,t=e.onError,i={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:o.IrL,categoryUid:"",kbUid:"",client:o.bVn},f={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(o.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var r=c()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return i.file=e,i.fileName=r,i.fileType=e.type,console.log("beforeUpload",i),!0},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var r=e.file.response.data.fileUrl;n(r),l.yw.success("".concat(e.file.name," 上传成功"))}else t(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),t(e.file))}};return(0,d.jsx)(s.Z,a()(a()({},f),{},{children:r}))}},18429:function(e,r,n){var t=n(63926),a=n(22176),s=n(93363);r.Z=function(){var e=(0,s.useIntl)();return{translateString:function(r){return null==r?r:r&&(null!=r&&r.startsWith(t.VoP)||null!=r&&r.startsWith("ROLE_"))?e.formatMessage({id:r,defaultMessage:r}):r},translateStringTranct:function(r){return null==r?r:null!=r&&r.startsWith(t.VoP)||null!=r&&r.startsWith("ROLE_")?(0,a.aS)(e.formatMessage({id:r,defaultMessage:r}),10):(0,a.aS)(r,10)}}}},99528:function(e,r,n){n.r(r),n.d(r,{default:function(){return Q}});var t=n(73193),a=n.n(t),s=n(90819),o=n.n(s),i=n(89933),c=n.n(i),l=n(45332),u=n.n(l),d=n(44194),f=n(76705),p=n(62303),g=n(55971),h=n(95570),m=n(81417),x=n(28230),v=n(72244),w=n(40168),y=n(79847),j=n(69935),b=n(47173),Z=n(87587),M=n(93363),k=n(57039),C=n(22014),P=n(76630),S=n(38086),U=n(16829),F=n(38722),I=n(15883),z=n(68275),R=n(99113),T=n(28370),V=n(19079),A=n(18429),E=n(22176),q=n(76204),L=n(31549),W=function(e){var r=e.open,n=e.onClose,t=(0,M.useIntl)(),a=(0,A.Z)().translateString;return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(q.Z,{title:t.formatMessage({id:"pages.settings.reset.password",defaultMessage:"重置密码"}),forceRender:!0,open:r,footer:null,onCancel:function(){n()},children:(0,L.jsxs)(j.A,{initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},onFinish:function(){var e=c()(o()().mark((function e(r){var t,s;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("changePassword:",r),!(r.newPassword.trim().length<6)){e.next=4;break}return T.yw.error("密码最小长度不能小于6"),e.abrupt("return");case 4:if(r.newPassword===r.confirmPassword){e.next=7;break}return T.yw.error("两次输入密码不一致"),e.abrupt("return");case 7:return t={oldPassword:r.oldPassword,newPassword:r.newPassword},e.next=10,(0,R.Cp)(t);case 10:s=e.sent,console.log("changePassword response:",s),200===s.code?(T.yw.success("Password changed successfully!"),n()):T.yw.error(a(s.message));case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,L.jsx)(b.Z.Password,{name:"oldPassword",label:"原密码(手机号直接登录用户，可以留空)"}),(0,L.jsx)(b.Z.Password,{name:"newPassword",label:"新密码"}),(0,L.jsx)(b.Z.Password,{name:"confirmPassword",label:"确认密码"})]})})})},B=n(11081),N=n(13181),K=n(53067),O=n(63926),G=n(82325),H=n(83835),Y=function(e){var r=e.open,n=e.onSubmit,t=e.onClose,a=(0,M.useIntl)(),s=j.A.useForm(),i=u()(s,1)[0],l=(0,A.Z)().translateString,f=(0,z.L)((function(e){return{userInfo:e.userInfo,deviceUid:e.deviceUid}})),p=f.userInfo,g=f.deviceUid,h=(0,K.u)((function(e){return e.currentOrg})),m=(0,d.useRef)(),x=(0,d.useState)(""),v=u()(x,2),w=v[0],y=v[1],Z=(0,d.useState)(""),k=u()(Z,2),C=k[0],S=k[1],U=(0,d.useState)(!1),F=u()(U,2),I=F[0],V=F[1],E=function(){var e=c()(o()().mark((function e(r,n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captchaUid",r," captchaValue",n),y(r),S(n);case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),W=function(){var e=c()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captcha check result",r),V(r);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Y=function(){var e=c()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.validateFields().then(function(){var e=c()(o()().mark((function e(r){var a,s;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("changeEmail:",r),(null==p?void 0:p.email)!==r.email){e.next=4;break}return T.yw.error("Email is not changed!"),e.abrupt("return");case 4:return a={email:r.email,code:r.code,platform:O.iw8},e.next=7,(0,R.Uk)(a);case 7:s=e.sent,console.log("changeEmail response:",s),200===s.code?(T.yw.success("Email changed successfully!"),n(r.email),t()):T.yw.error(l(s.message));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){setTimeout((function(){var e;console.log("endCaptchaTiming"),null===(e=m.current)||void 0===e||e.endTiming()}),2)};return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(q.Z,{title:a.formatMessage({id:"pages.settings.reset.email",defaultMessage:"重置邮箱"}),forceRender:!0,open:r,footer:null,onCancel:function(){t()},children:(0,L.jsxs)(j.A,{form:i,onFinish:function(){var e=c()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("changeEmail:",r),Y();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,L.jsx)(b.Z,{fieldProps:{size:"large",prefix:(0,L.jsx)(G.Z,{})},name:"email",placeholder:a.formatMessage({id:"pages.login.email.placeholder",defaultMessage:"邮箱"}),rules:[{required:!0,message:(0,L.jsx)(M.FormattedMessage,{id:"pages.login.email.required",defaultMessage:"请输入邮箱！"})},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"邮箱格式不正确"},{max:50,message:"邮箱不得超过50字符"}]}),(0,L.jsx)(j.A.Item,{name:"captchaCode",rules:[],children:(0,L.jsx)(N.Z,{onKaptchaChange:E,onKaptchaCheck:W})}),(0,L.jsx)(H.Z,{fieldProps:{size:"large",prefix:(0,L.jsx)(P.Z,{})},captchaProps:{size:"large",disabled:!I},placeholder:a.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,r){return e?"".concat(r," ").concat(a.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):a.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},phoneName:"email",name:"code",rules:[{required:!0,message:(0,L.jsx)(M.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],fieldRef:m,onGetCaptcha:function(){var e=c()(o()().mark((function e(r){var n,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("email:",r),!r){e.next=18;break}if((null==p?void 0:p.email)!==r){e.next=6;break}return T.yw.error("Email is not changed!"),D(),e.abrupt("return");case 6:return n={email:r,type:O.Iju,captchaUid:w,captchaCode:C,deviceUid:g,userUid:null==p?void 0:p.uid,orgUid:null==h?void 0:h.uid,platform:O.iw8},e.next=9,(0,B.O8)(n);case 9:if(t=e.sent,console.log("sendEmailCode",t),200===t.code){e.next=15;break}return T.yw.error(t.message),D(),e.abrupt("return");case 15:T.yw.success(t.message),e.next=19;break;case 18:T.yw.error("手机号格式错误");case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()})]})})})},D=function(e){var r=e.open,n=e.onSubmit,t=e.onClose,a=(0,M.useIntl)(),s=j.A.useForm(),i=u()(s,1)[0],l=(0,A.Z)().translateString,f=(0,z.L)((function(e){return{userInfo:e.userInfo,deviceUid:e.deviceUid}})),p=f.userInfo,g=f.deviceUid,h=(0,K.u)((function(e){return e.currentOrg})),m=(0,d.useRef)(),x=(0,d.useState)(""),v=u()(x,2),w=v[0],y=v[1],Z=(0,d.useState)(""),k=u()(Z,2),C=k[0],S=k[1],U=(0,d.useState)(!1),F=u()(U,2),I=F[0],V=F[1],E=function(){var e=c()(o()().mark((function e(r,n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captchaUid",r," captchaValue",n),y(r),S(n);case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),W=function(){var e=c()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captcha check result",r),V(r);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Y=function(){var e=c()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.validateFields().then(function(){var e=c()(o()().mark((function e(r){var a,s;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("changeMobile:",r),(null==p?void 0:p.mobile)!==r.mobile){e.next=4;break}return T.yw.error("mobile is not changed"),e.abrupt("return");case 4:return a={mobile:r.mobile,code:r.code,platform:O.iw8},e.next=7,(0,R.KF)(a);case 7:s=e.sent,console.log("changeMobile response:",s),200===s.code?(T.yw.success("Mobile changed successfully!"),n(r.mobile),t()):T.yw.error(l(s.message));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){setTimeout((function(){var e;console.log("endCaptchaTiming"),null===(e=m.current)||void 0===e||e.endTiming()}),2)};return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(q.Z,{title:a.formatMessage({id:"pages.settings.reset.mobile",defaultMessage:"重置手机号"}),forceRender:!0,open:r,footer:null,onCancel:function(){t()},children:(0,L.jsxs)(j.A,{form:i,onFinish:function(){var e=c()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("changeMobile:",r),Y();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,L.jsx)(b.Z,{fieldProps:{size:"large",prefix:(0,L.jsx)(G.Z,{})},name:"mobile",placeholder:a.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,L.jsx)(M.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})},{pattern:/^1\d{10}$/,message:(0,L.jsx)(M.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})}]}),(0,L.jsx)(j.A.Item,{name:"captchaCode",rules:[],children:(0,L.jsx)(N.Z,{onKaptchaChange:E,onKaptchaCheck:W})}),(0,L.jsx)(H.Z,{fieldProps:{size:"large",prefix:(0,L.jsx)(P.Z,{})},captchaProps:{size:"large",disabled:!I},placeholder:a.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,r){return e?"".concat(r," ").concat(a.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):a.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},phoneName:"mobile",name:"code",rules:[{required:!0,message:(0,L.jsx)(M.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],fieldRef:m,onGetCaptcha:function(){var e=c()(o()().mark((function e(r){var n,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("mobile:",r),!r||11!==r.length){e.next=18;break}if((null==p?void 0:p.mobile)!==r){e.next=6;break}return T.yw.error("mobile is not changed"),D(),e.abrupt("return");case 6:return n={mobile:r,type:O.BG8,captchaUid:w,captchaCode:C,deviceUid:g,userUid:null==p?void 0:p.uid,orgUid:null==h?void 0:h.uid,platform:O.iw8},e.next=9,(0,B.Y7)(n);case 9:if(t=e.sent,console.log("sendMobileCode",t),200===t.code){e.next=15;break}return T.yw.error(t.message),D(),e.abrupt("return");case 15:T.yw.success(t.message),e.next=19;break;case 18:T.yw.error("手机号格式错误");case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()})]})})})},_={labelCol:{span:6},wrapperCol:{span:18}},$=f.Z.Title,J=f.Z.Text,Q=function(){var e=(0,M.useIntl)(),r=j.A.useForm(),n=u()(r,1)[0],t=(0,A.Z)().translateString,s=(0,z.L)((function(e){return{userInfo:e.userInfo,setUserInfo:e.setUserInfo}})),i=s.userInfo,l=s.setUserInfo,f=(0,d.useState)(""),q=u()(f,2),B=q[0],N=q[1],K=(0,d.useState)(!1),O=u()(K,2),G=O[0],H=O[1],Q=(0,d.useState)(!1),X=u()(Q,2),ee=X[0],re=X[1],ne=(0,d.useState)(!1),te=u()(ne,2),ae=te[0],se=te[1],oe=function(){var r=c()(o()().mark((function r(a,s){var c,u;return o()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,R.ck)(a);case 3:if(c=r.sent,console.log("updateProfile response:",c),200!==c.code){r.next=12;break}return u=s||e.formatMessage({id:"update.success"}),T.yw.success(u),c.data.username!==i.username?(0,E.NZ)():(l(c.data),n.setFieldsValue({uid:c.data.uid,username:c.data.username,nickname:t(c.data.nickname),email:c.data.email,mobile:c.data.mobile,description:t(c.data.description)})),r.abrupt("return",!0);case 12:return T.yw.error(c.message),r.abrupt("return",!1);case 14:r.next=21;break;case 16:return r.prev=16,r.t0=r.catch(0),console.error("Update profile error:",r.t0),T.yw.error(e.formatMessage({id:"update.failed",defaultMessage:"更新失败"})),r.abrupt("return",!1);case 21:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(e,n){return r.apply(this,arguments)}}(),ie=function(){var r=c()(o()().mark((function r(n){var t;return o()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("handleUploadSuccess:",n),N(n),t=a()(a()({},i),{},{avatar:n}),r.next=5,oe(t,e.formatMessage({id:"avatar.upload.success",defaultMessage:"头像上传成功"}));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),ce=function(){var e=c()(o()().mark((function e(r){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a()(a()(a()({},i),r),{},{avatar:B}),console.log("Form submit userObject:",n),e.next=4,oe(n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){i&&N(i.avatar)}),[i]);var le=function(){var e=c()(o()().mark((function e(){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.Ai)();case 2:r=e.sent,console.log("handleRefreshProfile getProfile response:",r),200===r.code?(l(r.data),n.setFieldsValue({uid:r.data.uid,username:r.data.username,nickname:t(r.data.nickname),email:r.data.email,mobile:r.data.mobile,description:t(r.data.description)})):T.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){le()}),[]),(0,L.jsxs)("div",{style:{padding:"24px",backgroundColor:"#f0f2f5",minHeight:"100vh"},children:[(0,L.jsxs)(p.Z,{variant:"borderless",style:{maxWidth:800,margin:"0 auto",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[(0,L.jsxs)($,{level:2,style:{marginBottom:"24px",textAlign:"center"},children:[(0,L.jsx)(k.Z,{style:{marginRight:"8px",color:"#1890ff"}}),e.formatMessage({id:"profile.title",defaultMessage:"个人资料"})]}),(0,L.jsx)(p.Z,{size:"small",style:{marginBottom:"24px",backgroundColor:"#fafafa",borderRadius:"8px"},children:(0,L.jsx)(g.Z,{justify:"center",align:"middle",style:{padding:"20px 0"},children:(0,L.jsx)(h.Z,{children:(0,L.jsxs)(m.Z,{direction:"vertical",align:"center",size:"large",children:[(0,L.jsx)(x.Z,{src:B,size:100,style:{border:"4px solid #fff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}}),(0,L.jsx)(V.G,{onSuccess:ie,onError:function(e){console.log("handleUploadError:",e)},children:(0,L.jsx)(v.ZP,{type:"primary",icon:(0,L.jsx)(C.Z,{}),style:{borderRadius:"20px"},children:e.formatMessage({id:"pages.robot.upload",defaultMessage:"上传头像"})})},"avatar")]})})})}),(0,L.jsxs)(j.A,a()(a()({},_),{},{form:n,onFinish:ce,submitter:{render:function(e,r){return(0,L.jsx)(g.Z,{justify:"center",style:{marginTop:"32px"},children:(0,L.jsx)(h.Z,{children:(0,L.jsx)(m.Z,{size:"middle",children:r})})})},submitButtonProps:{size:"large",style:{borderRadius:"8px",minWidth:"120px"}},resetButtonProps:{size:"large",style:{borderRadius:"8px",minWidth:"120px"}}},children:[(0,L.jsxs)(p.Z,{title:(0,L.jsxs)(J,{strong:!0,style:{fontSize:"16px"},children:[(0,L.jsx)(k.Z,{style:{marginRight:"8px",color:"#1890ff"}}),"基本信息"]}),size:"small",style:{marginBottom:"24px"},children:[(0,L.jsx)(b.Z,{name:"uid",label:"用户ID",rules:[{required:!0}],readonly:!0,fieldProps:{style:{backgroundColor:"#f5f5f5"}}}),(0,L.jsx)(b.Z,{name:"username",label:e.formatMessage({id:"username.change.tip",defaultMessage:"用户名"}),rules:[{required:!0}],fieldProps:{prefix:(0,L.jsx)(k.Z,{style:{color:"#1890ff"}})}}),(0,L.jsx)(b.Z,{name:"nickname",label:e.formatMessage({id:"nickname",defaultMessage:"昵称"}),rules:[{required:!0}],fieldProps:{prefix:(0,L.jsx)(k.Z,{style:{color:"#52c41a"}})}}),(0,L.jsx)(Z.Z,{name:"description",label:e.formatMessage({id:"description",defaultMessage:"个人简介"}),fieldProps:{rows:4,placeholder:"请输入个人简介..."}})]}),(0,L.jsx)(p.Z,{title:(0,L.jsxs)(J,{strong:!0,style:{fontSize:"16px"},children:[(0,L.jsx)(P.Z,{style:{marginRight:"8px",color:"#fa541c"}}),"安全设置"]}),size:"small",style:{marginBottom:"24px"},children:(0,L.jsx)(g.Z,{gutter:[16,16],children:(0,L.jsx)(h.Z,{span:24,children:(0,L.jsxs)(m.Z,{direction:"vertical",style:{width:"100%"},children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(P.Z,{style:{color:"#fa541c"}}),(0,L.jsx)(J,{children:"登录密码"})]}),(0,L.jsx)(v.ZP,{type:"link",onClick:function(){H(!0)},style:{fontWeight:"bold"},children:e.formatMessage({id:"pages.settings.reset.password",defaultMessage:"修改密码"})})]}),(0,L.jsx)(w.Z,{style:{margin:"8px 0"}})]})})})}),(0,L.jsx)(p.Z,{title:(0,L.jsxs)(J,{strong:!0,style:{fontSize:"16px"},children:[(0,L.jsx)(S.Z,{style:{marginRight:"8px",color:"#722ed1"}}),"联系方式"]}),size:"small",children:(0,L.jsx)(g.Z,{gutter:[16,16],children:(0,L.jsxs)(h.Z,{span:24,children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(S.Z,{style:{color:"#722ed1"}}),(0,L.jsx)(J,{children:"邮箱地址"}),null!=i&&i.emailVerified?(0,L.jsx)(y.Z,{icon:(0,L.jsx)(U.Z,{}),color:"success",children:"已验证"}):(0,L.jsx)(y.Z,{icon:(0,L.jsx)(F.Z,{}),color:"error",children:"未验证"})]}),(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(J,{type:"secondary",children:(null==i?void 0:i.email)||"未设置"}),(0,L.jsx)(v.ZP,{type:"link",onClick:function(){re(!0)},style:{fontWeight:"bold"},children:e.formatMessage({id:"pages.settings.reset.email",defaultMessage:"修改邮箱"})})]})]}),(0,L.jsx)(w.Z,{style:{margin:"8px 0"}}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(I.Z,{style:{color:"#13c2c2"}}),(0,L.jsx)(J,{children:"手机号码"}),null!=i&&i.mobileVerified?(0,L.jsx)(y.Z,{icon:(0,L.jsx)(U.Z,{}),color:"success",children:"已验证"}):(0,L.jsx)(y.Z,{icon:(0,L.jsx)(F.Z,{}),color:"error",children:"未验证"})]}),(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(J,{type:"secondary",children:(null==i?void 0:i.mobile)||"未设置"}),(0,L.jsx)(v.ZP,{type:"link",onClick:function(){se(!0)},style:{fontWeight:"bold"},children:e.formatMessage({id:"pages.settings.reset.mobile",defaultMessage:"修改手机号"})})]})]})]})})})]}))]}),G&&(0,L.jsx)(W,{open:G,onClose:function(){H(!1)}}),ee&&(0,L.jsx)(Y,{open:ee,onSubmit:function(e){re(!1),i.email=e,l(i),n.setFieldValue("email",e)},onClose:function(){re(!1)}}),ae&&(0,L.jsx)(D,{open:ae,onSubmit:function(e){se(!1),i.mobile=e,l(i),n.setFieldValue("mobile",e)},onClose:function(){se(!1)}})]})}}}]);