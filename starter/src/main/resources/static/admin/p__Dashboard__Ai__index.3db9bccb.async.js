"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2522],{5651:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(77260),o=n(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},s=n(54183),a=function(e,t){return o.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:l}))};var i=o.forwardRef(a)},54822:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(94956),n(33232),n(40629),n(16698),n(68100),n(87663),n(5488),n(14870),n(44194),n(31549)},62757:function(e,t,n){var r=n(45332),o=n.n(r),l=n(34599),s=n(5488),a=n(32394),i=n(48821),u=n(47783),d=n(14870),c=n(68349),f=n(44194),g=n(31549);t.Z=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,m=(0,d.useIntl)(),v=a.A.useForm(),p=o()(v,1)[0],x=(0,l.u)((function(e){return e.currentOrg})),h=function(){console.log("handleSaveRobot"),p.validateFields().then((function(e){console.log("handleSaveRobot values:",e);var t={name:e.nickname,nickname:e.nickname,type:e.type,serviceSettings:{showQuickFaqs:!1,quickFaqs:[],showFaqs:!1,faqs:[],showGuessFaqs:!1,guessFaqs:[],showHotFaqs:!1,hotFaqs:[],showShortcutFaqs:!1,shortcutFaqs:[]},kbEnabled:!1,orgUid:null==x?void 0:x.uid};console.log("robotObject:",t),r(t),p.resetFields()})).catch((function(e){console.log("Form errors:",e)}))};return(0,f.useEffect)((function(){console.log("RobotForm useEffect"),t&&(p.resetFields(),p.setFieldsValue({type:s.f4h}))}),[t,p]),(0,g.jsx)("div",{children:(0,g.jsx)(c.Z,{title:m.formatMessage({id:"pages.robot.new",defaultMessage:"New"}),open:t,forceRender:!0,okText:m.formatMessage({id:"save",defaultMessage:"Save"}),onOk:h,onCancel:function(){p.resetFields(),n()},children:(0,g.jsxs)(a.A,{form:p,name:"basic",style:{maxWidth:400},submitter:!1,children:[(0,g.jsx)(i.Z,{label:m.formatMessage({id:"nickname",defaultMessage:"Nickname"}),name:"nickname",rules:[{required:!0,message:m.formatMessage({id:"nickname",defaultMessage:"Nickname"})}],fieldProps:{onPressEnter:function(){return h()}}}),(0,g.jsx)(u.Z,{label:m.formatMessage({id:"type",defaultMessage:"Type"}),name:["type"],options:[{label:m.formatMessage({id:s.f4h,defaultMessage:"Service"}),value:s.f4h},{label:m.formatMessage({id:s.Qeb,defaultMessage:"Chat"}),value:s.Qeb}],rules:[{required:!0,message:m.formatMessage({id:"choose",defaultMessage:"Choose"})}],fieldProps:{placeholder:m.formatMessage({id:"choose",defaultMessage:"Choose"}),onChange:function(e){console.log("onTreeSelectChange:",e)},allowClear:!0}})]})})})}},27803:function(e,t,n){n.r(t),n.d(t,{default:function(){return Le}});var r=n(93322),o=n(44194),l=n(90819),s=n.n(l),a=n(89933),i=n.n(a),u=n(45332),d=n.n(u),c=n(68100),f=n(68349),g=n(90317),m=n(5780),v=n(96501),p=n(45681),x=n(15722),h=n(82669),b=n(14870),M=n(24522),y=n(62757),C=n(33232),k=n(5025),j=n(34599),w=n(18751),Z=n(5488),F=n(31549),q=function(){var e=(0,M.Z)().isDarkMode,t=(0,b.useIntl)(),n=((0,o.useRef)(!1),(0,w.Z)()),r=n.translateString,l=n.translateStringTranct,a=(0,c.V)((function(e){return{robotResult:e.robotResult,currentRobot:e.currentRobot,insertRobot:e.insertRobot,deleteCurrentRobot:e.deleteCurrentRobot,setRobotResult:e.setRobotResult,setCurrentRobot:e.setCurrentRobot}})),u=a.robotResult,q=a.currentRobot,S=a.insertRobot,T=a.deleteCurrentRobot,R=a.setRobotResult,P=a.setCurrentRobot,U=(0,j.u)((function(e){return e.currentOrg})),A=f.Z.useModal(),V=d()(A,2),E=V[0],L=V[1],O=function(){var e=i()(s()().mark((function e(n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),k.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,C.gf)(n);case 4:r=e.sent,console.log("delete robot response",r),200===r.code?(k.yw.destroy(),k.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),T(n.uid)):(k.yw.destroy(),k.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=i()(s()().mark((function e(){var t,n,r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading("loading"),t={pageNumber:0,pageSize:100,categoryUid:"",level:Z.whQ,type:Z.f4h,orgUid:null==U?void 0:U.uid},e.next=4,(0,C.p0)(t);case 4:n=e.sent,console.log("queryRobotsByOrg: ",n,t),200===n.code?(k.yw.destroy(),R(n),r=q&&n.data.content.some((function(e){return e.uid===q.uid})),q&&r||!(n.data.content.length>0)||P(n.data.content[0])):(k.yw.destroy(),k.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){I()}),[]);var z=(0,o.useState)(!1),N=d()(z,2),W=N[0],B=N[1],Q=function(){var e=i()(s()().mark((function e(n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(t.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=3,(0,C.lg)(n);case 3:r=e.sent,console.log("handleSaveRobot response:",r),200===r.code?(k.yw.destroy(),k.yw.success(t.formatMessage({id:"create.success"})),S(r.data),P(r.data),B(!1)):(k.yw.destroy(),B(!1),k.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return t.formatMessage({id:null==e?void 0:e.type,defaultMessage:null==e?void 0:e.type})};return(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{margin:10},children:(0,F.jsxs)(g.Z,{gap:"small",align:"flex-start",children:[(0,F.jsx)(m.ZP,{size:"small",type:"primary",icon:(0,F.jsx)(h.Z,{}),onClick:function(){B(!0)},children:t.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,F.jsx)(m.ZP,{size:"small",onClick:I,children:t.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,F.jsx)(m.ZP,{onClick:function(){return function(e){E.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,F.jsx)(x.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(r(e.nickname),"】？"),onOk:function(){O(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})}(q)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==q?void 0:q.uid),children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),(0,F.jsx)(v.Z,{itemLayout:"horizontal",dataSource:u.data.content,renderItem:function(t,n){return(0,F.jsx)(v.Z.Item,{style:(null==q?void 0:q.uid)===t.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){P(t)},children:(0,F.jsx)(v.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,F.jsx)(p.Z,{src:t.avatar}),title:(0,F.jsx)(F.Fragment,{children:l(null==t?void 0:t.nickname)}),description:D(t)})})}}),W&&(0,F.jsx)(y.Z,{open:W,onClose:function(){B(!1)},onSubmit:Q}),L]})},S=n(37963),T=n(29787),R=n(73193),P=n.n(R),U=n(92023),A=n(59908),V=n(32394),E=n(48821),L=n(16331),O=n(20903),I=(n(53),function(){var e,t=V.A.useForm(),n=d()(t,1)[0],r=(0,b.useIntl)(),l=(0,w.Z)().translateString,a=(0,c.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),u=a.currentRobot,f=a.setCurrentRobot,g=(0,o.useState)(""),v=d()(g,2),x=v[0],h=v[1],M=(0,o.useState)(l(null==u||null===(e=u.serviceSettings)||void 0===e?void 0:e.welcomeTip)||""),y=d()(M,2),j=y[0],Z=y[1];(0,o.useEffect)((function(){var e;u&&(n.setFieldValue("nickname",l(null==u?void 0:u.nickname)),Z(l(null==u||null===(e=u.serviceSettings)||void 0===e?void 0:e.welcomeTip)),n.setFieldValue("description",l(null==u?void 0:u.description)))}),[u]);var q=function(){var e=i()(s()().mark((function e(t){var n,o,l,a,i,d,c,g;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),k.yw.loading(r.formatMessage({id:"updating"})),c=P()(P()({},u),{},{serviceSettings:P()(P()({},u.serviceSettings),{},{welcomeTip:j,welcomeFaqUids:null==u||null===(n=u.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),quickFaqUids:null==u||null===(o=u.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==u||null===(l=u.serviceSettings)||void 0===l||null===(l=l.faqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==u||null===(a=u.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==u||null===(i=u.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==u||null===(d=u.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),nickname:t.nickname,description:t.description,avatar:x}),console.log("robotObject:",c),e.next=6,(0,C.$l)(c);case 6:g=e.sent,console.log("updateRobot response:",g),200===g.code?(k.yw.success(r.formatMessage({id:"update.success"})),f(g.data)):k.yw.error(g.message),k.yw.destroy();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=i()(s()().mark((function e(t){var n,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),h(t),n=P()(P()({},u),{},{avatar:t}),e.next=5,(0,C.lz)(n);case 5:o=e.sent,console.log("updateAvatar response:",o),200===o.code?(k.yw.success(r.formatMessage({id:"update.success"})),f(o.data)):k.yw.error(o.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){h(null==u?void 0:u.avatar)}),[u]),(0,F.jsxs)(V.A,{form:n,style:{marginLeft:"20px"},onFinish:q,children:[(0,F.jsx)(O.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:null==e?void 0:e.fileList},label:r.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,F.jsxs)(U.G,{onSuccess:S,onError:function(e){console.log("handleUploadError:",e)},children:[(0,F.jsx)(p.Z,{src:x}),(0,F.jsx)(m.ZP,{icon:(0,F.jsx)(A.Z,{}),children:r.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,F.jsx)(E.Z,{width:"md",name:"nickname",label:r.formatMessage({id:"agent.info.nickname"}),rules:[{required:!0,message:r.formatMessage({id:"agent.info.nickname.required"})}]}),(0,F.jsx)(L.Z,{width:"md",name:"description",label:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),rules:[{required:!0,message:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})}]})]})}),z=n(90486),N=n(5321),W=n(5651),B=n(11137),Q=n(47783),D=n(49616),X=function(){var e=(0,b.useIntl)(),t=(0,b.useNavigate)(),n=V.A.useForm(),r=d()(n,1)[0],l=(0,w.Z)().translateString,a=(0,o.useState)(),u=d()(a,2),f=u[0],g=u[1],v=(0,j.u)((function(e){return e.currentOrg})),p=(0,c.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),x=p.currentRobot,h=p.setCurrentRobot,M=function(){var t=i()(s()().mark((function t(){var n,r;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,type:Z.QPQ,orgUid:null==v?void 0:v.uid},t.next=4,(0,z.AP)(n);case 4:r=t.sent,console.log("getKeywordBase response:",n,r),k.yw.destroy(),200===r.code?g(r):k.yw.error(r.message);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){M()}),[]),(0,o.useEffect)((function(){r.setFieldValue("kbUid",null==x?void 0:x.kbUid),r.setFieldValue("kbEnabled",null==x?void 0:x.kbEnabled)}),[x]);var y=function(){var t=i()(s()().mark((function t(n){var r,o,l,a,i,u,d;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onFinish values:",n),u=P()(P()({},x),{},{serviceSettings:P()(P()({},x.serviceSettings),{},{faqUids:null==x||null===(r=x.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==x||null===(o=x.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==x||null===(l=x.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==x||null===(a=x.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(i=x.serviceSettings)||void 0===i||null===(i=i.shortcutFaqs)||void 0===i?void 0:i.map((function(e){return e.uid}))}),kbUid:n.kbUid,kbEnabled:n.kbEnabled}),console.log("robotObject:",u),t.next=5,(0,C.$l)(u);case 5:d=t.sent,console.log("updateRobot response:",d),200===d.code?(k.yw.destroy(),k.yw.success(e.formatMessage({id:"update.success"})),h(d.data)):(k.yw.destroy(),k.yw.error(d.message));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var e=i()(s()().mark((function e(t){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setFieldValue("kbEnabled",t),e.prev=1,e.next=4,r.validateFields();case 4:n=e.sent,y(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("验证失败:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsx)("div",{children:(0,F.jsxs)(V.A,{form:r,onFinish:y,submitter:{render:function(t,n){return(0,F.jsxs)(D.Z,{children:[n,(0,F.jsx)(m.ZP,{color:"danger",variant:"outlined",icon:(0,F.jsx)(N.Z,{}),onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:e.formatMessage({id:"chat.test",defaultMessage:"ChatTest"})})]})}},children:[(0,F.jsx)(B.Z,{name:"kbEnabled",label:e.formatMessage({id:"robot.kb.enable",defaultMessage:"启用大模型知识库"}),tooltip:e.formatMessage({id:"robot.kb.enable.tooltip",defaultMessage:"开启后，机器人将优先使用知识库回答问题"}),fieldProps:{onChange:q}}),(0,F.jsx)(Q.Z,{width:"md",name:"kbUid",label:"大模型知识库",options:null==f?void 0:f.data.content.map((function(e){return{value:e.uid,label:l(e.name),disabled:e.subType!==Z.cmo}})),fieldProps:{onChange:function(e){console.log("kbUid:",e)}}}),(0,F.jsx)(V.A.Item,{children:(0,F.jsx)(m.ZP,{icon:(0,F.jsx)(W.Z,{}),onClick:function(){t("/kb/llm")},children:"添加大模型知识库"},"github")})]})})},K=n(72054),_=n(94146),G=(n(50027),n(10154)),H=n.n(G),$=n(91221),J=n(41282),Y=n(39328),ee=n(17323),te=n(64665),ne=["fieldProps","proFieldProps","min","max","step","marks","vertical","range"],re=o.forwardRef((function(e,t){var n=e.fieldProps,r=e.proFieldProps,o=e.min,l=e.max,s=e.step,a=e.marks,i=e.vertical,u=e.range,d=(0,ee.Z)(e,ne);return(0,F.jsx)(te.Z,(0,Y.Z)({valueType:"slider",fieldProps:(0,Y.Z)((0,Y.Z)({},n),{},{min:o,max:l,step:s,marks:a,vertical:i,range:u,style:null==n?void 0:n.style}),ref:t,proFieldProps:r,filedConfig:{ignoreWidth:!0}},d))})),oe=n(85817),le=n(79401),se=n(52202),ae=n(21463),ie=n(18580),ue=function(){var e,t=(0,b.useIntl)(),n=(0,M.Z)().isDarkMode,r=V.A.useForm(),l=d()(r,1)[0],a=(0,w.Z)().translateString,u=(0,j.u)((function(e){return e.currentOrg})),f=(0,o.useState)([]),g=d()(f,2),v=g[0],p=g[1],x=(0,o.useState)({}),h=d()(x,2),y=h[0],q=h[1],S=(0,o.useState)(!1),T=d()(S,2),R=T[0],U=T[1],A=(0,o.useState)(""),E=d()(A,2),O=E[0],I=E[1],z=(0,o.useState)(""),N=d()(z,2),W=N[0],D=N[1],X=(0,o.useState)(""),K=d()(X,2),_=K[0],G=K[1],Y=(0,o.useState)(""),ee=d()(Y,2),te=(ee[0],ee[1]),ne=(0,o.useState)(""),ue=d()(ne,2),de=(ue[0],ue[1]),ce=(0,o.useState)(!1),fe=d()(ce,2),ge=fe[0],me=fe[1],ve=(0,o.useState)(""),pe=d()(ve,2),xe=(pe[0],pe[1]),he=(0,o.useState)(""),be=d()(he,2),Me=be[0],ye=be[1],Ce=(0,o.useState)(""),ke=d()(Ce,2),je=ke[0],we=ke[1],Ze=(0,o.useState)(""),Fe=d()(Ze,2),qe=Fe[0],Se=Fe[1],Te=(0,o.useState)({}),Re=d()(Te,2),Pe=Re[0],Ue=Re[1],Ae=(0,c.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Ve=Ae.currentRobot,Ee=Ae.setCurrentRobot;(0,o.useEffect)((function(){var e,t,n,r,o,s,i,u,d,c,f,g,m,v,p,x,h,b,M,y,C,k,j;l.setFieldValue("enabled",null==Ve||null===(e=Ve.llm)||void 0===e?void 0:e.enabled),l.setFieldValue("enableThinking",null==Ve||null===(t=Ve.llm)||void 0===t?void 0:t.enableThinking),l.setFieldValue("topK",null==Ve||null===(n=Ve.llm)||void 0===n?void 0:n.topK),l.setFieldValue("scoreThreshold",null==Ve||null===(r=Ve.llm)||void 0===r?void 0:r.scoreThreshold),l.setFieldValue("textProviderUid",null==Ve||null===(o=Ve.llm)||void 0===o?void 0:o.textProviderUid),l.setFieldValue("textModel",null==Ve||null===(s=Ve.llm)||void 0===s?void 0:s.textModel),l.setFieldValue("temperature",null==Ve||null===(i=Ve.llm)||void 0===i?void 0:i.temperature),l.setFieldValue("topP",null==Ve||null===(u=Ve.llm)||void 0===u?void 0:u.topP),l.setFieldValue("prompt",a(null==Ve||null===(d=Ve.llm)||void 0===d?void 0:d.prompt)),l.setFieldValue("defaultReply",null==Ve||null===(c=Ve.llm)||void 0===c?void 0:c.defaultReply),l.setFieldValue("contextMsgCount",null==Ve||null===(f=Ve.llm)||void 0===f?void 0:f.contextMsgCount),l.setFieldValue("rerankEnabled",null==Ve||null===(g=Ve.llm)||void 0===g?void 0:g.rerankEnabled),l.setFieldValue("rerankProvider",null==Ve||null===(m=Ve.llm)||void 0===m?void 0:m.rerankProvider),l.setFieldValue("rerankProviderUid",null==Ve||null===(v=Ve.llm)||void 0===v?void 0:v.rerankProviderUid),l.setFieldValue("rerankModel",null==Ve||null===(p=Ve.llm)||void 0===p?void 0:p.rerankModel),l.setFieldValue("searchType",(null==Ve||null===(x=Ve.llm)||void 0===x?void 0:x.searchType)||"MIXED");var w=(null==Ve||null===(h=Ve.llm)||void 0===h?void 0:h.textProviderUid)||"",Z=(null==Ve||null===(b=Ve.llm)||void 0===b?void 0:b.textModel)||"";te((null==Ve||null===(M=Ve.llm)||void 0===M?void 0:M.rerankProvider)||""),de((null==Ve||null===(y=Ve.llm)||void 0===y?void 0:y.rerankModel)||""),I(w),D(Z);var F=(null==Ve||null===(C=Ve.llm)||void 0===C?void 0:C.rerankProvider)||"",q=(null==Ve||null===(k=Ve.llm)||void 0===k?void 0:k.rerankProviderUid)||"",S=(null==Ve||null===(j=Ve.llm)||void 0===j?void 0:j.rerankModel)||"";xe(F),ye(q),we(S),Z&&!_&&G(Z)}),[Ve]),(0,o.useEffect)((function(){var e=O,t=W;if(e&&t&&y[e]){var n=y[e].find((function(e){return e.value===t}));n&&G(n.label)}}),[y,O,W]),(0,o.useEffect)((function(){var e=Me,t=je;if(e&&t&&Pe[e]){var n=Pe[e].find((function(e){return e.value===t}));n&&Se(n.label)}}),[Pe,Me,je]);var Le=function(){var e=i()(s()().mark((function e(){var t,n,r,o,l,a,i;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={pageNumber:0,pageSize:100,sortBy:"createdAt",sortDirection:"ascend",enabled:!0,orgUid:null==u?void 0:u.uid,level:Z.whQ},e.next=4,(0,$.mK)(t);case 4:n=e.sent,console.log("queryLlmProvidersByOrg:",n,t),200===n.code?(o=n.data.content||[],l=o.filter((function(e){return!Z.juN.includes(e.type)})),p(l),(a=null==Ve||null===(r=Ve.llm)||void 0===r?void 0:r.textProviderUid)&&(i=l.find((function(e){return e.uid===a})))&&(i.type===Z.CZ7?Ke(i):Ge(i))):k.yw.error(n.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch providers:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){Le()}),[]);var Oe=(0,o.useCallback)((function(){U(!0)}),[]),Ie=(0,o.useCallback)((function(){U(!1)}),[]),ze=(0,o.useCallback)((function(e,t,n){U(!1);var r=v.find((function(t){return t.uid===e})),o=r?r.type:e;I(e),D(t),G(n),l.setFieldsValue({textProvider:o,textProviderUid:e,textModel:t}),l.submit()}),[l,v]),Ne=((0,o.useCallback)((function(){me(!0)}),[]),(0,o.useCallback)((function(){me(!1)}),[])),We=(0,o.useCallback)((function(e,t,n){me(!1);var r=v.find((function(t){return t.uid===e})),o=r?r.type:e;xe(o),ye(e),we(t),Se(n),l.setFieldsValue({rerankProvider:o,rerankProviderUid:e,rerankModel:t}),l.submit()}),[l,v]),Be=(0,o.useCallback)((function(e,t){q((function(n){return P()(P()({},n),{},H()({},e,t))}))}),[]),Qe=(0,o.useCallback)((function(e,t){Ue((function(n){return P()(P()({},n),{},H()({},e,t))}))}),[]),De=function(){var e=i()(s()().mark((function e(n){var r,o,l,a,i,u,d,c;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(t.formatMessage({id:"updating"})),d=P()(P()({},Ve),{},{serviceSettings:P()(P()({},Ve.serviceSettings),{},{welcomeFaqUids:null==Ve||null===(r=Ve.serviceSettings)||void 0===r||null===(r=r.welcomeFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null===(o=Ve.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==Ve||null===(l=Ve.serviceSettings)||void 0===l||null===(l=l.quickFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==Ve||null===(a=Ve.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==Ve||null===(i=Ve.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==Ve||null===(u=Ve.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),llm:P()(P()({},Ve.llm),{},{enabled:n.enabled,enableThinking:n.enableThinking,topK:n.topK,scoreThreshold:n.scoreThreshold,textProvider:n.textProvider,textProviderUid:n.textProviderUid,textModel:n.textModel,temperature:n.temperature,topP:n.topP,prompt:n.prompt,defaultReply:n.defaultReply,contextMsgCount:n.contextMsgCount,rerankEnabled:n.rerankEnabled,rerankProvider:n.rerankProvider,rerankProviderUid:n.rerankProviderUid,rerankModel:n.rerankModel,searchType:n.searchType})}),e.next=4,(0,C.$l)(d);case 4:200===(c=e.sent).code?(k.yw.destroy(),k.yw.success(t.formatMessage({id:"update.success"})),Ee(c.data)):(k.yw.destroy(),k.yw.error(c.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=(0,o.useCallback)((function(e,n){return[(0,F.jsx)(m.ZP,{type:"default",onClick:function(){var t;null===(t=e.form)||void 0===t||t.resetFields()},children:t.formatMessage({id:"llm.reset"})},"reset"),(0,F.jsx)(m.ZP,{type:"primary",onClick:function(){var t;null===(t=e.form)||void 0===t||t.submit()},children:t.formatMessage({id:"llm.save"})},"submit")]}),[t]),Ke=function(){var e=i()(s()().mark((function e(n){var r,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={baseUrl:n.baseUrl},e.next=4,(0,se.VM)(r);case 4:o=e.sent,console.log("getOllamaServerStatus: ",o),200===o.code&&o.data?_e(n):k.yw.error(o.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to check Ollama status:",e.t0),k.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=i()(s()().mark((function e(n){var r,o,l,a;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={baseUrl:n.baseUrl},e.next=4,(0,se.c8)(r);case 4:o=e.sent,console.log("getOllamaLocalModels: ",o),200===o.code?(l=o.data.map((function(e){return{value:e.name,label:e.name,providerName:n.uid}})),q((function(e){return P()(P()({},e),{},H()({},n.uid,l))})),O===n.uid&&W&&(a=l.find((function(e){return e.value===W})))&&G(a.label)):k.yw.error(o.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch local models:",e.t0),k.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=i()(s()().mark((function e(n){var r,o,a,i;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={pageNumber:0,pageSize:50,providerUid:null==n?void 0:n.uid,orgUid:null==u?void 0:u.uid,level:Z.whQ},e.next=4,(0,J.LF)(r);case 4:o=e.sent,console.log("queryLlmModelsByOrg: ",o,r),200===o.code?(a=o.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,providerName:n.nickname}})),q((function(e){return P()(P()({},e),{},H()({},n.uid,a))})),n.uid===l.getFieldValue("textProviderUid")&&W&&(i=a.find((function(e){return e.value===W})))&&G(i.label)):k.yw.error(o.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch models:",e.t0),k.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(V.A,{form:l,size:"large",layout:"vertical",style:{maxWidth:"800px"},submitter:{render:Xe,submitButtonProps:{size:"large",htmlType:"button"}},onFinish:De,children:[(0,ie.OJ)()&&(0,F.jsx)(Q.Z,{width:"lg",name:"searchType",label:t.formatMessage({id:"llm.searchType.label"}),tooltip:t.formatMessage({id:"llm.searchType.tooltip"}),options:[{label:t.formatMessage({id:"llm.searchType.fulltext"}),value:Z.ccx},{label:t.formatMessage({id:"llm.searchType.vector"}),value:Z.DGp},{label:t.formatMessage({id:"llm.searchType.mixed"}),value:Z.rk3}],rules:[{required:!0,message:t.formatMessage({id:"llm.searchType.required"})}],fieldProps:{popupRender:function(e){return(0,F.jsxs)("div",{children:[e,(0,F.jsxs)("div",{style:{padding:"8px 12px"},children:[(0,F.jsx)("div",{style:{borderTop:"1px solid #e8e8e8",margin:"4px 0"}}),(0,F.jsxs)("div",{style:{padding:"8px 0",fontSize:"12px",color:n?"rgba(255, 255, 255, 0.7)":"rgba(0,0,0,0.45)"},children:[(0,F.jsxs)("strong",{children:[t.formatMessage({id:"llm.searchType.fulltext"}),"："]}),t.formatMessage({id:"llm.searchType.fulltext.description"}),(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsxs)("strong",{children:[t.formatMessage({id:"llm.searchType.vector"}),"："]}),t.formatMessage({id:"llm.searchType.vector.description"}),(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsxs)("strong",{children:[t.formatMessage({id:"llm.searchType.mixed"}),"："]}),t.formatMessage({id:"llm.searchType.mixed.description"})]})]})]})}}}),!1,(0,F.jsx)(B.Z,{width:"lg",name:"enabled",label:t.formatMessage({id:"llm.enabled.label"}),tooltip:t.formatMessage({id:"llm.enabled.tooltip"}),fieldProps:{onChange:function(e){setTimeout((function(){l.submit()}),100)}}}),l.getFieldValue("enabled")&&(0,F.jsxs)(F.Fragment,{children:[!1,(0,F.jsx)(L.Z,{width:"lg",name:"prompt",label:t.formatMessage({id:"llm.prompt.label"}),tooltip:t.formatMessage({id:"llm.prompt.tooltip"}),placeholder:t.formatMessage({id:"llm.prompt.placeholder"}),fieldProps:{rows:13,maxLength:16383,showCount:!0},rules:[{required:!0,message:t.formatMessage({id:"llm.prompt.required"})},{max:16383,message:t.formatMessage({id:"llm.prompt.maxLength"})}]}),(0,F.jsx)(L.Z,{width:"lg",name:"defaultReply",label:t.formatMessage({id:"llm.defaultReply.label"}),tooltip:t.formatMessage({id:"llm.defaultReply.tooltip"}),placeholder:t.formatMessage({id:"llm.defaultReply.placeholder"}),fieldProps:{rows:1,maxLength:100,showCount:!0},rules:[{required:!0,message:t.formatMessage({id:"llm.defaultReply.required"})},{max:100,message:t.formatMessage({id:"llm.defaultReply.maxLength"})}]}),(0,F.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,F.jsx)(oe.Z.Text,{strong:!0,style:{marginRight:"8px"},children:t.formatMessage({id:"llm.modelSelection.label"})}),(0,F.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:"8px"},children:(0,F.jsx)(le.Z,{size:"small",style:{width:"100%",maxWidth:"500px",cursor:"pointer",border:"1px solid #d9d9d9"},onClick:Oe,children:O&&W?(0,F.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(oe.Z.Text,{type:"secondary",children:t.formatMessage({id:"llm.modelSelection.provider"})}),(0,F.jsx)(oe.Z.Text,{strong:!0,children:a((null===(e=v.find((function(e){return e.uid===O})))||void 0===e?void 0:e.nickname)||O)}),(0,F.jsx)("br",{}),(0,F.jsx)(oe.Z.Text,{type:"secondary",children:t.formatMessage({id:"llm.modelSelection.model"})}),(0,F.jsx)(oe.Z.Text,{strong:!0,children:_||W})]}),(0,F.jsx)(m.ZP,{type:"primary",children:t.formatMessage({id:"llm.modelSelection.change"})})]}):(0,F.jsx)("div",{style:{textAlign:"center"},children:(0,F.jsx)(m.ZP,{type:"primary",children:t.formatMessage({id:"llm.modelSelection.select"})})})})}),(0,F.jsxs)("div",{style:{display:"none"},children:[(0,F.jsx)(Q.Z,{name:"textProvider",width:"lg"}),(0,F.jsx)(Q.Z,{name:"textProviderUid",width:"lg"}),(0,F.jsx)(Q.Z,{name:"textModel",width:"lg"})]})]}),(0,F.jsxs)("div",{style:{width:"500px"},children:[(0,F.jsx)(re,{width:"md",label:t.formatMessage({id:"llm.temperature.label"}),name:"temperature",min:0,max:1,step:.1,marks:{0:t.formatMessage({id:"llm.temperature.precise"}),.5:t.formatMessage({id:"llm.temperature.balanced"}),1:t.formatMessage({id:"llm.temperature.creative"})},tooltip:t.formatMessage({id:"llm.temperature.tooltip"}),rules:[{required:!0,message:t.formatMessage({id:"llm.temperature.required"})}]}),(0,F.jsx)(re,{width:"md",label:t.formatMessage({id:"llm.topP.label"}),name:"topP",min:0,max:1,step:.05,marks:{0:t.formatMessage({id:"llm.topP.low"}),.5:t.formatMessage({id:"llm.topP.medium"}),1:t.formatMessage({id:"llm.topP.high"})},tooltip:t.formatMessage({id:"llm.topP.tooltip"})}),(0,F.jsx)(re,{width:"md",label:t.formatMessage({id:"llm.contextMsgCount.label"}),name:"contextMsgCount",min:0,max:50,step:1,marks:{0:"0",5:"5",10:"10",15:"15",20:"20",25:"25",30:"30",35:"35",40:"40",45:"45",50:"50"},tooltip:t.formatMessage({id:"llm.contextMsgCount.tooltip"}),rules:[{required:!0,message:t.formatMessage({id:"llm.contextMsgCount.required"})}]})]})]})]}),(0,F.jsx)(ae.Z,{visible:R,onCancel:Ie,onOk:ze,initialProvider:O,initialModel:W,initialModelLabel:_,providers:v,currentOrgUid:null==u?void 0:u.uid,existingProviderModels:y,onModelsLoaded:Be,allowedModelTypes:[Z.l55,"CHAT"]}),(0,F.jsx)(ae.Z,{visible:ge,onCancel:Ne,onOk:We,initialProvider:Me,initialModel:je,initialModelLabel:qe,providers:v,currentOrgUid:null==u?void 0:u.uid,existingProviderModels:Pe,onModelsLoaded:Qe,allowedModelTypes:[Z.SeQ]})]})},de=(n(74790),n(59956)),ce=n(3642),fe=n(67072),ge=n(10826),me=(n(39120),n(54822),function(){var e=(0,b.useIntl)(),t=(0,o.useMemo)((function(){return[{key:"kb",label:(0,F.jsx)(b.FormattedMessage,{id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,F.jsx)(X,{})},{key:"faq",label:(0,F.jsx)(b.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,F.jsx)(K.Z,{type:Z._X4})},{key:"quickFaqs",label:(0,F.jsx)(b.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"Quick Button"}),children:(0,F.jsx)(_.Z,{type:Z._X4})},{key:"llm",label:(0,F.jsx)(b.FormattedMessage,{id:"llm",defaultMessage:"LLM"}),children:(0,F.jsx)(ue,{})},{key:"rate",label:(0,F.jsx)(b.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,F.jsx)(ge.Z,{type:Z._X4})},{key:"right",label:(0,F.jsx)(b.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,F.jsx)(ce.Z,{type:Z._X4})},{key:"popup",label:(0,F.jsx)(b.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,F.jsx)(de.Z,{type:Z._X4})},{key:"trigger",label:(0,F.jsx)(b.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,F.jsx)(fe.Z,{type:Z._X4})}]}),[e]);return(0,F.jsx)(S.Z,{tabPosition:"left",items:t})}),ve=n(1155),pe=n(92634),xe=n(27473),he=n(53504),be=n(78875),Me=n(20228),ye=n(65532),Ce=n(82373),ke=n(80556),je=n(40074),we=n(58791),Ze=n(61353),Fe=n(16852),qe=n(40439),Se=n(86994),Te=n(58087),Re=n(75831),Pe=function(){var e=(0,b.useIntl)(),t=(0,o.useContext)(Re.I).isDarkMode,n=(0,c.V)((function(e){return e.currentRobot})),r=(0,j.u)((function(e){return e.currentOrg})),l=(0,o.useState)(!1),a=d()(l,2),u=a[0],f=a[1],g=(0,o.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),v=d()(g,2),p=v[0],x=v[1],h=function(){var t=i()(s()().mark((function t(){var o,l,a,i,u,d,c,g,m,v,p,h,b;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),f(!0),k.yw.info(e.formatMessage({id:"refresh",defaultMessage:"正在刷新队列数据..."})),t.prev=3,o={pageNumber:0,pageSize:100,agentUid:null==n?void 0:n.uid,orgUid:null==r?void 0:r.uid},t.next=7,(0,pe.Wq)(o);case 7:l=t.sent,console.log("queryQueuesByOrg response:",l.data),200===(null==l?void 0:l.code)?(k.yw.destroy(),null!=l&&null!==(a=l.data)&&void 0!==a&&a.content&&l.data.content.length>0?(b=l.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),x({totalCount:null!==(i=b.totalCount)&&void 0!==i?i:0,queuingCount:null!==(u=b.queuingCount)&&void 0!==u?u:0,chattingCount:null!==(d=b.chattingCount)&&void 0!==d?d:0,offlineCount:null!==(c=b.offlineCount)&&void 0!==c?c:0,closedCount:null!==(g=b.closedCount)&&void 0!==g?g:0,leaveMsgCount:null!==(m=b.leaveMsgCount)&&void 0!==m?m:0,robotToAgentCount:null!==(v=b.robotToAgentCount)&&void 0!==v?v:0,avgWaitTime:null!==(p=b.avgWaitTime)&&void 0!==p?p:0,avgResolveTime:null!==(h=b.avgResolveTime)&&void 0!==h?h:0})):x({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):k.yw.error(null==l?void 0:l.message);case 10:return t.prev=10,f(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){h()}),[n]);var M={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},y={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,F.jsxs)("div",{style:{padding:"4px"},children:[(0,F.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"刷新数据"}),children:(0,F.jsx)(m.ZP,{type:"primary",icon:(0,F.jsx)(ke.Z,{}),loading:u,onClick:h,size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})})})}),(0,F.jsxs)(he.Z,{spinning:u,children:[(0,F.jsxs)(be.Z,{gutter:[16,16],children:[(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.totalCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"总会话"}),value:p.totalCount,prefix:(0,F.jsx)(je.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.queuingCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"排队中"}),value:p.queuingCount,prefix:(0,F.jsx)(we.Z,{}),valueStyle:{color:"#fa8c16"}})})}),(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.chattingCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"会话中"}),value:p.chattingCount,prefix:(0,F.jsx)(Ze.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.offlineCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"离线留言"}),value:p.offlineCount,prefix:(0,F.jsx)(Fe.Z,{}),valueStyle:{color:"#8c8c8c"}})})}),(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.closedCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"已关闭"}),value:p.closedCount,prefix:(0,F.jsx)(qe.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.leaveMsgCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"留言数"}),value:p.leaveMsgCount,prefix:(0,F.jsx)(Se.Z,{}),valueStyle:{color:y.leaveMsgCount.valueColor}})})})]}),(0,F.jsx)(Ce.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"更多统计"})}),(0,F.jsx)(be.Z,{gutter:[16,16],children:(0,F.jsx)(Me.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(le.Z,{style:P()(P()({},M),{},{backgroundColor:y.robotToAgentCount.bg}),hoverable:!0,children:(0,F.jsx)(ye.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"转人工数"}),value:p.robotToAgentCount,prefix:(0,F.jsx)(Te.Z,{}),valueStyle:{color:y.robotToAgentCount.valueColor}})})})})]})]})},Ue=function(){var e=(0,b.useIntl)(),t=(0,o.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,F.jsx)(I,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,F.jsx)(ve.Z,{type:Z._X4})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,F.jsx)(me,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,F.jsx)(Pe,{}),disabled:!(0,ie.OJ)()},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,F.jsx)(T.Z,{type:Z._X4})}]}),[e]);return(0,F.jsx)(S.Z,{defaultActiveKey:"basic",items:t})},Ae=n(74424),Ve=r.Z.Sider,Ee=r.Z.Content,Le=function(){var e=(0,Ae.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,o=e.contentStyle;return(0,F.jsxs)(r.Z,{children:[(0,F.jsx)(Ve,{width:n,style:t,children:(0,F.jsx)(q,{})}),(0,F.jsx)(r.Z,{children:(0,F.jsx)(Ee,{style:o,children:(0,F.jsx)(Ue,{})})})]})}}}]);