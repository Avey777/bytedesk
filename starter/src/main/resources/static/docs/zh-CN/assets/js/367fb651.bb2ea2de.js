"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1181],{6708:(e,n,l)=>{l.d(n,{A:()=>s});const s=l.p+"assets/images/k8s_docker_settings-9edf979fd456559740daf4503b9ec6fc.png"},19971:(e,n,l)=>{l.d(n,{R:()=>c,x:()=>i});var s=l(30758);const d={},t=s.createContext(d);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),s.createElement(t.Provider,{value:n},e.children)}},24505:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"deploy/depend/kubernetes","title":"Kubernetes","description":"\u4ee5\u4e0b\u8bf4\u660e\u4ec5\u4f9b\u53c2\u8003\uff0c\u5177\u4f53\u914d\u7f6e\u548c\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 Kubernetes \u5b98\u65b9\u6587\u6863\u3002Kubernetes\uff08K8s\uff09\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5bb9\u5668\u7f16\u6392\u5e73\u53f0\uff0c\u7528\u4e8e\u81ea\u52a8\u5316\u90e8\u7f72\u3001\u6269\u5c55\u548c\u7ba1\u7406\u5bb9\u5668\u5316\u5e94\u7528\u7a0b\u5e8f\u3002\u5b83\u63d0\u4f9b\u4e86\u5bb9\u5668\u7f16\u6392\u3001\u81ea\u52a8\u90e8\u7f72\u3001\u81ea\u52a8\u6269\u5c55\u3001\u8d1f\u8f7d\u5747\u8861\u7b49\u529f\u80fd\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/deploy/depend/kubernetes.md","sourceDirName":"deploy/depend","slug":"/deploy/depend/kubernetes","permalink":"/docs/zh-CN/docs/deploy/depend/kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/bytedesk/bytedesk-docs/blob/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/deploy/depend/kubernetes.md","tags":[],"version":"current","lastUpdatedBy":"jack ning","lastUpdatedAt":1754546813000,"sidebarPosition":10,"frontMatter":{"sidebar_label":"Kubernetes","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"JDK17","permalink":"/docs/zh-CN/docs/deploy/depend/jdk"},"next":{"title":"Letsencrypt","permalink":"/docs/zh-CN/docs/deploy/depend/letsencrypt"}}');var d=l(86070),t=l(19971);const c={sidebar_label:"Kubernetes",sidebar_position:10},i="Kubernetes",r={},a=[{value:"\u7cfb\u7edf\u8981\u6c42",id:"\u7cfb\u7edf\u8981\u6c42",level:2},{value:"\u6700\u4f4e\u914d\u7f6e",id:"\u6700\u4f4e\u914d\u7f6e",level:3},{value:"\u63a8\u8350\u914d\u7f6e",id:"\u63a8\u8350\u914d\u7f6e",level:3},{value:"\u5b89\u88c5\u65b9\u5f0f",id:"\u5b89\u88c5\u65b9\u5f0f",level:2},{value:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528kubeadm\uff08\u63a8\u8350\uff09",id:"\u65b9\u5f0f\u4e00\u4f7f\u7528kubeadm\u63a8\u8350",level:3},{value:"\u6b65\u9aa41\uff1a\u51c6\u5907\u73af\u5883",id:"\u6b65\u9aa41\u51c6\u5907\u73af\u5883",level:4},{value:"\u6b65\u9aa42\uff1a\u5b89\u88c5Docker",id:"\u6b65\u9aa42\u5b89\u88c5docker",level:4},{value:"\u6b65\u9aa43\uff1a\u5b89\u88c5kubeadm\u3001kubelet\u548ckubectl",id:"\u6b65\u9aa43\u5b89\u88c5kubeadmkubelet\u548ckubectl",level:4},{value:"\u6b65\u9aa44\uff1a\u521d\u59cb\u5316\u4e3b\u8282\u70b9",id:"\u6b65\u9aa44\u521d\u59cb\u5316\u4e3b\u8282\u70b9",level:4},{value:"\u6b65\u9aa45\uff1a\u6dfb\u52a0\u5de5\u4f5c\u8282\u70b9",id:"\u6b65\u9aa45\u6dfb\u52a0\u5de5\u4f5c\u8282\u70b9",level:4},{value:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528kind\uff08\u672c\u5730\u5f00\u53d1\uff09",id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528kind\u672c\u5730\u5f00\u53d1",level:3},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:2},{value:"\u96c6\u7fa4\u7ba1\u7406",id:"\u96c6\u7fa4\u7ba1\u7406",level:3},{value:"\u547d\u540d\u7a7a\u95f4\u64cd\u4f5c",id:"\u547d\u540d\u7a7a\u95f4\u64cd\u4f5c",level:3},{value:"Pod\u64cd\u4f5c",id:"pod\u64cd\u4f5c",level:3},{value:"Deployment\u64cd\u4f5c",id:"deployment\u64cd\u4f5c",level:3},{value:"Service\u64cd\u4f5c",id:"service\u64cd\u4f5c",level:3},{value:"ConfigMap\u548cSecret",id:"configmap\u548csecret",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4",level:2},{value:"\u8d44\u6e90\u67e5\u770b",id:"\u8d44\u6e90\u67e5\u770b",level:3},{value:"\u8d44\u6e90\u7ba1\u7406",id:"\u8d44\u6e90\u7ba1\u7406",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:3},{value:"\u7aef\u53e3\u8f6c\u53d1",id:"\u7aef\u53e3\u8f6c\u53d1",level:3},{value:"\u6807\u7b7e\u548c\u6ce8\u89e3",id:"\u6807\u7b7e\u548c\u6ce8\u89e3",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"1. Pod\u4e00\u76f4\u5904\u4e8ePending\u72b6\u6001",id:"1-pod\u4e00\u76f4\u5904\u4e8epending\u72b6\u6001",level:3},{value:"2. Pod\u65e0\u6cd5\u542f\u52a8",id:"2-pod\u65e0\u6cd5\u542f\u52a8",level:3},{value:"3. \u670d\u52a1\u65e0\u6cd5\u8bbf\u95ee",id:"3-\u670d\u52a1\u65e0\u6cd5\u8bbf\u95ee",level:3},{value:"4. \u8282\u70b9\u4e0d\u53ef\u7528",id:"4-\u8282\u70b9\u4e0d\u53ef\u7528",level:3},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"kubernetes",children:"Kubernetes"})}),"\n",(0,d.jsx)(n.admonition,{title:"\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u8bf4\u660e",type:"info",children:(0,d.jsxs)(n.p,{children:["\u4ee5\u4e0b\u8bf4\u660e\u4ec5\u4f9b\u53c2\u8003\uff0c\u5177\u4f53\u914d\u7f6e\u548c\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 ",(0,d.jsx)(n.a,{href:"https://kubernetes.io/docs/home/",children:"Kubernetes \u5b98\u65b9\u6587\u6863"}),"\u3002Kubernetes\uff08K8s\uff09\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5bb9\u5668\u7f16\u6392\u5e73\u53f0\uff0c\u7528\u4e8e\u81ea\u52a8\u5316\u90e8\u7f72\u3001\u6269\u5c55\u548c\u7ba1\u7406\u5bb9\u5668\u5316\u5e94\u7528\u7a0b\u5e8f\u3002\u5b83\u63d0\u4f9b\u4e86\u5bb9\u5668\u7f16\u6392\u3001\u81ea\u52a8\u90e8\u7f72\u3001\u81ea\u52a8\u6269\u5c55\u3001\u8d1f\u8f7d\u5747\u8861\u7b49\u529f\u80fd\u3002"]})}),"\n",(0,d.jsx)(n.h2,{id:"\u7cfb\u7edf\u8981\u6c42",children:"\u7cfb\u7edf\u8981\u6c42"}),"\n",(0,d.jsx)(n.h3,{id:"\u6700\u4f4e\u914d\u7f6e",children:"\u6700\u4f4e\u914d\u7f6e"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u64cd\u4f5c\u7cfb\u7edf"}),"\uff1aUbuntu 20.04+ / CentOS 7+ / RHEL 7+"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"CPU"}),"\uff1a2\u6838\u5fc3\u4ee5\u4e0a"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5185\u5b58"}),"\uff1a2GB\u4ee5\u4e0a"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u78c1\u76d8"}),"\uff1a20GB\u4ee5\u4e0a\u53ef\u7528\u7a7a\u95f4"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u7f51\u7edc"}),"\uff1a\u6bcf\u4e2a\u8282\u70b9\u552f\u4e00\u7684\u4e3b\u673a\u540d\u3001MAC\u5730\u5740\u548cproduct_uuid"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u63a8\u8350\u914d\u7f6e",children:"\u63a8\u8350\u914d\u7f6e"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u64cd\u4f5c\u7cfb\u7edf"}),"\uff1aUbuntu 22.04 LTS"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"CPU"}),"\uff1a4\u6838\u5fc3\u4ee5\u4e0a"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5185\u5b58"}),"\uff1a8GB\u4ee5\u4e0a"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u78c1\u76d8"}),"\uff1a50GB\u4ee5\u4e0aSSD"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u7f51\u7edc"}),"\uff1a\u5343\u5146\u7f51\u7edc\u8fde\u63a5"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u5b89\u88c5\u65b9\u5f0f",children:"\u5b89\u88c5\u65b9\u5f0f"}),"\n",(0,d.jsx)(n.h3,{id:"\u65b9\u5f0f\u4e00\u4f7f\u7528kubeadm\u63a8\u8350",children:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528kubeadm\uff08\u63a8\u8350\uff09"}),"\n",(0,d.jsx)(n.p,{children:"kubeadm\u662fKubernetes\u5b98\u65b9\u63a8\u8350\u7684\u96c6\u7fa4\u90e8\u7f72\u5de5\u5177\uff0c\u9002\u5408\u751f\u4ea7\u73af\u5883\u3002"}),"\n",(0,d.jsx)(n.h4,{id:"\u6b65\u9aa41\u51c6\u5907\u73af\u5883",children:"\u6b65\u9aa41\uff1a\u51c6\u5907\u73af\u5883"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u66f4\u65b0\u7cfb\u7edf\nsudo apt update && sudo apt upgrade -y\n\n# \u5173\u95edswap\nsudo swapoff -a\nsudo sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n# \u52a0\u8f7d\u5fc5\u8981\u7684\u5185\u6838\u6a21\u5757\ncat <<EOF | sudo tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\n# \u8bbe\u7f6e\u7f51\u7edc\u53c2\u6570\ncat <<EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n\nsudo sysctl --system\n"})}),"\n",(0,d.jsx)(n.h4,{id:"\u6b65\u9aa42\u5b89\u88c5docker",children:"\u6b65\u9aa42\uff1a\u5b89\u88c5Docker"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"/docs/zh-CN/docs/deploy/depend/docker",children:"\u5b89\u88c5Docker"})}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u6b65\u9aa43\u5b89\u88c5kubeadmkubelet\u548ckubectl",children:"\u6b65\u9aa43\uff1a\u5b89\u88c5kubeadm\u3001kubelet\u548ckubectl"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# \u6dfb\u52a0Kubernetes\u6e90\nsudo apt install -y apt-transport-https ca-certificates curl\n\ncurl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-archive-keyring.gpg\n\necho "deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list\n\nsudo apt update\n\n# \u5b89\u88c5\u6307\u5b9a\u7248\u672c\uff08\u63a8\u8350\u4f7f\u7528\u7a33\u5b9a\u7248\u672c\uff09\nsudo apt install -y kubelet=1.28.0-00 kubeadm=1.28.0-00 kubectl=1.28.0-00\n\n# \u9501\u5b9a\u7248\u672c\uff0c\u9632\u6b62\u81ea\u52a8\u5347\u7ea7\nsudo apt-mark hold kubelet kubeadm kubectl\n'})}),"\n",(0,d.jsx)(n.h4,{id:"\u6b65\u9aa44\u521d\u59cb\u5316\u4e3b\u8282\u70b9",children:"\u6b65\u9aa44\uff1a\u521d\u59cb\u5316\u4e3b\u8282\u70b9"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u521d\u59cb\u5316\u96c6\u7fa4\nsudo kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address=<\u4e3b\u8282\u70b9IP>\n\n# \u914d\u7f6ekubectl\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n# \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\uff08Flannel\uff09\nkubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml\n"})}),"\n",(0,d.jsx)(n.h4,{id:"\u6b65\u9aa45\u6dfb\u52a0\u5de5\u4f5c\u8282\u70b9",children:"\u6b65\u9aa45\uff1a\u6dfb\u52a0\u5de5\u4f5c\u8282\u70b9"}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u4e3b\u8282\u70b9\u4e0a\u83b7\u53d6\u52a0\u5165\u547d\u4ee4\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u83b7\u53d6\u52a0\u5165\u547d\u4ee4\nkubeadm token create --print-join-command\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u6267\u884c\u52a0\u5165\u547d\u4ee4\uff08\u66ff\u6362\u4e3a\u5b9e\u9645\u7684\u547d\u4ee4\uff09\nsudo kubeadm join <\u4e3b\u8282\u70b9IP>:6443 --token <token> --discovery-token-ca-cert-hash sha256:<hash>\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528kind\u672c\u5730\u5f00\u53d1",children:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528kind\uff08\u672c\u5730\u5f00\u53d1\uff09"}),"\n",(0,d.jsx)(n.p,{children:"kind\uff08Kubernetes IN Docker\uff09\u9002\u5408\u672c\u5730\u5f00\u53d1\u548cCI/CD\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u5728 Docker Desktop \u53f3\u4e0a\u89d2 Settings \u4e2d\u542f\u7528 Kubernetes\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{alt:"k8s_docker_settings",src:l(6708).A+"",width:"3248",height:"1616"})}),"\n",(0,d.jsx)(n.p,{children:"\u6a21\u62df\u96c6\u7fa4\u73af\u5883\uff0c\u8bbe\u7f6e2\u4e2a\u8282\u70b9\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2Apply\uff0c\u7b49\u5f85 Kubernetes Running \u56fe\u6807\u53d8\u4e3a\u7eff\u8272\uff0c\u8868\u793a\u96c6\u7fa4\u5df2\u542f\u52a8\u3002"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{alt:"k8s_docker_kind_2",src:l(47374).A+"",width:"3248",height:"1616"})}),"\n",(0,d.jsx)(n.h2,{id:"\u57fa\u672c\u64cd\u4f5c",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.h3,{id:"\u96c6\u7fa4\u7ba1\u7406",children:"\u96c6\u7fa4\u7ba1\u7406"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u96c6\u7fa4\u4fe1\u606f\nkubectl cluster-info\n\n# \u67e5\u770b\u8282\u70b9\nkubectl get nodes\n\n# \u67e5\u770b\u547d\u540d\u7a7a\u95f4\nkubectl get namespaces\n\n# \u67e5\u770b\u6240\u6709\u8d44\u6e90\nkubectl get all --all-namespaces\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u547d\u540d\u7a7a\u95f4\u64cd\u4f5c",children:"\u547d\u540d\u7a7a\u95f4\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u547d\u540d\u7a7a\u95f4\nkubectl create namespace my-namespace\n\n# \u5207\u6362\u5230\u547d\u540d\u7a7a\u95f4\nkubectl config set-context --current --namespace=my-namespace\n\n# \u67e5\u770b\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u8d44\u6e90\nkubectl get all -n my-namespace\n\n# \u5220\u9664\u547d\u540d\u7a7a\u95f4\nkubectl delete namespace my-namespace\n"})}),"\n",(0,d.jsx)(n.h3,{id:"pod\u64cd\u4f5c",children:"Pod\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efaPod\nkubectl run nginx --image=nginx\n\n# \u67e5\u770bPod\nkubectl get pods\nkubectl get pods -o wide\n\n# \u67e5\u770bPod\u8be6\u7ec6\u4fe1\u606f\nkubectl describe pod <pod-name>\n\n# \u67e5\u770bPod\u65e5\u5fd7\nkubectl logs <pod-name>\nkubectl logs -f <pod-name>  # \u5b9e\u65f6\u67e5\u770b\u65e5\u5fd7\n\n# \u8fdb\u5165Pod\nkubectl exec -it <pod-name> -- /bin/bash\n\n# \u5220\u9664Pod\nkubectl delete pod <pod-name>\n"})}),"\n",(0,d.jsx)(n.h3,{id:"deployment\u64cd\u4f5c",children:"Deployment\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efaDeployment\nkubectl create deployment nginx --image=nginx\n\n# \u67e5\u770bDeployment\nkubectl get deployments\n\n# \u6269\u5c55Deployment\nkubectl scale deployment nginx --replicas=3\n\n# \u66f4\u65b0\u955c\u50cf\nkubectl set image deployment/nginx nginx=nginx:1.19\n\n# \u67e5\u770b\u6eda\u52a8\u66f4\u65b0\u72b6\u6001\nkubectl rollout status deployment/nginx\n\n# \u56de\u6edaDeployment\nkubectl rollout undo deployment/nginx\n\n# \u67e5\u770b\u5386\u53f2\u7248\u672c\nkubectl rollout history deployment/nginx\n"})}),"\n",(0,d.jsx)(n.h3,{id:"service\u64cd\u4f5c",children:"Service\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efaService\nkubectl expose deployment nginx --port=80 --type=NodePort\n\n# \u67e5\u770bService\nkubectl get services\n\n# \u67e5\u770bService\u8be6\u7ec6\u4fe1\u606f\nkubectl describe service nginx\n\n# \u5220\u9664Service\nkubectl delete service nginx\n"})}),"\n",(0,d.jsx)(n.h3,{id:"configmap\u548csecret",children:"ConfigMap\u548cSecret"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efaConfigMap\nkubectl create configmap my-config --from-literal=key1=value1 --from-literal=key2=value2\n\n# \u521b\u5efaSecret\nkubectl create secret generic my-secret --from-literal=username=admin --from-literal=password=123456\n\n# \u67e5\u770bConfigMap\u548cSecret\nkubectl get configmaps\nkubectl get secrets\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u5e38\u7528\u547d\u4ee4",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,d.jsx)(n.h3,{id:"\u8d44\u6e90\u67e5\u770b",children:"\u8d44\u6e90\u67e5\u770b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u6240\u6709\u8d44\u6e90\nkubectl get all\n\n# \u67e5\u770b\u7279\u5b9a\u8d44\u6e90\nkubectl get pods\nkubectl get services\nkubectl get deployments\nkubectl get nodes\nkubectl get namespaces\n\n# \u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\nkubectl get pods -o wide\nkubectl get pods -o yaml\nkubectl get pods -o json\n\n# \u6309\u6807\u7b7e\u7b5b\u9009\nkubectl get pods -l app=nginx\nkubectl get pods -l environment=production\n\n# \u67e5\u770b\u8d44\u6e90\u63cf\u8ff0\nkubectl describe pod <pod-name>\nkubectl describe service <service-name>\nkubectl describe node <node-name>\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u8d44\u6e90\u7ba1\u7406",children:"\u8d44\u6e90\u7ba1\u7406"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u5e94\u7528YAML\u6587\u4ef6\nkubectl apply -f deployment.yaml\nkubectl apply -f -  # \u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\n\n# \u5220\u9664\u8d44\u6e90\nkubectl delete -f deployment.yaml\nkubectl delete pod <pod-name>\nkubectl delete deployment <deployment-name>\n\n# \u7f16\u8f91\u8d44\u6e90\nkubectl edit deployment <deployment-name>\nkubectl edit service <service-name>\n\n# \u590d\u5236\u6587\u4ef6\u5230Pod\nkubectl cp /local/file <pod-name>:/remote/path\nkubectl cp <pod-name>:/remote/file /local/path\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770bPod\u72b6\u6001\nkubectl get pods\nkubectl describe pod <pod-name>\n\n# \u67e5\u770bPod\u65e5\u5fd7\nkubectl logs <pod-name>\nkubectl logs <pod-name> -c <container-name>  # \u591a\u5bb9\u5668Pod\nkubectl logs <pod-name> --previous  # \u67e5\u770b\u4e0a\u4e00\u4e2a\u5bb9\u5668\u7684\u65e5\u5fd7\n\n# \u67e5\u770b\u4e8b\u4ef6\nkubectl get events\nkubectl get events --sort-by='.lastTimestamp'\n\n# \u67e5\u770b\u8282\u70b9\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\nkubectl top nodes\nkubectl top pods\n\n# \u67e5\u770b\u96c6\u7fa4\u4e8b\u4ef6\nkubectl get events --all-namespaces\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u7aef\u53e3\u8f6c\u53d1",children:"\u7aef\u53e3\u8f6c\u53d1"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u7aef\u53e3\u8f6c\u53d1\nkubectl port-forward <pod-name> 8080:80\nkubectl port-forward service/<service-name> 8080:80\n\n# \u8bbf\u95eePod\nkubectl exec -it <pod-name> -- /bin/bash\nkubectl exec -it <pod-name> -c <container-name> -- /bin/bash\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u6807\u7b7e\u548c\u6ce8\u89e3",children:"\u6807\u7b7e\u548c\u6ce8\u89e3"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# \u6dfb\u52a0\u6807\u7b7e\nkubectl label pod <pod-name> environment=production\nkubectl label pod <pod-name> tier=frontend\n\n# \u5220\u9664\u6807\u7b7e\nkubectl label pod <pod-name> environment-\n\n# \u6dfb\u52a0\u6ce8\u89e3\nkubectl annotate pod <pod-name> description="This is a test pod"\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,d.jsx)(n.h3,{id:"1-pod\u4e00\u76f4\u5904\u4e8epending\u72b6\u6001",children:"1. Pod\u4e00\u76f4\u5904\u4e8ePending\u72b6\u6001"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u8282\u70b9\u8d44\u6e90\nkubectl describe node <node-name>\n\n# \u68c0\u67e5Pod\u4e8b\u4ef6\nkubectl describe pod <pod-name>\n\n# \u68c0\u67e5\u8282\u70b9\u6c61\u70b9\nkubectl get nodes -o custom-columns=NAME:.metadata.name,TAINTS:.spec.taints\n"})}),"\n",(0,d.jsx)(n.h3,{id:"2-pod\u65e0\u6cd5\u542f\u52a8",children:"2. Pod\u65e0\u6cd5\u542f\u52a8"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770bPod\u72b6\u6001\nkubectl get pods\n\n# \u67e5\u770bPod\u65e5\u5fd7\nkubectl logs <pod-name>\n\n# \u67e5\u770bPod\u8be6\u7ec6\u4fe1\u606f\nkubectl describe pod <pod-name>\n"})}),"\n",(0,d.jsx)(n.h3,{id:"3-\u670d\u52a1\u65e0\u6cd5\u8bbf\u95ee",children:"3. \u670d\u52a1\u65e0\u6cd5\u8bbf\u95ee"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5Service\u914d\u7f6e\nkubectl get services\nkubectl describe service <service-name>\n\n# \u68c0\u67e5Endpoints\nkubectl get endpoints <service-name>\n\n# \u68c0\u67e5Pod\u6807\u7b7e\nkubectl get pods --show-labels\n"})}),"\n",(0,d.jsx)(n.h3,{id:"4-\u8282\u70b9\u4e0d\u53ef\u7528",children:"4. \u8282\u70b9\u4e0d\u53ef\u7528"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u8282\u70b9\u72b6\u6001\nkubectl get nodes\nkubectl describe node <node-name>\n\n# \u68c0\u67e5\u8282\u70b9\u4e0a\u7684Pod\nkubectl get pods -o wide\n\n# \u9a71\u9010\u8282\u70b9\u4e0a\u7684Pod\nkubectl drain <node-name> --ignore-daemonsets --delete-emptydir-data\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u53c2\u8003\u94fe\u63a5",children:"\u53c2\u8003\u94fe\u63a5"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kubernetes.io/zh-cn/docs/setup/",children:"Kubernetes\u5b98\u65b9\u6587\u6863"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/",children:"Kubeadm\u5b89\u88c5\u6307\u5357"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/",children:"Minikube\u6587\u6863"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kind.sigs.k8s.io/",children:"kind\u6587\u6863"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/",children:"kubectl\u547d\u4ee4\u53c2\u8003"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},47374:(e,n,l)=>{l.d(n,{A:()=>s});const s=l.p+"assets/images/k8s_docker_kind_2-31d0e146ceb8b9bd4456a1b7e1aab03c.png"}}]);