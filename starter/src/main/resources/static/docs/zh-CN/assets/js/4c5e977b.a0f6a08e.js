(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6473],{11724:()=>{},14024:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});var n;"undefined"!=typeof window&&(n={githubRepo:"bytedesk/bytedesk"},"undefined"!=typeof window&&(window.__FORMSPREE_ID__=n.formspreeId,window.__GITHUB_TOKEN__=n.githubToken,window.__GITHUB_REPO__=n.githubRepo,window.__FEEDBACK_API__=n.feedbackApi));class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}async submitFeedback(e){console.log("\u63d0\u4ea4\u53cd\u9988:",e);const t=[];t.push(this.submitToGoogleAnalytics(e)),t.push(this.submitToFormspree(e)),t.push(this.saveToLocalStorage(e)),"undefined"!=typeof window&&"localhost"!==window.location.hostname&&t.push(this.submitToCustomAPI(e));("undefined"!=typeof window?window.__GITHUB_TOKEN__:void 0)&&t.push(this.submitToGitHub(e));try{await Promise.allSettled(t),console.log("\u53cd\u9988\u63d0\u4ea4\u6210\u529f")}catch(o){console.error("\u53cd\u9988\u63d0\u4ea4\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef:",o)}}async submitToGoogleAnalytics(e){return new Promise(t=>{try{"undefined"!=typeof window&&window.gtag&&window.gtag("event","feedback_submit",{event_category:"documentation",event_label:e.type,value:"positive"===e.type?1:0,custom_parameters:{page_url:e.url,feedback_comment:e.comment,doc_title:e.docTitle}}),t()}catch(o){console.warn("Google Analytics \u63d0\u4ea4\u5931\u8d25:",o),t()}})}async submitToFormspree(e){const t="undefined"!=typeof window?window.__FORMSPREE_ID__:void 0;if(t)try{const o=await fetch(`https://formspree.io/f/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:`\u6587\u6863\u53cd\u9988 - ${e.type}`,message:e.comment,url:e.url,type:e.type,timestamp:e.timestamp,docTitle:e.docTitle})});if(!o.ok)throw new Error(`Formspree \u63d0\u4ea4\u5931\u8d25: ${o.status}`)}catch(o){console.warn("Formspree \u63d0\u4ea4\u5931\u8d25:",o)}else console.warn("Formspree ID \u672a\u914d\u7f6e")}async saveToLocalStorage(e){try{if("undefined"==typeof window)return;const t=JSON.parse(localStorage.getItem("doc_feedbacks")||"[]");t.push(e),t.length>100&&t.splice(0,t.length-100),localStorage.setItem("doc_feedbacks",JSON.stringify(t))}catch(t){console.warn("\u672c\u5730\u5b58\u50a8\u4fdd\u5b58\u5931\u8d25:",t)}}async submitToCustomAPI(e){const t="undefined"!=typeof window?window.__FEEDBACK_API__:void 0;if(t)try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw new Error(`API \u63d0\u4ea4\u5931\u8d25: ${o.status}`)}catch(o){console.warn("\u81ea\u5b9a\u4e49API\u63d0\u4ea4\u5931\u8d25:",o)}}async submitToGitHub(e){const t="undefined"!=typeof window?window.__GITHUB_TOKEN__:void 0,o="undefined"!=typeof window&&window.__GITHUB_REPO__||"bytedesk/bytedesk";if(t)try{const n=`[\u6587\u6863\u53cd\u9988] ${"positive"===e.type?"\ud83d\udc4d \u6b63\u9762":"\ud83d\udc4e \u6539\u8fdb"} - ${e.docTitle||"\u6587\u6863\u9875\u9762"}`,s=`\n## \u53cd\u9988\u4fe1\u606f\n\n**\u53cd\u9988\u7c7b\u578b**: ${"positive"===e.type?"\ud83d\udc4d \u6709\u5e2e\u52a9":"\ud83d\udc4e \u9700\u6539\u8fdb"}\n**\u9875\u9762URL**: ${e.url}\n**\u53cd\u9988\u65f6\u95f4**: ${e.timestamp}\n\n## \u7528\u6237\u8bc4\u8bba\n\n${e.comment||"\u65e0\u5177\u4f53\u8bc4\u8bba"}\n\n## \u6280\u672f\u4fe1\u606f\n\n- User Agent: ${e.userAgent}\n- \u6587\u6863\u6807\u9898: ${e.docTitle||"N/A"}\n\n---\n*\u6b64Issue\u7531\u6587\u6863\u53cd\u9988\u7cfb\u7edf\u81ea\u52a8\u521b\u5efa*\n      `,a=await fetch(`https://api.github.com/repos/${o}/issues`,{method:"POST",headers:{Authorization:`token ${t}`,"Content-Type":"application/json"},body:JSON.stringify({title:n,body:s,labels:["documentation","feedback","positive"===e.type?"positive":"improvement"]})});if(!a.ok)throw new Error(`GitHub API \u9519\u8bef: ${a.status}`);console.log("GitHub Issue \u521b\u5efa\u6210\u529f")}catch(n){console.warn("GitHub Issue \u521b\u5efa\u5931\u8d25:",n)}else console.warn("GitHub Token \u672a\u914d\u7f6e")}getLocalFeedbacks(){try{return"undefined"==typeof window?[]:JSON.parse(localStorage.getItem("doc_feedbacks")||"[]")}catch{return[]}}clearLocalFeedbacks(){"undefined"!=typeof window&&localStorage.removeItem("doc_feedbacks")}exportFeedbacksAsJSON(){const e=this.getLocalFeedbacks();return JSON.stringify(e,null,2)}exportFeedbacksAsCSV(){const e=this.getLocalFeedbacks();if(0===e.length)return"";const t=[["\u7c7b\u578b","\u8bc4\u8bba","URL","\u65f6\u95f4","\u7528\u6237\u4ee3\u7406","\u6587\u6863\u6807\u9898"].join(",")];return e.forEach(e=>{const o=[e.type,`"${e.comment.replace(/"/g,'""')}"`,e.url,e.timestamp,`"${e.userAgent.replace(/"/g,'""')}"`,e.docTitle||""];t.push(o.join(","))}),t.join("\n")}}const a=s.getInstance()},22179:()=>{},24675:()=>{},31568:()=>{},33363:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var n=o(30758),s=o(13526),a=o(63164),i=o(81353),c=o(83501),d=o(73012),r=o(14024);const l={feedbackContainer:"feedbackContainer_YCD2",feedbackQuestion:"feedbackQuestion_oWvU",buttonContainer:"buttonContainer_Zim_",feedbackButton:"feedbackButton_fT9j",positive:"positive_qcHW",negative:"negative_CWIX",commentSection:"commentSection_qqCp",commentInput:"commentInput_Veda",commentActions:"commentActions_Cmk6",submitButton:"submitButton_HBS4",cancelButton:"cancelButton_Wdyq",thankYouMessage:"thankYouMessage_HH0w"};var u=o(86070);function m(){const[e,t]=(0,n.useState)(!1),[o,s]=(0,n.useState)(null),[a,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),m=e=>{s(e),"positive"===e?p(e,""):d(!0)},p=async(e,o)=>{const n={type:e,comment:o,url:window.location.href,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,docTitle:document.title};try{await r.A.submitFeedback(n),console.log("\u53cd\u9988\u5df2\u6210\u529f\u63d0\u4ea4\u5230\u591a\u4e2a\u6e20\u9053")}catch(s){console.error("\u63d0\u4ea4\u53cd\u9988\u5931\u8d25:",s)}t(!0),d(!1)};return e?(0,u.jsx)("div",{className:l.feedbackContainer,children:(0,u.jsx)("p",{className:l.thankYouMessage,children:"\u8c22\u8c22\u60a8\u7684\u53cd\u9988\uff01"})}):(0,u.jsxs)("div",{className:l.feedbackContainer,children:[(0,u.jsxs)("div",{className:l.feedbackQuestion,children:[(0,u.jsx)("p",{children:"\u8fd9\u9875\u6587\u6863\u5bf9\u60a8\u6709\u5e2e\u52a9\u5417\uff1f"}),(0,u.jsxs)("div",{className:l.buttonContainer,children:[(0,u.jsx)("button",{className:`${l.feedbackButton} ${l.positive}`,onClick:()=>m("positive"),children:"\u6709\u5e2e\u52a9 \ud83d\udc4d"}),(0,u.jsx)("button",{className:`${l.feedbackButton} ${l.negative}`,onClick:()=>m("negative"),children:"\u9700\u6539\u8fdb \ud83d\udc4e"})]})]}),c&&(0,u.jsxs)("div",{className:l.commentSection,children:[(0,u.jsx)("textarea",{className:l.commentInput,placeholder:"\u8bf7\u544a\u8bc9\u6211\u4eec\u5982\u4f55\u6539\u8fdb\u8fd9\u7bc7\u6587\u6863...",value:a,onChange:e=>i(e.target.value)}),(0,u.jsxs)("div",{className:l.commentActions,children:[(0,u.jsx)("button",{className:l.submitButton,onClick:()=>{p(o,a)},disabled:!a.trim(),children:"\u63d0\u4ea4"}),(0,u.jsx)("button",{className:l.cancelButton,onClick:()=>{s(null),d(!1),i("")},children:"\u53d6\u6d88"})]})]})]})}function p(){const{metadata:e}=(0,i.u)(),{editUrl:t,lastUpdatedAt:o,lastUpdatedBy:n,tags:r}=e,l=r.length>0,p=!!(t||o||n);return l||p?(0,u.jsxs)("footer",{className:(0,s.A)(a.G.docs.docFooter,"docusaurus-mt-lg"),children:[l&&(0,u.jsx)("div",{className:(0,s.A)("row margin-top--sm",a.G.docs.docFooterTagsRow),children:(0,u.jsx)("div",{className:"col",children:(0,u.jsx)(c.A,{tags:r})})}),p&&(0,u.jsx)(d.A,{className:(0,s.A)("margin-top--sm",a.G.docs.docFooterEditMetaRow),editUrl:t,lastUpdatedAt:o,lastUpdatedBy:n}),(0,u.jsx)(m,{})]}):(0,u.jsx)("footer",{className:(0,s.A)(a.G.docs.docFooter,"docusaurus-mt-lg"),children:(0,u.jsx)(m,{})})}},60381:()=>{},73936:()=>{}}]);