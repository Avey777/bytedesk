"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1672],{19971:(e,o,d)=>{d.d(o,{R:()=>r,x:()=>t});var s=d(30758);const n={},c=s.createContext(n);function r(e){const o=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(c.Provider,{value:o},e.children)}},94888:(e,o,d)=>{d.r(o),d.d(o,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"deploy/depend/docker","title":"Docker \u5b89\u88c5\u4e0e\u4f7f\u7528\u6307\u5357","description":"- \u64cd\u4f5c\u7cfb\u7edf\uff1aUbuntu 22.04 LTS","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/deploy/depend/docker.md","sourceDirName":"deploy/depend","slug":"/deploy/depend/docker","permalink":"/docs/zh-CN/docs/deploy/depend/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/bytedesk/bytedesk-docs/blob/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/deploy/depend/docker.md","tags":[],"version":"current","lastUpdatedBy":"jack ning","lastUpdatedAt":1754546813000,"sidebarPosition":10,"frontMatter":{"sidebar_label":"Docker","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"MinIO","permalink":"/docs/zh-CN/docs/deploy/depend/minio"},"next":{"title":"JDK17","permalink":"/docs/zh-CN/docs/deploy/depend/jdk"}}');var n=d(86070),c=d(19971);const r={sidebar_label:"Docker",sidebar_position:10},t="Docker \u5b89\u88c5\u4e0e\u4f7f\u7528\u6307\u5357",l={},a=[{value:"Docker \u5b89\u88c5\u6d41\u7a0b\uff08Ubuntu \u7cfb\u7edf\uff09",id:"docker-\u5b89\u88c5\u6d41\u7a0bubuntu-\u7cfb\u7edf",level:2},{value:"\u5b89\u88c5 Docker",id:"\u5b89\u88c5-docker",level:3},{value:"Docker \u57fa\u672c\u64cd\u4f5c",id:"docker-\u57fa\u672c\u64cd\u4f5c",level:2},{value:"\u95ee\u9898\u6392\u67e5",id:"\u95ee\u9898\u6392\u67e5",level:2},{value:"\u505c\u6b62\u548c\u91cd\u542f\u670d\u52a1",id:"\u505c\u6b62\u548c\u91cd\u542f\u670d\u52a1",level:2},{value:"\u5347\u7ea7bytedesk\u955c\u50cf",id:"\u5347\u7ea7bytedesk\u955c\u50cf",level:2},{value:"\u5220\u9664MySQL\u6570\u636e\u6302\u8f7d",id:"\u5220\u9664mysql\u6570\u636e\u6302\u8f7d",level:2},{value:"\u6570\u636e\u5377\u7ba1\u7406",id:"\u6570\u636e\u5377\u7ba1\u7406",level:2},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:2},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4",level:2},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",level:2}];function k(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"docker-\u5b89\u88c5\u4e0e\u4f7f\u7528\u6307\u5357",children:"Docker \u5b89\u88c5\u4e0e\u4f7f\u7528\u6307\u5357"})}),"\n",(0,n.jsx)(o.admonition,{title:"\u7cfb\u7edf\u8981\u6c42",type:"tip",children:(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"\u64cd\u4f5c\u7cfb\u7edf\uff1aUbuntu 22.04 LTS"}),"\n",(0,n.jsx)(o.li,{children:"\u670d\u52a1\u5668\u63a8\u8350\u914d\u7f6e\uff1a2\u68384G\u5185\u5b58"}),"\n"]})}),"\n",(0,n.jsx)(o.admonition,{title:"\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u8bf4\u660e",type:"info",children:(0,n.jsxs)(o.p,{children:["\u4ee5\u4e0b\u8bf4\u660e\u4ec5\u4f9b\u53c2\u8003\uff0c\u5177\u4f53\u914d\u7f6e\u548c\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 ",(0,n.jsx)(o.a,{href:"https://docs.docker.com/",children:"Docker \u5b98\u65b9\u6587\u6863"}),"\u3002"]})}),"\n",(0,n.jsx)(o.p,{children:"Docker \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5e94\u7528\u5bb9\u5668\u5f15\u64ce\uff0c\u5b83\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u5c06\u5e94\u7528\u53ca\u5176\u4f9d\u8d56\u6253\u5305\u5230\u4e00\u4e2a\u53ef\u79fb\u690d\u7684\u5bb9\u5668\u4e2d\uff0c\u7136\u540e\u53d1\u5e03\u5230\u4efb\u4f55\u6d41\u884c\u7684 Linux \u6216 Windows \u64cd\u4f5c\u7cfb\u7edf\u7684\u673a\u5668\u4e0a\u3002\u672c\u6307\u5357\u5c06\u6559\u4f60\u5982\u4f55\u5b89\u88c5 Docker \u5e76\u4ecb\u7ecd\u4e00\u4e9b\u5e38\u7528\u547d\u4ee4\u3002"}),"\n",(0,n.jsx)(o.h2,{id:"docker-\u5b89\u88c5\u6d41\u7a0bubuntu-\u7cfb\u7edf",children:"Docker \u5b89\u88c5\u6d41\u7a0b\uff08Ubuntu \u7cfb\u7edf\uff09"}),"\n",(0,n.jsx)(o.p,{children:"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6dfb\u52a0 Docker \u7684\u5b98\u65b9\u8f6f\u4ef6\u6e90\uff1a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:'# \u66f4\u65b0\u8f6f\u4ef6\u5305\u7d22\u5f15\nsudo apt-get update\n# \u5b89\u88c5\u5fc5\u8981\u7684\u8f6f\u4ef6\u5305\nsudo apt-get install ca-certificates curl -y\n# \u521b\u5efa\u5bc6\u94a5\u76ee\u5f55\nsudo install -m 0755 -d /etc/apt/keyrings\n# \u4e0b\u8f7d Docker \u7684 GPG \u5bc6\u94a5\nsudo curl -fsSL https://mirrors.cloud.tencent.com/docker-ce/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\n# \u8bbe\u7f6e\u6743\u9650\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n# \u6dfb\u52a0 Docker \u8f6f\u4ef6\u6e90\necho "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://mirrors.cloud.tencent.com/docker-ce/linux/ubuntu/ \\\n  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n# \u518d\u6b21\u66f4\u65b0\u8f6f\u4ef6\u5305\u7d22\u5f15\nsudo apt-get update\n'})}),"\n",(0,n.jsx)(o.h3,{id:"\u5b89\u88c5-docker",children:"\u5b89\u88c5 Docker"}),"\n",(0,n.jsx)(o.p,{children:"\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 Docker \u548c\u76f8\u5173\u7ec4\u4ef6\uff1a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u5b89\u88c5 Docker \u5f15\u64ce\u3001CLI \u548c\u5176\u4ed6\u7ec4\u4ef6\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n"})}),"\n",(0,n.jsx)(o.h2,{id:"docker-\u57fa\u672c\u64cd\u4f5c",children:"Docker \u57fa\u672c\u64cd\u4f5c"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u542f\u52a8 Docker \u670d\u52a1\nsudo systemctl start docker\n\n# \u505c\u6b62 Docker \u670d\u52a1\nsudo systemctl stop docker\n\n# \u91cd\u542f Docker \u670d\u52a1\nsudo systemctl restart docker\n\n# \u67e5\u770b Docker \u670d\u52a1\u72b6\u6001\nsudo systemctl status docker\n\n# \u53e6\u4e00\u79cd\u91cd\u542f\u65b9\u5f0f\nsudo service docker restart\n\n# \u67e5\u770b Docker \u8be6\u7ec6\u4fe1\u606f\ndocker info\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u95ee\u9898\u6392\u67e5",children:"\u95ee\u9898\u6392\u67e5"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u4f8b\u5982\u67e5\u770bMySQL\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs mysql-bytedesk\n\n# \u67e5\u770bRedis\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs redis-bytedesk\n\n# \u67e5\u770bElasticsearch\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs elasticsearch-bytedesk\n\n# \u67e5\u770bArtemis\u6d88\u606f\u961f\u5217\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs artemis-bytedesk\n\n# \u67e5\u770bollama-bytedesk\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs ollama-bytedesk\n\n# \u67e5\u770b\u4e3b\u5e94\u7528\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs bytedesk\n# \u5b9e\u65f6\u67e5\u770b\u65e5\u5fd7\u5e76\u8ddf\u8e2a\u6700\u65b0\u8f93\u51fa\ndocker logs -f bytedesk\n# \u663e\u793a\u6700\u8fd150\u884c\u65e5\u5fd7\ndocker logs --tail 50 bytedesk\n# \u67e5\u770b\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u8fdb\u7a0b\ndocker top bytedesk\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u505c\u6b62\u548c\u91cd\u542f\u670d\u52a1",children:"\u505c\u6b62\u548c\u91cd\u542f\u670d\u52a1"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u505c\u6b62\u6240\u6709\u670d\u52a1\uff08\u4fdd\u7559\u6570\u636e\uff09\ndocker compose -p bytedesk -f docker-compose.yaml down\n# docker compose -p bytedesk -f docker-compose-ollama.yaml down\n# \u6216\ndocker stop bytedesk redis-bytedesk elasticsearch-bytedesk ollama-bytedesk mysql-bytedesk artemis-bytedesk\n\n# \u505c\u6b62\u6240\u6709\u670d\u52a1\u5e76\u5220\u9664\u6570\u636e\u5377\uff08\u8c28\u614e\u64cd\u4f5c\uff0c\u4f1a\u5220\u9664\u6240\u6709\u6570\u636e\uff09\ndocker compose -p bytedesk -f docker-compose.yaml down -v\n# docker compose -p bytedesk -f docker-compose-ollama.yaml down -v\n\n# \u91cd\u542f\u7279\u5b9a\u670d\u52a1\ndocker compose -p bytedesk -f docker-compose.yaml restart bytedesk\n# docker compose -p bytedesk -f docker-compose-ollama.yaml restart bytedesk\n\n# \u91cd\u542f\u6240\u6709\u670d\u52a1\ndocker compose -p bytedesk -f docker-compose.yaml restart\n# docker compose -p bytedesk -f docker-compose-ollama.yaml restart\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u5347\u7ea7bytedesk\u955c\u50cf",children:"\u5347\u7ea7bytedesk\u955c\u50cf"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# 1. \u505c\u6b62\u5f53\u524d\u670d\u52a1\ndocker compose -p bytedesk -f docker-compose.yaml down\n# docker compose -p bytedesk -f docker-compose-ollama.yaml down\n\n# 2. \u62c9\u53d6\u6700\u65b0\u955c\u50cf\ndocker pull registry.cn-hangzhou.aliyuncs.com/bytedesk/bytedesk:latest\n\n# 3. \u91cd\u65b0\u542f\u52a8\u670d\u52a1\uff08\u4f1a\u81ea\u52a8\u4f7f\u7528\u6700\u65b0\u955c\u50cf\uff09\ndocker compose -p bytedesk -f docker-compose.yaml up -d\n# docker compose -p bytedesk -f docker-compose-ollama.yaml up -d\n\n# \u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5f3a\u5236\u91cd\u65b0\u6784\u5efa\u5e76\u542f\u52a8\ndocker compose -p bytedesk -f docker-compose.yaml up -d --force-recreate bytedesk\n# docker compose -p bytedesk -f docker-compose-ollama.yaml up -d --force-recreate bytedesk\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u5220\u9664mysql\u6570\u636e\u6302\u8f7d",children:"\u5220\u9664MySQL\u6570\u636e\u6302\u8f7d"}),"\n",(0,n.jsx)(o.p,{children:"\u5982\u679c\u9700\u8981\u5220\u9664MySQL\u6570\u636e\u6302\u8f7d\u5e76\u91cd\u65b0\u521d\u59cb\u5316\u6570\u636e\u5e93\uff0c\u8bf7\u6309\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# 1. \u505c\u6b62\u6240\u6709\u670d\u52a1\ndocker compose -p bytedesk -f docker-compose.yaml down\n# docker compose -p bytedesk -f docker-compose-ollama.yaml down\n\n# 2. \u5220\u9664MySQL\u6570\u636e\u5377\uff08\u8c28\u614e\u64cd\u4f5c\uff0c\u4f1a\u5220\u9664\u6240\u6709\u6570\u636e\u5e93\u6570\u636e\uff09\ndocker volume rm bytedesk_mysql_data\n\n# 3. \u91cd\u65b0\u542f\u52a8\u670d\u52a1\uff08\u4f1a\u81ea\u52a8\u521b\u5efa\u65b0\u7684\u6570\u636e\u5377\u548c\u6570\u636e\u5e93\uff09\ndocker compose -p bytedesk -f docker-compose.yaml up -d\n# docker compose -p bytedesk -f docker-compose-ollama.yaml up -d\n\n# \u6ce8\u610f\uff1a\u5220\u9664\u6570\u636e\u5377\u540e\uff0c\u6240\u6709\u6570\u636e\u90fd\u4f1a\u4e22\u5931\uff0c\u9700\u8981\u91cd\u65b0\u521d\u59cb\u5316\u7ba1\u7406\u5458\u8d26\u6237\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u6570\u636e\u5377\u7ba1\u7406",children:"\u6570\u636e\u5377\u7ba1\u7406"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u67e5\u770b\u6240\u6709\u6570\u636e\u5377\ndocker volume ls | grep bytedesk\n\n# \u67e5\u770b\u6570\u636e\u5377\u8be6\u7ec6\u4fe1\u606f\ndocker volume inspect bytedesk_mysql_data\ndocker volume inspect bytedesk_redis_data\ndocker volume inspect bytedesk_elasticsearch_data\ndocker volume inspect bytedesk_upload_data\ndocker volume inspect bytedesk_ollama_models\ndocker volume inspect bytedesk_artemis_data\n\n# \u5907\u4efd\u6570\u636e\u5377\uff08\u53ef\u9009\uff09\ndocker run --rm -v bytedesk_mysql_data:/data -v $(pwd):/backup alpine tar czf /backup/mysql_backup.tar.gz -C /data .\n\n# \u6062\u590d\u6570\u636e\u5377\uff08\u53ef\u9009\uff09\ndocker run --rm -v bytedesk_mysql_data:/data -v $(pwd):/backup alpine tar xzf /backup/mysql_backup.tar.gz -C /data\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,n.jsx)(o.p,{children:"\u5982\u679c\u9047\u5230\u6570\u636e\u5e93\u8fde\u63a5\u95ee\u9898\u6216\u670d\u52a1\u542f\u52a8\u5931\u8d25\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4ee5\u4e0b\u6b65\u9aa4\uff1a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u67e5\u770b\u5bb9\u5668\u72b6\u6001\ndocker ps -a\n\n# \u67e5\u770b\u670d\u52a1\u65e5\u5fd7\ndocker logs mysql-bytedesk\ndocker logs bytedesk\n\n# \u5982\u679c\u670d\u52a1\u542f\u52a8\u5931\u8d25\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u91cd\u542f\ndocker compose -p bytedesk -f docker-compose.yaml down\n# docker compose -p bytedesk -f docker-compose-ollama.yaml down\ndocker compose -p bytedesk -f docker-compose.yaml up -d\n# docker compose -p bytedesk -f docker-compose-ollama.yaml up -d\n\n# \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\ndocker network inspect bytedesk-network\n\n# \u6e05\u7406\u672a\u4f7f\u7528\u7684\u8d44\u6e90\ndocker system prune -f\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u5e38\u7528\u547d\u4ee4",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u67e5\u770b\u670d\u52a1\u72b6\u6001\ndocker compose -p bytedesk -f docker-compose.yaml ps\n# docker compose -p bytedesk -f docker-compose-ollama.yaml ps\n\n# \u67e5\u770b\u670d\u52a1\u65e5\u5fd7\ndocker compose -p bytedesk -f docker-compose.yaml logs\n# docker compose -p bytedesk -f docker-compose-ollama.yaml logs\n\n# \u67e5\u770b\u7279\u5b9a\u670d\u52a1\u65e5\u5fd7\ndocker compose -p bytedesk -f docker-compose.yaml logs bytedesk\n# docker compose -p bytedesk -f docker-compose-ollama.yaml logs bytedesk\n\n# \u8fdb\u5165\u5bb9\u5668\u5185\u90e8\ndocker exec -it bytedesk /bin/bash\ndocker exec -it mysql-bytedesk mysql -u root -p\n\n# \u67e5\u770b\u5bb9\u5668\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\ndocker stats\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u53c2\u8003\u94fe\u63a5",children:"\u53c2\u8003\u94fe\u63a5"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.a,{href:"https://docs.docker.com/",children:"Docker \u5b98\u65b9\u6587\u6863"})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.a,{href:"https://cloud.tencent.com/document/product/213/46000",children:"\u817e\u8baf\u4e91 Docker \u5b89\u88c5\u6307\u5357"})}),"\n"]})]})}function p(e={}){const{wrapper:o}={...(0,c.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(k,{...e})}):k(e)}}}]);