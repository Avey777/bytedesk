"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[274],{4845:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"development/userinfo","title":"User Information Integration","description":"This page explains how to integrate user information from your business system into the Weiyu customer service system to achieve user identity recognition and personalized services.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/development/userinfo.md","sourceDirName":"development","slug":"/development/userinfo","permalink":"/docs/docs/development/userinfo","draft":false,"unlisted":false,"editUrl":"https://github.com/bytedesk/bytedesk-docs/blob/main/docs/development/userinfo.md","tags":[],"version":"current","lastUpdatedBy":"jack ning","lastUpdatedAt":1753832748000,"sidebarPosition":5,"frontMatter":{"sidebar_label":"User Information","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"User System","permalink":"/docs/docs/development/user_system"},"next":{"title":"Personalized Service","permalink":"/docs/docs/development/viplevel"}}');var s=i(86070),t=i(19971);const o={sidebar_label:"User Information",sidebar_position:5},a="User Information Integration",c={},d=[{value:"Why do we need user information integration?",id:"why-do-we-need-user-information-integration",level:2},{value:"Integration Method",id:"integration-method",level:2},{value:"Core Parameters",id:"core-parameters",level:3},{value:"Complete Example Code",id:"complete-example-code",level:3},{value:"H5 Link Integration Method",id:"h5-link-integration-method",level:2},{value:"H5 Link Format",id:"h5-link-format",level:3},{value:"Example Code",id:"example-code",level:3},{value:"Usage Scenarios",id:"usage-scenarios",level:3},{value:"Important Notes",id:"important-notes",level:3},{value:"User Information Processing Flow",id:"user-information-processing-flow",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Important Notes 2",id:"important-notes-2",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"user-information-integration",children:"User Information Integration"})}),"\n",(0,s.jsx)(n.p,{children:"This page explains how to integrate user information from your business system into the Weiyu customer service system to achieve user identity recognition and personalized services."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Demo link: ",(0,s.jsx)(n.a,{href:"https://weiyuai.cn/reactdemo",children:"User Information Integration Demo"})]}),"\n",(0,s.jsx)(n.li,{children:"Demo code:"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Bytedesk/bytedesk-web/blob/master/examples/react-demo/src/pages/userInfoDemo.tsx",children:"User Information Integration Example-React"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Bytedesk/bytedesk-web/blob/master/examples/vue-demo/src/pages/userInfoDemo.vue",children:"User Information Integration Example-Vue"})}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Note: Please ensure you have completed the basic functionality integration in the ",(0,s.jsx)(n.a,{href:"/docs/docs/channel/react",children:"React Integration Guide"})," or ",(0,s.jsx)(n.a,{href:"/docs/docs/channel/vue",children:"Vue Integration Guide"})," before proceeding with user information integration."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"User Information Integration Example",src:i(73210).A+"",width:"3256",height:"1738"})}),"\n",(0,s.jsx)(n.h2,{id:"why-do-we-need-user-information-integration",children:"Why do we need user information integration?"}),"\n",(0,s.jsx)(n.p,{children:"In actual business scenarios, you may want to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Identify logged-in user identities in the customer service system"}),"\n",(0,s.jsx)(n.li,{children:"Display users' real avatars and nicknames"}),"\n",(0,s.jsx)(n.li,{children:"Record users' chat history"}),"\n",(0,s.jsx)(n.li,{children:"Associate user data from business systems"}),"\n",(0,s.jsx)(n.li,{children:"Provide personalized customer service experiences for different users"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Through user information integration, customer service personnel can better understand user situations and provide more accurate services."}),"\n",(0,s.jsx)(n.h2,{id:"integration-method",children:"Integration Method"}),"\n",(0,s.jsxs)(n.p,{children:["The Weiyu customer service system supports passing user information through configuration parameters. When initializing the customer service component, pass user-related information through the ",(0,s.jsx)(n.code,{children:"chatConfig"})," configuration item."]}),"\n",(0,s.jsx)(n.h3,{id:"core-parameters",children:"Core Parameters"}),"\n",(0,s.jsx)(n.p,{children:"The following are the core parameters for user information integration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"chatConfig: {\n  // Required parameters\n  org: 'df_org_uid',        // Your organization ID\n  t: \"1\",                   // Session type\n  sid: 'df_wg_uid',         // Session ID\n  \n  // User information parameters - These are the key to user information integration\n  visitorUid: 'visitor_001',       // User unique ID, recommended to use user ID from your business system\n  nickname: 'Visitor Xiao Ming',   // User nickname\n  avatar: 'https://example.com/avatar.jpg', // User avatar URL\n  mobile: '13800000000',    // User mobile number\n  email: 'user@example.com', // User email\n  note: 'Remark information',        // User remark\n  \n  // Custom fields, can pass any additional information (JSON string)\n  extra: JSON.stringify({\n    userType: 'vip',        // For example: user type\n    registerTime: '2025-01-01', // For example: registration time\n    // Any other information you want to pass\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"complete-example-code",children:"Complete Example Code"}),"\n",(0,s.jsx)(n.p,{children:"Below is a complete user information integration example demonstrating how to switch identity information based on different users:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { useState } from 'react';\nimport { Button, Card, Typography, Space, Avatar } from 'antd';\nimport { BytedeskReact } from 'bytedesk-web/react';\nimport type { BytedeskConfig } from 'bytedesk-web';\n\nconst { Title, Paragraph } = Typography;\n\n// Define user information interface\ninterface UserInfo {\n    visitorUid: string;\n    nickname: string;\n    avatar: string;\n    mobile?: string; // Optional field, add as needed\n    email?: string; // Optional field, add as needed\n    note?: string; // Optional field, add as needed\n}\n\n// Define two test users\nconst TEST_USERS = [\n    {\n        visitorUid: 'visitor_001',\n        nickname: 'Visitor Xiao Ming',\n        avatar: 'https://weiyuai.cn/assets/images/avatar/02.jpg',\n        mobile: '13800000000',\n        email: 'user@example.com',\n        note: 'Remark information'\n    },\n    {\n        visitorUid: 'visitor_002',\n        nickname: 'Visitor Xiao Hong',\n        avatar: 'https://weiyuai.cn/assets/images/avatar/01.jpg',\n        mobile: '13800000001',\n        email: 'user2@example.com',\n        note: 'Remark information'\n    }\n];\n\nconst UserInfoDemo = () => {\n    // Current selected user information\n    const [currentUser, setCurrentUser] = useState(TEST_USERS[0]);\n\n    // Configure customer service component\n    const config = {\n        placement: 'bottom-right',\n        autoPopup: false,\n        marginBottom: 20,\n        marginSide: 20,\n        buttonConfig: {\n            show: false,  // Hide default button\n        },\n        bubbleConfig: {\n            show: false,  // Hide bubble messages\n        },\n        chatConfig: {\n            org: 'df_org_uid',    // Replace with your organization ID\n            t: \"1\",\n            sid: 'df_wg_uid',     // Replace with your SID\n            \n            // Pass current user information - Core part\n            visitorUid: currentUser.visitorUid,\n            nickname: currentUser.nickname,\n            avatar: currentUser.avatar,\n            mobile: currentUser.mobile,\n            email: currentUser.email,\n            note: currentUser.note,\n            \n            // Custom fields, can pass any fields\n            extra: JSON.stringify({\n                userType: 'normal',\n                registerDate: '2025-05-01'\n            })\n        },\n        locale: 'zh-cn',\n    };\n\n    // Switch user information\n    const handleSwitchUser = (user) => {\n        setCurrentUser(user);\n    };\n\n    // Open chat window\n    const handleShowChat = () => {\n        console.log(\"Open chat window\");\n        (window).bytedesk?.showChat();\n    };\n\n    return (\n        <div style={{ padding: '24px' }}>\n            <Title level={2}>User Information Integration Demo</Title>\n            <Paragraph>\n                This example demonstrates how to pass user information (visitorUid, nickname, avatar) to the customer service component through configuration parameters.\n                Click the buttons below to switch between different user information.\n            </Paragraph>\n\n            <Card style={{ marginTop: '20px' }}>\n                <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\n                    <div>\n                        <Title level={4}>Current User Information:</Title>\n                        <Space>\n                            <Avatar src={currentUser.avatar} size={64} />\n                            <div>\n                                <Paragraph>User ID: {currentUser.visitorUid}</Paragraph>\n                                <Paragraph>Nickname: {currentUser.nickname}</Paragraph>\n                            </div>\n                        </Space>\n                    </div>\n\n                    <Space>\n                        <Button \n                            type=\"primary\"\n                            onClick={() => handleSwitchUser(TEST_USERS[0])}\n                            disabled={currentUser.visitorUid === TEST_USERS[0].visitorUid}\n                        >\n                            Switch to Visitor Xiao Ming\n                        </Button>\n                        <Button \n                            type=\"primary\"\n                            onClick={() => handleSwitchUser(TEST_USERS[1])}\n                            disabled={currentUser.visitorUid === TEST_USERS[1].visitorUid}\n                        >\n                            Switch to Visitor Xiao Hong\n                        </Button>\n                    </Space>\n                    \n                    <div style={{ textAlign: 'center', marginTop: '16px' }}>\n                        <Button type=\"primary\" size=\"large\" onClick={handleShowChat}>\n                            Contact Customer Service\n                        </Button>\n                    </div>\n                </Space>\n            </Card>\n\n            {/* Import Weiyu customer service component */}\n            <BytedeskReact {...config} />\n        </div>\n    );\n};\n\nexport default UserInfoDemo;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"h5-link-integration-method",children:"H5 Link Integration Method"}),"\n",(0,s.jsx)(n.p,{children:"In addition to component integration, the Weiyu customer service system also supports directly passing user information through URL parameters, suitable for H5 pages or quick integration scenarios."}),"\n",(0,s.jsx)(n.h3,{id:"h5-link-format",children:"H5 Link Format"}),"\n",(0,s.jsx)(n.p,{children:"The basic link format is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"https://www.weiyuai.cn/chat/?org=Your Organization ID&t=1&sid=Session ID&visitorUid=User ID&nickname=User Nickname&avatar=Avatar URL&extra=Additional Information JSON\n"})}),"\n",(0,s.jsx)(n.p,{children:"Parameter descriptions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"org"}),": Your organization ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"t"}),": Session type, usually 1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sid"}),": Session ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"visitorUid"}),": User unique identifier"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nickname"}),": User nickname (URL encoding required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"avatar"}),": User avatar URL (URL encoding required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mobile"}),": User mobile number (optional, URL encoding required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"email"}),": User email (optional, URL encoding required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"note"}),": Remark information (optional, URL encoding required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"extra"}),": Additional information (JSON string, URL encoding required)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-code",children:"Example Code"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// 1. Prepare basic user information\nconst userId = 'user12345';\nconst userNickname = 'Zhang San';\nconst userAvatar = 'https://example.com/avatar.jpg';\nconst userMobile = '13800000000'; // Optional\nconst userEmail = 'zhangsan@example.com'; // Optional\nconst userNote = 'Remark information'; // Optional\n\n// 2. Prepare additional information (optional)\nconst extraInfo = {\n  userType: 'vip',\n  registerTime: '2025-01-01',\n  memberLevel: 'Gold Member',\n};\n\n// 3. URL encoding processing\nconst encodedNickname = encodeURIComponent(userNickname);\nconst encodedAvatar = encodeURIComponent(userAvatar);\nconst encodedMobile = encodeURIComponent(userMobile);\nconst encodedEmail = encodeURIComponent(userEmail);\nconst encodedNote = encodeURIComponent(userNote);\nconst encodedExtra = encodeURIComponent(JSON.stringify(extraInfo));\n\n// 4. Concatenate complete URL\nconst chatUrl = `https://www.weiyuai.cn/chat/?org=df_org_uid&t=1&sid=df_wg_uid&visitorUid=${userId}&nickname=${encodedNickname}&avatar=${encodedAvatar}&mobile=${encodedMobile}&email=${encodedEmail}&note=${encodedNote}&extra=${encodedExtra}`;\n\n// 5. Use this link for navigation or generate a button\nwindow.location.href = chatUrl;\n// Or create a link\n// <a href=\"${chatUrl}\">Contact Customer Service</a>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"usage-scenarios",children:"Usage Scenarios"}),"\n",(0,s.jsx)(n.p,{children:"H5 link integration is particularly suitable for:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'"Contact Customer Service" buttons in mobile H5 pages'}),"\n",(0,s.jsx)(n.li,{children:"Customer service entry points in user personal centers or order pages"}),"\n",(0,s.jsx)(n.li,{children:"Customer service links in emails, SMS, or social media"}),"\n",(0,s.jsx)(n.li,{children:"Scenarios where complex JavaScript integration cannot be implemented"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"important-notes",children:"Important Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All URL parameters should be properly encoded, especially Chinese characters"}),"\n",(0,s.jsx)(n.li,{children:"Avatar URLs should use HTTPS protocol to ensure security"}),"\n",(0,s.jsx)(n.li,{children:"Consider adding different tracking parameters in different scenarios"}),"\n",(0,s.jsx)(n.li,{children:"Avoid passing sensitive user information in URLs"}),"\n",(0,s.jsx)(n.li,{children:"Overly long parameters may cause some browsers to truncate URLs, please control parameter length appropriately"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"user-information-processing-flow",children:"User Information Processing Flow"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Login Status Detection"}),": Detect whether users are logged in in the application"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Get User Information"}),": Get current logged-in user information from your business system"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configure Parameters"}),": Configure user information into the ",(0,s.jsx)(n.code,{children:"chatConfig"})," of the Weiyu customer service component"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Updates"}),": Update customer service component configuration when user login status or information changes"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Unique Identification"}),": Ensure each user's ",(0,s.jsx)(n.code,{children:"visitorUid"})," is unique in your system, recommended to use user ID from the business system"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Synchronization"}),": Update user information of the Weiyu customer service component in time when user login status changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reasonable Parameter Passing"}),": Only pass necessary user information in the ",(0,s.jsx)(n.code,{children:"extra"})," field, avoid passing sensitive information"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Avatar Optimization"}),": Ensure provided avatar URLs can be accessed normally, consider using CDN acceleration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Handling"}),": Add appropriate error handling mechanisms to ensure customer service functionality is not affected even if user information retrieval fails"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,s.jsx)(n.p,{children:"In addition to basic user information integration, you can also:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dynamic User Switching"}),": Implement multi-account switching functionality, such as different user switching in the example"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"User Grouping"}),": Pass user grouping information through the ",(0,s.jsx)(n.code,{children:"extra"})," field to achieve differentiated services for users in different groups"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Custom Fields"}),": Pass business-related custom fields to provide customer service with more user background information"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Session Control"}),": Control whether to display customer service entry based on user type, such as displaying special customer service entry for VIP users"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"important-notes-2",children:"Important Notes 2"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data Security"}),": Avoid passing sensitive user information on the client side"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Compatibility Handling"}),": For non-logged-in users, you can use temporary ID as ",(0,s.jsx)(n.code,{children:"visitorUid"})," to ensure consistent experience"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameter Validation"}),": Ensure the format of passed user information is correct, especially avatar URLs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Update Mechanism"}),": When user information changes, the customer service component needs to be re-initialized to apply new user information"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},19971:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(30758);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}},73210:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/userinfo-93b82950b073cc0bae6c9309d949b0dc.png"}}]);