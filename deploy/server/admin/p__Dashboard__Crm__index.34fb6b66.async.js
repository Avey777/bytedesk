"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5230],{25661:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var r=n(45332),a=n.n(r),i=n(44194),u=n(85817),l=n(49616),s=n(5780),o=n(37963),c=n(88354),d=n(58791),p=n(24914),f=n(61650),x=n(88372),m=n(34545),h=n(73193),v=n.n(h),w=n(90819),j=n.n(w),y=n(76711),g=n.n(y),b=n(89933),Z=n.n(b),I=n(81084),S=n(88344),A=n(67652),T=n(10162),k=n(3346),C=n(32394),F=n(48821),O=n(47783),P=n(16331),R=n(11137),q=n(5025),G=n(31549),E=[{uid:"c_001",name:"张三",email:"zhangsan@example.com",mobile:"13800000000",companyName:"字德科技",status:"active",owner:"Alice",tags:["VIP","意向强"],source:"web",description:"重点客户",createdAt:"2025-09-01 10:00:00",updatedAt:"2025-09-10 12:12:12"}],M=function(){var e=(0,i.useRef)(),t=(0,i.useState)(E),n=a()(t,2),r=n[0],u=n[1],o=(0,i.useState)(null),c=a()(o,2),d=c[0],p=c[1],f=(0,i.useState)(!1),x=a()(f,2),m=x[0],h=x[1],w=(0,i.useMemo)((function(){return[{title:"姓名",dataIndex:"name",valueType:"text"},{title:"邮箱",dataIndex:"email"},{title:"手机",dataIndex:"mobile"},{title:"公司",dataIndex:"companyName"},{title:"状态",dataIndex:"status",valueType:"select",valueEnum:{new:{text:"新建"},active:{text:"活跃"},inactive:{text:"沉默"}}},{title:"标签",dataIndex:"tags",render:function(e,t){return(0,G.jsx)(l.Z,{wrap:!0,children:(t.tags||[]).map((function(e){return(0,G.jsx)(S.Z,{children:e},e)}))})},hideInSearch:!0},{title:"归属人",dataIndex:"owner"},{title:"创建时间",dataIndex:"createdAt",valueType:"dateTime",hideInSearch:!0},{title:"更新时间",dataIndex:"updatedAt",valueType:"dateTime",hideInSearch:!0},{title:"操作",valueType:"option",width:160,render:function(e,t){return[(0,G.jsx)("a",{onClick:function(){return b(t)},children:"编辑"},"edit"),(0,G.jsx)(A.Z,{title:"确定删除该联系人？",onConfirm:function(){return M(t.uid)},children:(0,G.jsx)("a",{style:{color:"#ff4d4f"},children:"删除"})},"delete")]}}]}),[r]),y=function(){p(null),h(!0)},b=function(e){p(e),h(!0)},M=function(t){var n,r;u((function(e){return e.filter((function(e){return e.uid!==t}))})),q.yw.success("删除成功"),null===(n=e.current)||void 0===n||null===(r=n.reload)||void 0===r||r.call(n)};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(I.Z,{rowKey:"uid",actionRef:e,columns:w,search:{labelWidth:"auto"},pagination:{pageSize:10},toolBarRender:function(){return[(0,G.jsx)(s.ZP,{type:"primary",icon:(0,G.jsx)(T.Z,{}),onClick:y,children:"新建联系人"},"new")]},request:function(){var e=Z()(j()().mark((function e(t){var n,a,i,u,l,s,o;return j()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(n=t).name,i=n.email,u=n.mobile,l=n.status,s=n.owner,o=g()(r),a&&(o=o.filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes(a)}))),i&&(o=o.filter((function(e){var t;return null===(t=e.email)||void 0===t?void 0:t.includes(i)}))),u&&(o=o.filter((function(e){var t;return null===(t=e.mobile)||void 0===t?void 0:t.includes(u)}))),l&&(o=o.filter((function(e){return e.status===l}))),s&&(o=o.filter((function(e){var t;return null===(t=e.owner)||void 0===t?void 0:t.includes(s)}))),e.abrupt("return",{data:o,success:!0,total:o.length});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(0,G.jsxs)(k.a,{title:d?"编辑联系人":"新建联系人",open:m,onOpenChange:h,initialValues:null!=d?d:{status:"new",source:"web"},autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0,width:520},onFinish:function(){var t=Z()(j()().mark((function t(n){var r,a,i,l;return j()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d?(u((function(e){return e.map((function(e){return e.uid===d.uid?v()(v()(v()({},d),n),{},{updatedAt:(new Date).toISOString()}):e}))})),q.yw.success("更新成功")):(i="c_".concat(Math.random().toString(36).slice(2,8)),l=(new Date).toISOString(),u((function(e){return[v()(v()({},n),{},{uid:i,createdAt:l,updatedAt:l})].concat(g()(e))})),q.yw.success("创建成功")),null===(r=e.current)||void 0===r||null===(a=r.reload)||void 0===a||a.call(r),t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}]}),(0,G.jsx)(F.Z,{name:"email",label:"邮箱",rules:[{type:"email",message:"邮箱格式不正确"}]})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"mobile",label:"手机",rules:[{pattern:/^\d{6,20}$/,message:"请输入正确手机号"}]}),(0,G.jsx)(F.Z,{name:"companyName",label:"公司"})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(O.Z,{name:"status",label:"状态",valueEnum:{new:"新建",active:"活跃",inactive:"沉默"}}),(0,G.jsx)(F.Z,{name:"owner",label:"归属人"})]}),(0,G.jsx)(O.Z,{name:"tags",label:"标签",mode:"tags",placeholder:"输入后回车新增标签"}),(0,G.jsx)(O.Z,{name:"source",label:"来源",valueEnum:{web:"网站",offline:"线下",import:"导入",other:"其他"}}),(0,G.jsx)(P.Z,{name:"description",label:"备注",fieldProps:{rows:4}}),(0,G.jsx)(R.Z,{name:"followUp",label:"创建后创建默认跟进任务"})]})]})},N=[{uid:"co_001",name:"字德科技",industry:"SaaS",size:"100-499",website:"https://bytedesk.com",owner:"Alice",description:"重点客户",createdAt:"2025-09-01 09:00:00",updatedAt:"2025-09-10 13:23:45"}],z=function(){var e=(0,i.useRef)(),t=(0,i.useState)(N),n=a()(t,2),r=n[0],u=n[1],l=(0,i.useState)(null),o=a()(l,2),c=o[0],d=o[1],p=(0,i.useState)(!1),f=a()(p,2),x=f[0],m=f[1],h=(0,i.useMemo)((function(){return[{title:"公司名称",dataIndex:"name"},{title:"行业",dataIndex:"industry"},{title:"规模",dataIndex:"size"},{title:"网站",dataIndex:"website"},{title:"归属人",dataIndex:"owner"},{title:"创建时间",dataIndex:"createdAt",valueType:"dateTime",hideInSearch:!0},{title:"更新时间",dataIndex:"updatedAt",valueType:"dateTime",hideInSearch:!0},{title:"操作",valueType:"option",width:160,render:function(e,t){return[(0,G.jsx)("a",{onClick:function(){return y(t)},children:"编辑"},"edit"),(0,G.jsx)(A.Z,{title:"确定删除该公司？",onConfirm:function(){return b(t.uid)},children:(0,G.jsx)("a",{style:{color:"#ff4d4f"},children:"删除"})},"delete")]}}]}),[r]),w=function(){d(null),m(!0)},y=function(e){d(e),m(!0)},b=function(t){var n,r;u((function(e){return e.filter((function(e){return e.uid!==t}))})),q.yw.success("删除成功"),null===(n=e.current)||void 0===n||null===(r=n.reload)||void 0===r||r.call(n)};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(I.Z,{rowKey:"uid",actionRef:e,columns:h,search:{labelWidth:"auto"},pagination:{pageSize:10},toolBarRender:function(){return[(0,G.jsx)(s.ZP,{type:"primary",icon:(0,G.jsx)(T.Z,{}),onClick:w,children:"新建公司"},"new")]},request:function(){var e=Z()(j()().mark((function e(t){var n,a;return j()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,a=g()(r),n.name&&(a=a.filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes(n.name)}))),n.industry&&(a=a.filter((function(e){var t;return null===(t=e.industry)||void 0===t?void 0:t.includes(n.industry)}))),n.owner&&(a=a.filter((function(e){var t;return null===(t=e.owner)||void 0===t?void 0:t.includes(n.owner)}))),e.abrupt("return",{data:a,success:!0,total:a.length});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(0,G.jsxs)(k.a,{title:c?"编辑公司":"新建公司",open:x,onOpenChange:m,initialValues:null!=c?c:{},autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0,width:520},onFinish:function(){var t=Z()(j()().mark((function t(n){var r,a,i,l;return j()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c?(u((function(e){return e.map((function(e){return e.uid===c.uid?v()(v()(v()({},c),n),{},{updatedAt:(new Date).toISOString()}):e}))})),q.yw.success("更新成功")):(i="co_".concat(Math.random().toString(36).slice(2,8)),l=(new Date).toISOString(),u((function(e){return[v()(v()({},n),{},{uid:i,createdAt:l,updatedAt:l})].concat(g()(e))})),q.yw.success("创建成功")),null===(r=e.current)||void 0===r||null===(a=r.reload)||void 0===a||a.call(r),t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"name",label:"公司名称",rules:[{required:!0,message:"请输入公司名称"}]}),(0,G.jsx)(F.Z,{name:"website",label:"网站",rules:[{type:"url",message:"请输入正确 URL"}]})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(O.Z,{name:"industry",label:"行业",mode:"tags",placeholder:"输入行业后回车可新增"}),(0,G.jsx)(O.Z,{name:"size",label:"规模",valueEnum:{"1-19":"1-19","20-99":"20-99","100-499":"100-499","500+":"500+"}})]}),(0,G.jsx)(F.Z,{name:"owner",label:"归属人"}),(0,G.jsx)(P.Z,{name:"description",label:"备注",fieldProps:{rows:4}})]})]})},D=n(59606),_=[{uid:"d_001",title:"企业客服SaaS-年付",companyName:"字德科技",contactName:"张三",amount:19999,stage:"qualified",owner:"Alice",tags:["重点"],createdAt:"2025-09-05 11:00:00",updatedAt:"2025-09-10 12:00:00",description:"签约概率较高"}],K=function(){var e=(0,i.useRef)(),t=(0,i.useState)(_),n=a()(t,2),r=n[0],u=n[1],l=(0,i.useState)(null),o=a()(l,2),c=o[0],d=o[1],p=(0,i.useState)(!1),f=a()(p,2),x=f[0],m=f[1],h=(0,i.useMemo)((function(){return[{title:"标题",dataIndex:"title"},{title:"公司",dataIndex:"companyName"},{title:"联系人",dataIndex:"contactName"},{title:"金额(¥)",dataIndex:"amount",valueType:"money"},{title:"阶段",dataIndex:"stage",valueType:"select",valueEnum:{lead:{text:"线索"},qualified:{text:"商机"},proposal:{text:"方案/报价"},won:{text:"赢单"},lost:{text:"丢单"}}},{title:"归属人",dataIndex:"owner"},{title:"标签",dataIndex:"tags",render:function(e,t){return(t.tags||[]).map((function(e){return(0,G.jsx)(S.Z,{children:e},e)}))},hideInSearch:!0},{title:"创建时间",dataIndex:"createdAt",valueType:"dateTime",hideInSearch:!0},{title:"更新时间",dataIndex:"updatedAt",valueType:"dateTime",hideInSearch:!0},{title:"操作",valueType:"option",width:160,render:function(e,t){return[(0,G.jsx)("a",{onClick:function(){return y(t)},children:"编辑"},"edit"),(0,G.jsx)(A.Z,{title:"确定删除该商机？",onConfirm:function(){return b(t.uid)},children:(0,G.jsx)("a",{style:{color:"#ff4d4f"},children:"删除"})},"delete")]}}]}),[r]),w=function(){d(null),m(!0)},y=function(e){d(e),m(!0)},b=function(t){var n,r;u((function(e){return e.filter((function(e){return e.uid!==t}))})),q.yw.success("删除成功"),null===(n=e.current)||void 0===n||null===(r=n.reload)||void 0===r||r.call(n)};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(I.Z,{rowKey:"uid",actionRef:e,columns:h,search:{labelWidth:"auto"},pagination:{pageSize:10},toolBarRender:function(){return[(0,G.jsx)(s.ZP,{type:"primary",icon:(0,G.jsx)(T.Z,{}),onClick:w,children:"新建商机"},"new")]},request:function(){var e=Z()(j()().mark((function e(t){var n,a;return j()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,a=g()(r),n.title&&(a=a.filter((function(e){var t;return null===(t=e.title)||void 0===t?void 0:t.includes(n.title)}))),n.stage&&(a=a.filter((function(e){return e.stage===n.stage}))),n.owner&&(a=a.filter((function(e){var t;return null===(t=e.owner)||void 0===t?void 0:t.includes(n.owner)}))),e.abrupt("return",{data:a,success:!0,total:a.length});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(0,G.jsxs)(k.a,{title:c?"编辑商机":"新建商机",open:x,onOpenChange:m,initialValues:null!=c?c:{stage:"lead"},autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0,width:560},onFinish:function(){var t=Z()(j()().mark((function t(n){var r,a,i,l;return j()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c?(u((function(e){return e.map((function(e){return e.uid===c.uid?v()(v()(v()({},c),n),{},{updatedAt:(new Date).toISOString()}):e}))})),q.yw.success("更新成功")):(i="d_".concat(Math.random().toString(36).slice(2,8)),l=(new Date).toISOString(),u((function(e){return[v()(v()({},n),{},{uid:i,createdAt:l,updatedAt:l})].concat(g()(e))})),q.yw.success("创建成功")),null===(r=e.current)||void 0===r||null===(a=r.reload)||void 0===a||a.call(r),t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"title",label:"标题",rules:[{required:!0,message:"请输入标题"}]}),(0,G.jsx)(D.Z,{name:"amount",label:"金额(¥)",min:0,fieldProps:{precision:2}})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"companyName",label:"公司"}),(0,G.jsx)(F.Z,{name:"contactName",label:"联系人"})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(O.Z,{name:"stage",label:"阶段",valueEnum:{lead:"线索",qualified:"商机",proposal:"方案/报价",won:"赢单",lost:"丢单"}}),(0,G.jsx)(F.Z,{name:"owner",label:"归属人"})]}),(0,G.jsx)(O.Z,{name:"tags",label:"标签",mode:"tags",placeholder:"输入后回车新增标签"}),(0,G.jsx)(P.Z,{name:"description",label:"备注",fieldProps:{rows:4}})]})]})},V=n(88485),B=[{uid:"a_001",title:"回访张三",type:"call",relatedTo:"张三 - 字德科技",owner:"Alice",dueAt:"2025-09-20 15:00:00",status:"todo",description:"了解推进情况",createdAt:"2025-09-10 10:00:00",updatedAt:"2025-09-10 10:00:00"}],W=function(){var e=(0,i.useRef)(),t=(0,i.useState)(B),n=a()(t,2),r=n[0],u=n[1],l=(0,i.useState)(null),o=a()(l,2),c=o[0],d=o[1],p=(0,i.useState)(!1),f=a()(p,2),x=f[0],m=f[1],h=(0,i.useMemo)((function(){return[{title:"标题",dataIndex:"title"},{title:"类型",dataIndex:"type",valueType:"select",valueEnum:{call:{text:"电话"},email:{text:"邮件"},meeting:{text:"会议"},task:{text:"任务"},other:{text:"其他"}}},{title:"关联对象",dataIndex:"relatedTo"},{title:"归属人",dataIndex:"owner"},{title:"截止时间",dataIndex:"dueAt",valueType:"dateTime"},{title:"状态",dataIndex:"status",valueType:"select",valueEnum:{todo:{text:"待办"},done:{text:"完成"},canceled:{text:"取消"}}},{title:"创建时间",dataIndex:"createdAt",valueType:"dateTime",hideInSearch:!0},{title:"更新时间",dataIndex:"updatedAt",valueType:"dateTime",hideInSearch:!0},{title:"操作",valueType:"option",width:160,render:function(e,t){return[(0,G.jsx)("a",{onClick:function(){return y(t)},children:"编辑"},"edit"),(0,G.jsx)(A.Z,{title:"确定删除该活动？",onConfirm:function(){return b(t.uid)},children:(0,G.jsx)("a",{style:{color:"#ff4d4f"},children:"删除"})},"delete")]}}]}),[r]),w=function(){d(null),m(!0)},y=function(e){d(e),m(!0)},b=function(t){var n,r;u((function(e){return e.filter((function(e){return e.uid!==t}))})),q.yw.success("删除成功"),null===(n=e.current)||void 0===n||null===(r=n.reload)||void 0===r||r.call(n)};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(I.Z,{rowKey:"uid",actionRef:e,columns:h,search:{labelWidth:"auto"},pagination:{pageSize:10},toolBarRender:function(){return[(0,G.jsx)(s.ZP,{type:"primary",icon:(0,G.jsx)(T.Z,{}),onClick:w,children:"新建活动"},"new")]},request:function(){var e=Z()(j()().mark((function e(t){var n,a;return j()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,a=g()(r),n.title&&(a=a.filter((function(e){var t;return null===(t=e.title)||void 0===t?void 0:t.includes(n.title)}))),n.type&&(a=a.filter((function(e){return e.type===n.type}))),n.status&&(a=a.filter((function(e){return e.status===n.status}))),n.owner&&(a=a.filter((function(e){var t;return null===(t=e.owner)||void 0===t?void 0:t.includes(n.owner)}))),e.abrupt("return",{data:a,success:!0,total:a.length});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(0,G.jsxs)(k.a,{title:c?"编辑活动":"新建活动",open:x,onOpenChange:m,initialValues:null!=c?c:{status:"todo",type:"task"},autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0,width:520},onFinish:function(){var t=Z()(j()().mark((function t(n){var r,a,i,l;return j()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c?(u((function(e){return e.map((function(e){return e.uid===c.uid?v()(v()(v()({},c),n),{},{updatedAt:(new Date).toISOString()}):e}))})),q.yw.success("更新成功")):(i="a_".concat(Math.random().toString(36).slice(2,8)),l=(new Date).toISOString(),u((function(e){return[v()(v()({},n),{},{uid:i,createdAt:l,updatedAt:l})].concat(g()(e))})),q.yw.success("创建成功")),null===(r=e.current)||void 0===r||null===(a=r.reload)||void 0===a||a.call(r),t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"title",label:"标题",rules:[{required:!0,message:"请输入标题"}]}),(0,G.jsx)(O.Z,{name:"type",label:"类型",valueEnum:{call:"电话",email:"邮件",meeting:"会议",task:"任务",other:"其他"}})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(F.Z,{name:"relatedTo",label:"关联对象",placeholder:"如：张三 - 字德科技"}),(0,G.jsx)(F.Z,{name:"owner",label:"归属人"})]}),(0,G.jsxs)(C.A.Group,{children:[(0,G.jsx)(V.Z,{name:"dueAt",label:"截止时间"}),(0,G.jsx)(O.Z,{name:"status",label:"状态",valueEnum:{todo:"待办",done:"完成",canceled:"取消"}})]}),(0,G.jsx)(P.Z,{name:"description",label:"备注",fieldProps:{rows:4}})]})]})},U=u.Z.Title,H=function(){var e=(0,i.useState)("contacts"),t=a()(e,2),n=t[0],r=t[1],u=[{key:"contacts",label:(0,G.jsxs)("span",{children:[(0,G.jsx)(d.Z,{})," 联系人"]}),children:(0,G.jsx)(M,{})},{key:"companies",label:(0,G.jsxs)("span",{children:[(0,G.jsx)(p.Z,{})," 公司"]}),children:(0,G.jsx)(z,{})},{key:"deals",label:(0,G.jsxs)("span",{children:[(0,G.jsx)(f.Z,{})," 商机"]}),children:(0,G.jsx)(K,{})},{key:"activities",label:(0,G.jsxs)("span",{children:[(0,G.jsx)(x.Z,{})," 活动"]}),children:(0,G.jsx)(W,{})}];return(0,G.jsx)(c.Z,{title:(0,G.jsx)(l.Z,{children:(0,G.jsx)(U,{level:4,style:{margin:0},children:"CRM 客户管理"})}),extra:(0,G.jsx)(l.Z,{children:(0,G.jsx)(s.ZP,{icon:(0,G.jsx)(m.Z,{}),onClick:function(){return window.location.reload()},children:"刷新"})}),style:{minHeight:"100vh"},children:(0,G.jsx)(o.Z,{items:u,activeKey:n,onChange:r,type:"card"})})}}}]);