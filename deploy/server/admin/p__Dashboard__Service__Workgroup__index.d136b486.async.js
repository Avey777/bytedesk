"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9828],{93689:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(77260),r=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},u=n(54183),a=function(e,t){return r.createElement(u.Z,(0,o.Z)({},e,{ref:t,icon:s}))};var i=r.forwardRef(a)},13750:function(e,t,n){var o=n(39328),r=n(17323),s=n(55824),u=n(32973),a=n(44194),i=n(72870),l=n(64665),d=n(31549),c=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],g=a.forwardRef((function(e,t){var n=e.fieldProps,u=e.options,a=e.radioType,i=e.layout,g=e.proFieldProps,f=e.valueEnum,p=(0,r.Z)(e,c);return(0,d.jsx)(l.Z,(0,o.Z)((0,o.Z)({valueType:"button"===a?"radioButton":"radio",ref:t,valueEnum:(0,s.h)(f,void 0)},p),{},{fieldProps:(0,o.Z)({options:u,layout:i},n),proFieldProps:g,filedConfig:{customLightMode:!0}}))})),f=a.forwardRef((function(e,t){var n=e.fieldProps,r=e.children;return(0,d.jsx)(u.ZP,(0,o.Z)((0,o.Z)({},n),{},{ref:t,children:r}))})),p=(0,i.G)(f,{valuePropName:"checked",ignoreWidth:!0});p.Group=g,p.Button=u.ZP.Button,p.displayName="ProFormComponent",t.Z=p},54822:function(e,t,n){n(45332),n(16698),n(68100),n(87663),n(5488),n(14870),n(44194),n(31549)},99788:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ke}});var o=n(66985),r=n(44194),s=n(76711),u=n.n(s),a=n(73193),i=n.n(a),l=n(90819),d=n.n(l),c=n(89933),g=n.n(c),f=n(45332),p=n.n(f),v=n(5025),m=n(94956),h=n(40629),x=n(24522),b=n(16698),k=n(34599),y=n(87663),C=n(15722),w=n(82669),j=n(90727),M=n(14870),Z=n(68349),S=n(90317),F=n(5780),q=n(27259),R=n(96501),W=n(45681),T=n(18751),A=n(32394),P=n(48821),U=n(47783),E=n(31549),L=function(e){var t=e.open,n=e.onClose,o=e.onSubmit,s=A.A.useForm(),u=p()(s,1)[0],a=(0,T.Z)().translateString,i=(0,k.u)((function(e){return e.currentOrg})),l=(0,b.E)((function(e){return e.agentResult})),d=(0,r.useState)([]),c=p()(d,2),g=c[0],f=c[1];(0,r.useEffect)((function(){u.setFieldsValue({nickname:"",agents:[]})}),[]);return(0,E.jsx)("div",{children:(0,E.jsx)(Z.Z,{title:"创建技能组",open:t,forceRender:!0,onOk:function(){console.log("handleOk"),u.validateFields().then((function(e){console.log("form values:",e);var t={nickname:u.getFieldValue("nickname"),agentUids:u.getFieldValue("agents"),orgUid:null==i?void 0:i.uid};console.log("workgroup:",t),o(t)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){console.log("handleCancel"),n()},children:(0,E.jsxs)(A.A,{form:u,name:"wgForm",submitter:{render:function(e,t){return(0,E.jsx)(E.Fragment,{})}},children:[(0,E.jsx)(P.Z,{label:"技能组昵称",name:"nickname",rules:[{required:!0,message:"请输入昵称!"}]}),(0,E.jsx)(U.Z,{name:"agents",label:"成员",options:l.data.content.map((function(e){return{value:e.uid,label:a(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"请选择成员",value:g,onChange:function(e){console.log("selected ".concat(e)),f(e)}}})]})})})},D=function(){var e=(0,M.useIntl)(),t=(0,r.useRef)(!1),n=(0,T.Z)().translateStringTranct,o=(0,x.Z)().isDarkMode,s=(0,r.useState)(!1),a=p()(s,2),l=a[0],c=a[1],f=(0,r.useState)(""),A=p()(f,2),P=A[0],U=A[1],D=(0,r.useState)(!1),z=p()(D,2),O=z[0],V=z[1],I=(0,r.useState)(!0),B=p()(I,2),H=B[0],N=B[1],G=(0,r.useState)(0),Q=p()(G,2),$=Q[0],X=Q[1],J=(0,k.u)((function(e){return e.currentOrg})),K=(0,b.E)((function(e){return e.setAgentResult})),_=(0,y.$)((function(e){return{workgroupResult:e.workgroupResult,currentWorkgroup:e.currentWorkgroup,setWorkgroupResult:e.setWorkgroupResult,insertWorkgroup:e.insertWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup,deleteCurrentWorkgroup:e.deleteCurrentWorkgroup}})),Y=_.workgroupResult,ee=_.currentWorkgroup,te=_.setWorkgroupResult,ne=_.insertWorkgroup,oe=_.setCurrentWorkgroup,re=_.deleteCurrentWorkgroup,se=Z.Z.useModal(),ue=p()(se,2),ae=ue[0],ie=ue[1],le=function(){var t=g()(d()().mark((function t(n){var o;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("delete workgroup",n),v.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),t.next=4,(0,h.zl)(n);case 4:o=t.sent,console.log("delete workgroup response",o),200===o.code?(v.yw.destroy(),v.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),re(n.uid)):(v.yw.destroy(),v.yw.error(o.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),de=function(){var e=g()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,orgUid:null==J?void 0:J.uid},e.next=3,(0,m._t)(t);case 3:n=e.sent,console.log("queryAgentsByOrg: ",n),200===n.code?K(n):v.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=(0,r.useCallback)(g()(d()().mark((function e(){var n,o,r,s,a,l,c,g,f,p,m,x,b=arguments;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>0&&void 0!==b[0]?b[0]:0,o=b.length>1&&void 0!==b[1]&&b[1],!O&&!t.current){e.next=4;break}return e.abrupt("return");case 4:return t.current=!0,V(!0),r={pageNumber:n,pageSize:20,sortDirection:"ascend",orgUid:null==J?void 0:J.uid,searchText:P},e.prev=7,e.next=10,(0,h.LE)(r);case 10:s=e.sent,console.log("queryWorkgroupsByOrg:",s,r),200===s.code?(g=(null==s||null===(a=s.data)||void 0===a?void 0:a.content)||[],f=null!==(l=null==s||null===(c=s.data)||void 0===c?void 0:c.last)&&void 0!==l?l:0===g.length,N(!f),X(n),o?(m=(null==Y||null===(p=Y.data)||void 0===p?void 0:p.content)||[],x=i()(i()({},s),{},{data:i()(i()({},s.data),{},{content:[].concat(u()(m),u()(g))})}),te(x)):(te(s),g.length>0&&(null===ee||!g.some((function(e){return e.uid===(null==ee?void 0:ee.uid)})))&&oe(g[0]))):v.yw.error(s.message);case 13:return e.prev=13,t.current=!1,V(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[7,,13,17]])}))),[O,P,null==J?void 0:J.uid,Y,ee,te,oe]);(0,r.useEffect)((function(){X(0),N(!0),ce(0,!1),""===P&&de()}),[P,null==J?void 0:J.uid]);var ge=function(){var t=g()(d()().mark((function t(n){var o;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handleSave",n),v.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating"})),t.next=4,(0,h.p0)(n);case 4:o=t.sent,console.log("create workgroup:",o),200===o.code?(v.yw.destroy(),v.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),c(!1),ne(o.data)):(v.yw.destroy(),c(!1),v.yw.error(o.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(S.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,E.jsx)(F.ZP,{size:"small",type:"primary",icon:(0,E.jsx)(w.Z,{}),onClick:function(){c(!0)},children:e.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,E.jsx)(F.ZP,{size:"small",onClick:function(){X(0),N(!0),ce(0,!1)},children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,E.jsx)(F.ZP,{onClick:function(){return function(t){ae.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,E.jsx)(C.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(t.nickname,"】？"),onOk:function(){le(t)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(ee)},size:"small",danger:!0,disabled:ee&&""===ee.uid,children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,E.jsx)("div",{style:{margin:10,marginTop:16},children:(0,E.jsx)(q.Z.Search,{placeholder:e.formatMessage({id:"workgroup.search.placeholder",defaultMessage:"搜索工作组名称或描述"}),value:P,onChange:function(e){return U(e.target.value)},onSearch:function(e){console.log("搜索内容:",e)},enterButton:(0,E.jsx)(j.Z,{}),allowClear:!0,style:{width:"100%"}})}),(0,E.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 200px)"},onScroll:function(e){var t=e.currentTarget,n=t.scrollTop;t.scrollHeight-n-t.clientHeight<50&&H&&!O&&ce($+1,!0)},children:(0,E.jsx)(R.Z,{itemLayout:"horizontal",dataSource:Y.data.content,renderItem:function(e,t){return(0,E.jsx)(R.Z.Item,{style:ee.uid===e.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){oe(e)},children:(0,E.jsx)(R.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,E.jsx)(W.Z,{src:e.avatar}),title:(0,E.jsx)(E.Fragment,{children:n(e.nickname)}),description:n(e.description)})},e.uid)}})}),l&&(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(L,{open:l,onClose:function(){c(!1)},onSubmit:ge})}),ie]})},z=n(37963),O=n(16331),V=n(59908),I=n(92023),B=function(){var e,t,n=A.A.useForm(),o=p()(n,1)[0],s=(0,M.useIntl)(),u=(0,T.Z)().translateString,a=(0,b.E)((function(e){return e.agentResult})),l=(0,y.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),c=l.currentWorkgroup,f=l.setCurrentWorkgroup,m=(0,r.useState)((null===(e=c.agents)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]),x=p()(m,2),k=x[0],C=x[1],w=(0,r.useState)(""),j=p()(w,2),Z=j[0],S=j[1];(0,r.useEffect)((function(){if(c){var e;o.setFieldValue("nickname",u(null==c?void 0:c.nickname)),o.setFieldValue("description",u(null==c?void 0:c.description));var t=[];null===(e=c.agents)||void 0===e||e.forEach((function(e){t.push(e.uid)})),C(t)}}),[c]),(0,r.useEffect)((function(){c.agents&&(C(c.agents.map((function(e){return e.uid}))),o.setFieldsValue({agents:c.agents.map((function(e){return e.uid}))}))}),[c]);var q=function(){var e=g()(d()().mark((function e(t){var n,o;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),S(t),n=i()(i()({},c),{},{avatar:t}),e.next=5,(0,h.n1)(n);case 5:o=e.sent,console.log("updateAvatar response:",o),200===o.code?(v.yw.success(s.formatMessage({id:"update.success"})),f(o.data)):(v.yw.destroy(),v.yw.error(o.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=g()(d()().mark((function e(t){var n,o,r,u,a,l,g,p,m,x;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish",t),v.yw.loading(s.formatMessage({id:"updating"})),m=i()(i()(i()({},c),t),{},{avatar:Z,agentUids:k,serviceSettings:i()(i()({},c.serviceSettings),{},{welcomeFaqUids:null==c||null===(n=c.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),quickFaqUids:null==c||null===(o=c.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==c||null===(r=c.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==c||null===(u=c.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null===(a=c.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==c||null===(l=c.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))}),robotSettings:i()(i()({},c.robotSettings),{},{robotUid:null===(g=c.robotSettings)||void 0===g||null===(g=g.robot)||void 0===g?void 0:g.uid}),messageLeaveSettings:i()(i()({},c.messageLeaveSettings),{},{worktimeUids:null===(p=c.messageLeaveSettings)||void 0===p||null===(p=p.worktimes)||void 0===p?void 0:p.map((function(e){return e.uid}))}),queueSettings:i()({},c.queueSettings)}),console.log("workgroupObject:",m),e.next=6,(0,h.W5)(m);case 6:x=e.sent,console.log("updateWorkGroup response:",x),200===x.code?(v.yw.destroy(),v.yw.success(s.formatMessage({id:"update.success"})),f(x.data)):(v.yw.destroy(),v.yw.error(x.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){S(null==c?void 0:c.avatar)}),[c]),(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(A.A,{form:o,style:{marginLeft:"20px"},onFinish:R,children:[(0,E.jsx)(A.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:s.formatMessage({id:"avatar"}),children:(0,E.jsxs)(I.G,{onSuccess:q,onError:function(e){console.log("handleUploadError:",e),v.yw.error(e)},children:[(0,E.jsx)(W.Z,{src:Z}),(0,E.jsx)(F.ZP,{icon:(0,E.jsx)(V.Z,{}),children:s.formatMessage({id:"upload"})})]},"avatar")}),(0,E.jsx)(P.Z,{width:"md",name:"nickname",label:s.formatMessage({id:"nickname"}),rules:[{required:!0,message:s.formatMessage({id:"please.input.nickname"})}]}),(0,E.jsx)(U.Z,{name:"agents",label:s.formatMessage({id:"members"}),tooltip:s.formatMessage({id:"please.create.agents.tooltip"}),width:"md",initialValue:null===(t=c.agents)||void 0===t?void 0:t.map((function(e){return e.uid})),options:a.data.content.map((function(e){return{value:e.uid,label:u(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:s.formatMessage({id:"please.select.members"}),onChange:function(e){console.log("selected ".concat(e)),C(e)}},rules:[{required:!0,message:s.formatMessage({id:"please.select.members"})}]}),(0,E.jsx)(O.Z,{width:"md",name:"description",label:s.formatMessage({id:"description"}),rules:[{required:!0,message:s.formatMessage({id:"please.input.description"})}]})]})})},H=n(5488),N=n(72054),G=n(94146),Q=n(10826),$=(n(57057),n(74790),n(50027),n(59956)),X=n(3642),J=n(13750),K=n(20903),_=n(49616),Y=function(){var e=K.Z.useForm(),t=p()(e,1)[0],n=(0,M.useIntl)(),o=(0,y.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),s=o.currentWorkgroup,u=o.setCurrentWorkgroup,a=(0,r.useState)(H.vXk),l=p()(a,2),c=l[0],f=l[1];(0,r.useEffect)((function(){s&&(f(s.routingMode),t.setFieldValue("routingMode",s.routingMode))}),[s]);var m=function(){var e=g()(d()().mark((function e(t){var o,r,a,l,c,g,f,p,m,x;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),v.yw.loading(n.formatMessage({id:"workgroup.route.updating"})),m=i()(i()(i()({},s),t),{},{serviceSettings:i()(i()({},s.serviceSettings),{},{welcomeFaqUids:null==s||null===(o=s.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==s||null===(r=s.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null===(a=s.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==s||null===(l=s.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==s||null===(c=s.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==s||null===(g=s.serviceSettings)||void 0===g||null===(g=g.shortcutFaqs)||void 0===g?void 0:g.map((function(e){return e.uid}))}),robotSettings:i()(i()({},s.robotSettings),{},{robotUid:null==s||null===(f=s.robotSettings)||void 0===f||null===(f=f.robot)||void 0===f?void 0:f.uid}),messageLeaveSettings:i()(i()({},s.messageLeaveSettings),{},{worktimeUids:null==s||null===(p=s.messageLeaveSettings)||void 0===p||null===(p=p.worktimes)||void 0===p?void 0:p.map((function(e){return e.uid}))}),agentUids:s.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",m),e.next=6,(0,h.W5)(m);case 6:x=e.sent,console.log("updateWorkGroup response:",x),200===x.code?(v.yw.destroy(),v.yw.success(n.formatMessage({id:"workgroup.route.update.success"})),u(x.data)):(v.yw.destroy(),v.yw.error(n.formatMessage({id:"workgroup.route.update.error"})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,E.jsx)("div",{children:(0,E.jsxs)(A.A,{form:t,onFinish:m,submitter:{render:function(e,t){return(0,E.jsx)(_.Z,{children:t})}},children:[(0,E.jsx)(J.Z.Group,{name:"routingMode",label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.type",defaultMessage:"Route Type"}),options:[{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.roundRobin",defaultMessage:"Round Robin"}),value:H.vXk},{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.leastActive",defaultMessage:"Least Active"}),value:H.ZD$},{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.random",defaultMessage:"Random"}),value:H.owQ},{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.weightedRandom",defaultMessage:"Weighted Random"}),value:H.e2F},{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.consistentHash",defaultMessage:"Consistent Hash"}),value:H.zWk},{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.fastestResponse",defaultMessage:"Fastest Response"}),value:H.HQF},{label:(0,E.jsx)(M.FormattedMessage,{id:"workgroup.route.recent",defaultMessage:"Recent"}),value:H.WDq}],fieldProps:{value:c,onChange:function(e){console.log("radio checked",e.target.value),f(e.target.value)}}}),(0,E.jsxs)(A.A.Item,{children:[c===H.vXk&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.roundRobin.desc"})}),c===H.ZD$&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.leastActive.desc"})}),c===H.owQ&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.random.desc"})}),c===H.e2F&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.weightedRandom.desc"})}),c===H.zWk&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.consistentHash.desc"})}),c===H.HQF&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.fastestResponse.desc"})}),c===H.JEC&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.broadcast.desc"})}),c===H.WDq&&(0,E.jsx)("p",{children:n.formatMessage({id:"workgroup.route.recent.desc"})})]})]})})},ee=n(67072),te=(n(54822),n(65398),n(39120),function(){var e=(0,M.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"faq",label:(0,E.jsx)(M.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,E.jsx)(N.Z,{type:H.aZD})},{key:"quickFaqs",label:(0,E.jsx)(M.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"QuickButton"}),children:(0,E.jsx)(G.Z,{type:H.aZD})},{key:"rate",label:(0,E.jsx)(M.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,E.jsx)(Q.Z,{type:H.aZD})},{key:"right",label:(0,E.jsx)(M.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,E.jsx)(X.Z,{type:H.aZD})},{key:"popup",label:(0,E.jsx)(M.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,E.jsx)($.Z,{type:H.aZD})},{key:"trigger",label:(0,E.jsx)(M.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,E.jsx)(ee.Z,{type:H.aZD})},{key:"route",label:(0,E.jsx)(M.FormattedMessage,{id:"pages.workgroup.tab.route",defaultMessage:"Route"}),children:(0,E.jsx)(Y,{})}]}),[e]);return(0,E.jsx)(z.Z,{tabPosition:"left",items:t})}),ne=n(29787),oe=n(29591),re=n(21256),se=n(39328),ue=n(17323),ae=n(59847),ie=n(32871),le=n(64665),de=["fieldProps","proFieldProps"],ce=["fieldProps","proFieldProps"],ge="time",fe=r.forwardRef((function(e,t){var n=e.fieldProps,o=e.proFieldProps,s=(0,ue.Z)(e,de),u=(0,r.useContext)(ie.Z);return(0,E.jsx)(le.Z,(0,se.Z)({ref:t,fieldProps:(0,se.Z)({getPopupContainer:u.getPopupContainer},n),valueType:"timeRange",proFieldProps:o,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(e){return(0,ae.c)(e,"HH:mm:ss")}}},s))})),pe=function(e){var t=e.fieldProps,n=e.proFieldProps,o=(0,ue.Z)(e,ce),s=(0,r.useContext)(ie.Z);return(0,E.jsx)(le.Z,(0,se.Z)({fieldProps:(0,se.Z)({getPopupContainer:s.getPopupContainer},t),valueType:ge,proFieldProps:n,filedConfig:{customLightMode:!0,valueType:ge}},o))};pe.RangePicker=fe;var ve=pe,me=n(28977),he=n.n(me);function xe(e){return be.apply(this,arguments)}function be(){return(be=g()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.request)("/api/v1/worktime/create",{method:"POST",data:i()(i()({},t),{},{channel:H.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return ye.apply(this,arguments)}function ye(){return(ye=g()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.request)("/api/v1/worktime/update",{method:"POST",data:i()(i()({},t),{},{channel:H.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return we.apply(this,arguments)}function we(){return(we=g()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.request)("/api/v1/worktime/delete",{method:"POST",data:i()(i()({},t),{},{channel:H.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=n(33232),Me="HH:mm:ss",Ze=function(e){var t=e.type,n=A.A.useForm(),o=p()(n,1)[0],s=(0,M.useIntl)(),a=(0,r.useRef)(!1),l=(0,r.useRef)(),c=(0,b.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),f=c.currentAgent,x=c.setCurrentAgent,C=(0,y.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),w=C.currentWorkgroup,j=C.setCurrentWorkgroup,Z=(0,r.useState)([]),S=p()(Z,2),F=S[0],q=S[1],R=(0,k.u)((function(e){return e.currentOrg})),W=(0,T.Z)().translateString,P=(0,r.useState)([]),L=p()(P,2),D=L[0],z=L[1];(0,r.useEffect)((function(){var e,n,r,s,u;if(t===H.Njn)z(null==f||null===(e=f.messageLeaveSettings)||void 0===e?void 0:e.worktimes),o.setFieldValue("defaultRobot",null==f||null===(n=f.robotSettings)||void 0===n?void 0:n.defaultRobot),o.setFieldValue("offlineRobot",null==f||null===(r=f.robotSettings)||void 0===r?void 0:r.offlineRobot),o.setFieldValue("nonWorktimeRobot",null==f||null===(s=f.robotSettings)||void 0===s?void 0:s.nonWorktimeRobot),o.setFieldValue("robotUid",null==f||null===(u=f.robotSettings)||void 0===u||null===(u=u.robot)||void 0===u?void 0:u.uid);else if(t===H.aZD){var a,i,l,d,c;z(null==w||null===(a=w.messageLeaveSettings)||void 0===a?void 0:a.worktimes),o.setFieldValue("defaultRobot",null==w||null===(i=w.robotSettings)||void 0===i?void 0:i.defaultRobot),o.setFieldValue("offlineRobot",null==w||null===(l=w.robotSettings)||void 0===l?void 0:l.offlineRobot),o.setFieldValue("nonWorktimeRobot",null==w||null===(d=w.robotSettings)||void 0===d?void 0:d.nonWorktimeRobot),o.setFieldValue("robotUid",null==w||null===(c=w.robotSettings)||void 0===c||null===(c=c.robot)||void 0===c?void 0:c.uid)}}),[f,w]);var O=function(){var e=g()(d()().mark((function e(){var t,n,o;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=3;break}return console.log("isLoading: 1",a.current),e.abrupt("return");case 3:return a.current=!0,v.yw.loading("loading"),t={pageNumber:0,pageSize:50,type:H.f4h,orgUid:null==R?void 0:R.uid},e.next=8,(0,je.p0)(t);case 8:n=e.sent,console.log("queryRobotsByOrg: ",n),200===n.code?q(null===(o=n.data)||void 0===o?void 0:o.content):v.yw.error(n.message),a.current=!1,v.yw.destroy();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){O()}),[]);var V,I,B=function(){var e=g()(d()().mark((function e(n){var o,r,u,a,l,c,g,p,b,k,y,C,M,Z,S,F,q;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",n),!(n.defaultRobot||n.offlineRobot||n.nonWorktimeRobot)){e.next=5;break}if(n.robotUid){e.next=5;break}return v.yw.error("请选择客服机器人"),e.abrupt("return");case 5:if(v.yw.loading(s.formatMessage({id:"updating",defaultMessage:"updating"})),t!==H.Njn){e.next=16;break}return g=i()(i()({},f),{},{serviceSettings:i()(i()({},f.serviceSettings),{},{welcomeFaqUids:null==f||null===(o=f.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null===(r=f.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null===(u=f.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==f||null===(a=f.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==f||null===(l=f.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==f||null===(c=f.serviceSettings)||void 0===c||null===(c=c.shortcutFaqs)||void 0===c?void 0:c.map((function(e){return e.uid}))}),messageLeaveSettings:i()(i()({},f.messageLeaveSettings),{},{worktimeUids:D.map((function(e){return null==e?void 0:e.uid}))}),robotSettings:i()(i()({},f.robotSettings),{},{defaultRobot:n.defaultRobot,offlineRobot:n.offlineRobot,nonWorktimeRobot:n.nonWorktimeRobot,robotUid:n.robotUid}),maxThreadCount:(null==n?void 0:n.maxThreadCount)||10,autoReplySettings:i()({},f.autoReplySettings)}),console.log("agentObject:",g),e.next=11,(0,m.sE)(g);case 11:p=e.sent,console.log("updateAgent response:",p),200===p.code?(v.yw.destroy(),v.yw.success(s.formatMessage({id:"update.success"})),x(p.data)):(v.yw.destroy(),v.yw.error(p.message)),e.next=24;break;case 16:if(t!==H.aZD){e.next=24;break}return F=i()(i()({},w),{},{serviceSettings:i()(i()({},w.serviceSettings),{},{welcomeFaqUids:null==w||null===(b=w.serviceSettings)||void 0===b||null===(b=b.welcomeFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),quickFaqUids:null===(k=w.serviceSettings)||void 0===k||null===(k=k.quickFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),faqUids:null===(y=w.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==w||null===(C=w.serviceSettings)||void 0===C||null===(C=C.guessFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),hotFaqUids:null==w||null===(M=w.serviceSettings)||void 0===M||null===(M=M.hotFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),shortcutFaqUids:null==w||null===(Z=w.serviceSettings)||void 0===Z||null===(Z=Z.shortcutFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid}))}),messageLeaveSettings:i()(i()({},w.messageLeaveSettings),{},{worktimeUids:D.map((function(e){return null==e?void 0:e.uid}))}),robotSettings:i()(i()({},w.robotSettings),{},{defaultRobot:n.defaultRobot,offlineRobot:n.offlineRobot,nonWorktimeRobot:n.nonWorktimeRobot,robotUid:n.robotUid}),agentUids:null==w||null===(S=w.agents)||void 0===S?void 0:S.map((function(e){return e.uid}))}),console.log("workgroupObject:",F),e.next=21,(0,h.W5)(F);case 21:q=e.sent,console.log("updateWorkGroup response:",q),200===q.code?(v.yw.destroy(),v.yw.success(s.formatMessage({id:"update.success"})),j(q.data)):(v.yw.destroy(),v.yw.error(q.message));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=[];return D.map((function(t){e.push({worktime:[he()(t.startTime,Me),he()(t.endTime,Me)]})})),e},G=function(){var e=g()(d()().mark((function e(t,n,o){var r,s,u;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onWorktimeChange:",o,n),s={uid:null===(r=D[o])||void 0===r?void 0:r.uid,startTime:n[0],endTime:n[1]},e.next=4,ke(s);case 4:u=e.sent,console.log("updateWorktime response:",u),200===u.code||v.yw.error(u.message);case 7:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),Q=function(){var e=g()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createWorktime"),t={startTime:"00:00:00",endTime:"23:59:59"},e.next=4,xe(t);case 4:n=e.sent,console.log("createWorktime response:",n),200===n.code?z([].concat(u()(D),[n.data])):v.yw.error(n.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=g()(d()().mark((function e(t){var n,o,r,s;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWorktime:",t,null===(n=D[t])||void 0===n?void 0:n.uid),r={uid:null===(o=D[t])||void 0===o?void 0:o.uid},e.next=4,Ce(r);case 4:s=e.sent,console.log("deleteWorktime response:",s),200===s.code?z(D.filter((function(e,n){return n!==t}))):v.yw.error(s.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){console.log("worktimes:",D),o.setFieldValue("worktimes",N())}),[D]),(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(A.A,{form:o,style:{marginLeft:"20px"},onFinish:B,children:[(0,E.jsx)(oe.Z,{name:"defaultRobot",width:"md",label:"默认启用机器人"}),(0,E.jsx)(oe.Z,{name:"offlineRobot",width:"md",label:"无客服在线时启用机器人"}),(0,E.jsx)(oe.Z,{name:"nonWorktimeRobot",width:"md",label:"非工作时间启用机器人"}),(0,E.jsx)(re.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"工作时间区间，支持多个",creatorRecord:{worktime:[he()("00:00:00",Me),he()("23:59:59",Me)]},initialValue:N(),creatorButtonProps:{creatorButtonText:"添加",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"删除"},itemRender:function(e){var t=e.listDom,n=e.action;return(0,E.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[t,n]})},min:1,max:4,actionRef:l,actionGuard:{beforeAddRow:(I=g()(d()().mark((function e(t,n,o){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("beforeAddRow:",t,n),e.next=3,Q();case 3:return e.abrupt("return",new Promise((function(e){e(!0)})));case 4:case"end":return e.stop()}}),e)}))),function(e,t,n){return I.apply(this,arguments)}),beforeRemoveRow:(V=g()(d()().mark((function e(t,n){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("beforeRemoveRow:",t),e.next=3,$(t);case 3:return e.abrupt("return",new Promise((function(e){e(0!==t)})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return V.apply(this,arguments)})},children:function(e,t,n){return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(ve.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(e,n){G(e,n,t)},format:Me}},"worktime")})}}),(0,E.jsx)(U.Z,{name:"robotUid",label:"客服机器人",width:"md",options:F.map((function(e){return{value:e.uid,label:W(e.nickname)}})),fieldProps:{allowClear:!0,placeholder:"请选择客服机器人"}})]})})},Se=n(1155),Fe=n(92634),qe=n(27473),Re=n(53504),We=n(78875),Te=n(20228),Ae=n(79401),Pe=n(65532),Ue=n(82373),Ee=n(80556),Le=n(40074),De=n(58791),ze=n(61353),Oe=n(16852),Ve=n(40439),Ie=n(86994),Be=n(58087),He=n(10022),Ne=n(93689),Ge=n(75831),Qe=function(){var e=(0,M.useIntl)(),t=(0,r.useContext)(Ge.I).isDarkMode,n=(0,y.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),o=n.currentWorkgroup,s=n.setCurrentWorkgroup,u=(0,k.u)((function(e){return e.currentOrg})),a=(0,r.useState)(!1),l=p()(a,2),c=l[0],f=l[1],m=(0,r.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),x=p()(m,2),b=x[0],w=x[1],j={connectedAgentCount:(null==o?void 0:o.connectedAgentCount)||0,availableAgentCount:(null==o?void 0:o.availableAgentCount)||0,offlineAgentCount:(null==o?void 0:o.offlineAgentCount)||0,busyAgentCount:(null==o?void 0:o.busyAgentCount)||0,awayAgentCount:(null==o?void 0:o.awayAgentCount)||0},Z=function(){var t=g()(d()().mark((function t(){var n,r,s,a,i,l,c,g,p,m,h,x,b;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),f(!0),v.yw.info(e.formatMessage({id:"refresh",defaultMessage:"正在刷新队列数据..."})),t.prev=3,n={pageNumber:0,pageSize:100,agentUid:null==o?void 0:o.uid,orgUid:null==u?void 0:u.uid},t.next=7,(0,Fe.Wq)(n);case 7:r=t.sent,console.log("queryQueuesByOrg response:",r.data),200===(null==r?void 0:r.code)?(v.yw.destroy(),null!=r&&null!==(s=r.data)&&void 0!==s&&s.content&&r.data.content.length>0?(b=r.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),w({totalCount:null!==(a=b.totalCount)&&void 0!==a?a:0,queuingCount:null!==(i=b.queuingCount)&&void 0!==i?i:0,chattingCount:null!==(l=b.chattingCount)&&void 0!==l?l:0,offlineCount:null!==(c=b.offlineCount)&&void 0!==c?c:0,closedCount:null!==(g=b.closedCount)&&void 0!==g?g:0,leaveMsgCount:null!==(p=b.leaveMsgCount)&&void 0!==p?p:0,robotToAgentCount:null!==(m=b.robotToAgentCount)&&void 0!==m?m:0,avgWaitTime:null!==(h=b.avgWaitTime)&&void 0!==h?h:0,avgResolveTime:null!==(x=b.avgResolveTime)&&void 0!==x?x:0})):w({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):v.yw.error(null==r?void 0:r.message);case 10:return t.prev=10,f(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var e=g()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("requestWorkgroup"),t={pageNumber:0,pageSize:100,uid:null==o?void 0:o.uid,orgUid:null==u?void 0:u.uid},e.next=4,(0,h.c$)(t);case 4:n=e.sent,console.log("queryWorkgroupByUid response:",n),200===(null==n?void 0:n.code)&&(v.yw.destroy(),s(n.data));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){Z()}),[o]);var q={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},R={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,E.jsxs)("div",{style:{padding:"4px"},children:[(0,E.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,E.jsx)(qe.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"刷新数据"}),children:(0,E.jsx)(F.ZP,{type:"primary",icon:(0,E.jsx)(Ee.Z,{}),loading:c,onClick:function(){console.log("handleRefresh"),Z(),S()},size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})})})}),(0,E.jsxs)(Re.Z,{spinning:c,children:[(0,E.jsxs)(We.Z,{gutter:[16,16],children:[(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.totalCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"总会话"}),value:b.totalCount,prefix:(0,E.jsx)(Le.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.queuingCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"排队中"}),value:b.queuingCount,prefix:(0,E.jsx)(De.Z,{}),valueStyle:{color:"#fa8c16"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.chattingCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"会话中"}),value:b.chattingCount,prefix:(0,E.jsx)(ze.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.offlineCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"离线留言"}),value:b.offlineCount,prefix:(0,E.jsx)(Oe.Z,{}),valueStyle:{color:"#8c8c8c"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.closedCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"已关闭"}),value:b.closedCount,prefix:(0,E.jsx)(Ve.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.leaveMsgCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"留言数"}),value:b.leaveMsgCount,prefix:(0,E.jsx)(Ie.Z,{}),valueStyle:{color:R.leaveMsgCount.valueColor}})})})]}),(0,E.jsx)(Ue.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"更多统计"})}),(0,E.jsx)(We.Z,{gutter:[16,16],children:(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.robotToAgentCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"转人工数"}),value:b.robotToAgentCount,prefix:(0,E.jsx)(Be.Z,{}),valueStyle:{color:R.robotToAgentCount.valueColor}})})})}),(0,E.jsx)(Ue.Z,{style:{margin:"16px 0",fontSize:"14px"},children:"客服状态"}),(0,E.jsxs)(We.Z,{gutter:[16,16],children:[(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.totalCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"agent.connectedCount",defaultMessage:"在线客服"}),value:j.connectedAgentCount,prefix:(0,E.jsx)(He.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.queuingCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"agent.availableCount",defaultMessage:"空闲客服"}),value:j.availableAgentCount,prefix:(0,E.jsx)(Ne.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,E.jsx)(Te.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,E.jsx)(Ae.Z,{style:i()(i()({},q),{},{backgroundColor:R.chattingCount.bg}),hoverable:!0,children:(0,E.jsx)(Pe.Z,{title:e.formatMessage({id:"agent.busyCount",defaultMessage:"忙碌客服"}),value:j.busyAgentCount,prefix:(0,E.jsx)(C.Z,{}),valueStyle:{color:"#fa8c16"}})})})]})]})]})},$e=n(18580),Xe=function(){var e=(0,M.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,E.jsx)(B,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,E.jsx)(Se.Z,{type:H.aZD})},{key:"robot",label:e.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,E.jsx)(Ze,{type:H.aZD})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,E.jsx)(te,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,E.jsx)(Qe,{}),disabled:!(0,$e.OJ)()},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,E.jsx)(ne.Z,{type:H.aZD})}]}),[e]);return(0,E.jsx)(z.Z,{defaultActiveKey:"basic",items:t})},Je=n(74424),Ke=function(){var e=(0,Je.Z)(),t=e.leftSiderStyle,n=e.contentStyle;return(0,E.jsxs)(o.Z,{style:{height:"100%"},children:[(0,E.jsx)(o.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:t,children:(0,E.jsx)(D,{})}),(0,E.jsx)(o.Z.Panel,{style:n,children:(0,E.jsx)(Xe,{})})]})}}}]);