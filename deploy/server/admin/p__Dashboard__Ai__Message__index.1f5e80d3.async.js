"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1206],{11090:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(73743),r=a(44194),n={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},i=a(54183),o=function(e,t){return r.createElement(i.Z,(0,s.Z)({},e,{ref:t,icon:n}))};var c=r.forwardRef(o)},2484:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(73743),r=a(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},i=a(54183),o=function(e,t){return r.createElement(i.Z,(0,s.Z)({},e,{ref:t,icon:n}))};var c=r.forwardRef(o)},27938:function(e,t,a){var s=(0,a(37404).i)("Column");t.Z=s},69397:function(e,t,a){a.d(t,{Jr:function(){return h},LF:function(){return l},Oh:function(){return x},WS:function(){return g}});var s=a(90819),r=a.n(s),n=a(73193),i=a.n(n),o=a(89933),c=a.n(o),d=a(18232),u=a(43906);function l(e){return p.apply(this,arguments)}function p(){return(p=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/query/org",{method:"GET",params:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/create",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/update",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/delete",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},32837:function(e,t,a){a.r(t),a.d(t,{default:function(){return ce}});var s=a(75002),r=a(43906),n=a(69880),i=a(84176),o=a.n(i),c=a(86222),d=a.n(c),u=a(10154),l=a.n(u),p=a(73193),h=a.n(p),f=a(90819),g=a.n(f),m=a(89933),x=a.n(m),v=a(45332),M=a.n(v),k=a(55567),y=a(28619),j=a(9942),w=a(54881),b=a(2484),F=a(46336),T=a(68060),S=a(97868),Z=a(41313),R=a(86675),I=a(30915),q=a(39686),C=a(41994),D=a(34353),P=a(64827),A=a(60762),U=a(99098),Y=a(46030),z=a(44194),E=a(18232);function O(e){return J.apply(this,arguments)}function J(){return(J=x()(g()().mark((function e(t){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/v1/statistic/token/query/org",{method:"GET",params:h()(h()({},t),{},{channel:E.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return X.apply(this,arguments)}function X(){return(X=x()(g()().mark((function e(t){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/v1/statistic/token/delete",{method:"POST",data:h()(h()({},t),{},{channel:E.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return H.apply(this,arguments)}function H(){return(H=x()(g()().mark((function e(t,a){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/v1/statistic/token/hourly",{method:"GET",params:{orgUid:t,date:a,channel:E.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t,a){return N.apply(this,arguments)}function N(){return(N=x()(g()().mark((function e(t,a,s){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/v1/statistic/token/hourly/provider",{method:"GET",params:{orgUid:t,date:a,aiProvider:s,channel:E.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,a){return Q.apply(this,arguments)}function Q(){return(Q=x()(g()().mark((function e(t,a,s){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/v1/statistic/token/hourly/model",{method:"GET",params:{orgUid:t,date:a,aiModelType:s,channel:E.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=a(28661),V=a(69397),W=a(44064),_=a(27938),ee=a(28977),te=a.n(ee),ae=a(31549),se=["current","pageSize"],re=T.Z.Title,ne=S.Z.Option,ie=function(){var e=(0,r.useIntl)(),t=(0,z.useRef)(),a=((0,y.Z)().translateString,(0,j.u)((function(e){return e.currentOrg}))),s=(0,z.useState)(1),n=M()(s,2),i=(n[0],n[1]),c=(0,z.useState)(10),u=M()(c,2),p=(u[0],u[1]),f=(0,z.useState)([]),m=M()(f,2),v=m[0],T=m[1],J=(0,z.useState)([]),X=M()(J,2),H=X[0],N=X[1],Q=(0,z.useState)(0),ee=M()(Q,2),ie=(ee[0],ee[1]),oe=(0,z.useState)({}),ce=M()(oe,2),de=(ce[0],ce[1]),ue=(0,z.useState)(te()().format("YYYY-MM-DD")),le=M()(ue,2),pe=le[0],he=le[1],fe=(0,z.useState)(""),ge=M()(fe,2),me=ge[0],xe=ge[1],ve=(0,z.useState)(""),Me=M()(ve,2),ke=Me[0],ye=Me[1],je=(0,z.useState)([]),we=M()(je,2),be=we[0],Fe=we[1],Te=(0,z.useState)(!1),Se=M()(Te,2),Ze=Se[0],Re=Se[1],Ie=(0,z.useState)([]),qe=M()(Ie,2),Ce=qe[0],De=qe[1],Pe=(0,z.useState)({}),Ae=M()(Pe,2),Ue=Ae[0],Ye=Ae[1],ze=(0,z.useState)(!1),Ee=M()(ze,2),Oe=Ee[0],Je=Ee[1],Be=(0,z.useState)(!1),Xe=M()(Be,2),Le=Xe[0],He=Xe[1];(0,z.useEffect)((function(){null!=a&&a.uid&&Ge()}),[null==a?void 0:a.uid]);var Ge=function(){var e=x()(g()().mark((function e(){var t,s,r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He(!0),e.prev=1,t={pageNumber:0,pageSize:100,sortBy:"createdAt",sortDirection:"ascend",orgUid:null==a?void 0:a.uid,level:E.whQ},e.next=5,(0,$.mK)(t);case 5:200===(s=e.sent).code?(r=s.data.content||[],De(r)):k.yw.error(s.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to fetch providers:",e.t0);case 12:return e.prev=12,He(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var t=x()(g()().mark((function t(s){var r,n,i,o;return g()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a&&a.uid&&!Ue[s]){t.next=2;break}return t.abrupt("return");case 2:if(Je(!0),t.prev=3,r=Ce.find((function(e){return e.name===s}))){t.next=7;break}return t.abrupt("return");case 7:return n={pageNumber:0,pageSize:50,providerUid:r.uid,orgUid:a.uid,level:E.whQ},t.next=10,(0,V.LF)(n);case 10:200===(i=t.sent).code?(o=i.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,type:e.type,providerName:r.name}})),Ye((function(e){return h()(h()({},e),{},l()({},s,o))}))):k.yw.error(i.message),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),console.error("Failed to fetch models:",t.t0),k.yw.error(e.formatMessage({id:"error"}));case 18:return t.prev=18,Je(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[3,14,18,21]])})));return function(e){return t.apply(this,arguments)}}(),Ke=function(e){xe(e),ye(""),e&&!Ue[e]&&Ne(e)},Qe=function(){var t=x()(g()().mark((function t(){var s,r;return g()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a&&a.uid){t.next=2;break}return t.abrupt("return");case 2:if(Re(!0),t.prev=3,!me||!ke){t.next=10;break}return t.next=7,G(a.uid,pe,me);case 7:r=t.sent,t.next=25;break;case 10:if(!me){t.next=16;break}return t.next=13,G(a.uid,pe,me);case 13:r=t.sent,t.next=25;break;case 16:if(!ke){t.next=22;break}return t.next=19,K(a.uid,pe,ke);case 19:r=t.sent,t.next=25;break;case 22:return t.next=24,L(a.uid,pe);case 24:r=t.sent;case 25:200===r.code&&null!==(s=r.data)&&void 0!==s&&s.hourlyData?Fe(r.data.hourlyData):Fe([]),t.next=33;break;case 28:t.prev=28,t.t0=t.catch(3),console.error("Failed to fetch hourly data:",t.t0),k.yw.error(e.formatMessage({id:"statistic.token.chart.load.error",defaultMessage:"Failed to load chart data"})),Fe([]);case 33:return t.prev=33,Re(!1),t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[3,28,33,36]])})));return function(){return t.apply(this,arguments)}}();(0,z.useEffect)((function(){Qe()}),[pe,me,ke,null==a?void 0:a.uid]);var $e,Ve={data:be.map((function(t){return{hour:"".concat(t.hour,":00"),value:t.totalTokens||0,type:e.formatMessage({id:"statistic.token.chart.totalTokens",defaultMessage:"Total Tokens"})}})),xField:"hour",yField:"value",seriesField:"type",smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},color:"#1890ff",point:{size:5,shape:"diamond"},tooltip:{showCrosshairs:!0,shared:!0}},We={data:be.map((function(t){return{hour:"".concat(t.hour,":00"),value:t.totalCost||0,type:e.formatMessage({id:"statistic.token.chart.totalCost",defaultMessage:"Total Cost ($)"})}})),xField:"hour",yField:"value",seriesField:"type",smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},color:"#52c41a",point:{size:5,shape:"diamond"},tooltip:{showCrosshairs:!0,shared:!0}},_e={data:be.flatMap((function(t){return[{hour:"".concat(t.hour,":00"),value:t.successRequests||0,type:e.formatMessage({id:"statistic.token.chart.success",defaultMessage:"Success"})},{hour:"".concat(t.hour,":00"),value:t.failedRequests||0,type:e.formatMessage({id:"statistic.token.chart.failed",defaultMessage:"Failed"})}]})),xField:"hour",yField:"value",seriesField:"type",isGroup:!0,columnStyle:{radius:[20,20,0,0]},color:["#52c41a","#ff4d4f"],tooltip:{showCrosshairs:!0,shared:!0}},et={data:be.map((function(t){return{hour:"".concat(t.hour,":00"),value:t.avgResponseTime||0,type:e.formatMessage({id:"statistic.token.chart.avgResponseTime",defaultMessage:"Avg Response Time (ms)"})}})),xField:"hour",yField:"value",seriesField:"type",smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},color:"#722ed1",point:{size:5,shape:"diamond"},tooltip:{showCrosshairs:!0,shared:!0}},tt=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,ae.jsx)(r.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,fixed:"left"},{title:(0,ae.jsx)(r.FormattedMessage,{id:"ai.provider",defaultMessage:"AI Provider"}),dataIndex:"aiProvider",width:120,copyable:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.aiProvider.tooltip"})},{title:(0,ae.jsx)(r.FormattedMessage,{id:"ai.model",defaultMessage:"AI Model"}),dataIndex:"aiModelType",width:120,copyable:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.aiModelType.tooltip"})},{title:(0,ae.jsx)(r.FormattedMessage,{id:"ai.tokens.prompt",defaultMessage:"Prompt Tokens"}),dataIndex:"promptTokens",width:140,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.promptTokens.tooltip"}),render:function(e,t){var a=t.promptTokens;return a?(0,ae.jsx)(Z.Z,{color:"blue",children:a.toLocaleString()}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"ai.tokens.completion",defaultMessage:"Completion Tokens"}),dataIndex:"completionTokens",width:160,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.completionTokens.tooltip"}),render:function(e,t){var a=t.completionTokens;return a?(0,ae.jsx)(Z.Z,{color:"green",children:a.toLocaleString()}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"ai.tokens.total",defaultMessage:"Total Tokens"}),dataIndex:"totalTokens",width:140,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.totalTokens.tooltip"}),render:function(e,t){var a=t.totalTokens;return a?(0,ae.jsx)(Z.Z,{color:"orange",children:a.toLocaleString()}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.totalRequests",defaultMessage:"Total Requests"}),dataIndex:"totalRequests",width:140,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.totalRequests.tooltip"}),render:function(e,t){var a=t.totalRequests;return a?(0,ae.jsx)(Z.Z,{color:"geekblue",children:a.toLocaleString()}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.successRequests",defaultMessage:"Success Requests"}),dataIndex:"successRequests",width:140,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.successRequests.tooltip"}),render:function(e,t){var a=t.successRequests;return a?(0,ae.jsx)(Z.Z,{color:"success",children:a.toLocaleString()}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.failedRequests",defaultMessage:"Failed Requests"}),dataIndex:"failedRequests",width:140,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.failedRequests.tooltip"}),render:function(e,t){var a=t.failedRequests;return a?(0,ae.jsx)(Z.Z,{color:"error",children:a.toLocaleString()}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.successRate",defaultMessage:"Success Rate"}),dataIndex:"successRate",width:120,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.successRate.tooltip"}),render:function(e,t){var a=t.totalRequests||0,s=t.successRequests||0;if(0===a)return"-";var r=(s/a*100).toFixed(1);return(0,ae.jsx)(R.Z,{status:Number(r)>=90?"success":Number(r)>=70?"warning":"error",text:"".concat(r,"%")})}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.tokenUnitPrice",defaultMessage:"Token Unit Price"}),dataIndex:"tokenUnitPrice",width:140,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.tokenUnitPrice.tooltip"}),render:function(e,t){var a=t.tokenUnitPrice;return a?(0,ae.jsxs)(Z.Z,{color:"gold",children:["$",a.toFixed(6)]}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.totalCost",defaultMessage:"Total Cost"}),dataIndex:"totalCost",width:120,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.totalCost.tooltip"}),render:function(e,t){var a=t.totalCost;return a?(0,ae.jsxs)(Z.Z,{color:"volcano",children:["$",a.toFixed(4)]}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.avgResponseTime",defaultMessage:"Avg Response Time"}),dataIndex:"avgResponseTime",width:160,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.avgResponseTime.tooltip"}),render:function(e,t){var a=t.avgResponseTime;return a?(0,ae.jsxs)(Z.Z,{color:"magenta",children:[a.toFixed(0),"ms"]}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.hour",defaultMessage:"Hour"}),dataIndex:"hour",width:80,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.hour.tooltip"}),render:function(e,t){var a=t.hour;return null==a?"-":(0,ae.jsxs)(Z.Z,{color:"lime",children:[a,":00"]})}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.date",defaultMessage:"Date"}),dataIndex:"date",width:120,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.date.tooltip"}),render:function(e,t){var a=t.date;return a?(0,ae.jsx)(Z.Z,{color:"blue",children:a}):"-"}},{title:(0,ae.jsx)(r.FormattedMessage,{id:"createdAt",defaultMessage:"Created At"}),key:"createdAt",dataIndex:"createdAt",width:180,sorter:!0,hideInSearch:!0,tooltip:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.createdAt.tooltip"})},{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,fixed:"right",render:function(t,a,s,r){return[(0,ae.jsx)(I.Z,{title:e.formatMessage({id:"deleteTip"}),description:"".concat(e.formatMessage({id:"deleteAffirm"}),"【").concat(null==a?void 0:a.uid,"】？"),onConfirm:function(){return at(a)},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"}),children:(0,ae.jsx)("a",{style:{color:"red"},children:e.formatMessage({id:"delete",defaultMessage:"删除"})})},"delete")]}}],at=function(){var a=x()(g()().mark((function a(s){var r,n;return g()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("handleDeleteConfirm",s),k.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),a.prev=2,a.next=5,B(s);case 5:r=a.sent,k.yw.destroy(),200===r.code?(k.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null==t||null===(n=t.current)||void 0===n||n.reload()):k.yw.error(r.message||e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"})),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),k.yw.destroy(),k.yw.error(e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}(),st=function(){var a=x()(g()().mark((function a(){var s,r,n,i,o,c;return g()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==H.length){a.next=3;break}return k.yw.warning(e.formatMessage({id:"batch.delete.noselection",defaultMessage:"Please select items to delete"})),a.abrupt("return");case 3:k.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),r=0,n=0,i=d()(H),a.prev=7,i.s();case 9:if((o=i.n()).done){a.next=23;break}return c=o.value,a.prev=11,a.next=14,B(c);case 14:200===a.sent.code?r++:n++,a.next=21;break;case 18:a.prev=18,a.t0=a.catch(11),n++;case 21:a.next=9;break;case 23:a.next=28;break;case 25:a.prev=25,a.t1=a.catch(7),i.e(a.t1);case 28:return a.prev=28,i.f(),a.finish(28);case 31:k.yw.destroy(),0===n?k.yw.success(e.formatMessage({id:"batch.delete.success",defaultMessage:"Successfully deleted {count} items"},{count:r})):k.yw.warning(e.formatMessage({id:"batch.delete.partial",defaultMessage:"Deleted {success} items, failed to delete {fail} items"},{success:r,fail:n})),T([]),N([]),null===(s=t.current)||void 0===s||s.reloadAndRest();case 36:case"end":return a.stop()}}),a,null,[[7,25,28,31],[11,18]])})));return function(){return a.apply(this,arguments)}}(),rt={selectedRowKeys:v,onChange:function(e,t){T(e),N(t)}};return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(P.Z,{style:{marginBottom:16},children:[(0,ae.jsx)(re,{level:4,children:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.title",defaultMessage:"Token Usage Statistics"})}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(P.Z,{style:{marginBottom:16},children:(0,ae.jsxs)(A.Z,{gutter:16,align:"middle",children:[(0,ae.jsxs)(U.Z,{children:[(0,ae.jsxs)("span",{style:{marginRight:8},children:[(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.date",defaultMessage:"Date"}),":"]}),(0,ae.jsx)(Y.default,{value:te()(pe),onChange:function(e){return he(e?e.format("YYYY-MM-DD"):te()().format("YYYY-MM-DD"))},format:"YYYY-MM-DD",style:{width:150}})]}),(0,ae.jsxs)(U.Z,{children:[(0,ae.jsxs)("span",{style:{marginRight:8},children:[(0,ae.jsx)(r.FormattedMessage,{id:"ai.provider",defaultMessage:"AI Provider"}),":"]}),(0,ae.jsx)(S.Z,{value:me,onChange:Ke,allowClear:!0,loading:Le,placeholder:e.formatMessage({id:"statistic.token.chart.select.provider",defaultMessage:"Select Provider"}),style:{width:150},children:Ce.map((function(e){return(0,ae.jsx)(ne,{value:e.name,children:e.nickname},e.name)}))})]}),(0,ae.jsxs)(U.Z,{children:[(0,ae.jsxs)("span",{style:{marginRight:8},children:[(0,ae.jsx)(r.FormattedMessage,{id:"ai.model",defaultMessage:"AI Model"}),":"]}),(0,ae.jsx)(S.Z,{value:ke,onChange:function(e){return ye(e)},allowClear:!0,loading:Oe,placeholder:e.formatMessage({id:"statistic.token.chart.select.model",defaultMessage:"Select Model"}),style:{width:150},children:null===($e=Ue[me])||void 0===$e?void 0:$e.map((function(e){return(0,ae.jsx)(ne,{value:e.value,children:e.label},e.value)}))})]}),(0,ae.jsx)(U.Z,{children:(0,ae.jsx)(D.ZP,{type:"primary",onClick:Qe,loading:Ze,children:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.refresh",defaultMessage:"Refresh"})})})]})}),(0,ae.jsxs)(A.Z,{gutter:[16,16],children:[(0,ae.jsx)(U.Z,{span:12,children:(0,ae.jsx)(P.Z,{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.tokenUsage",defaultMessage:"Token Usage by Hour"}),children:(0,ae.jsx)(W.Z,h()(h()({},Ve),{},{height:300}))})}),(0,ae.jsx)(U.Z,{span:12,children:(0,ae.jsx)(P.Z,{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.cost",defaultMessage:"Cost by Hour"}),children:(0,ae.jsx)(W.Z,h()(h()({},We),{},{height:300}))})}),(0,ae.jsx)(U.Z,{span:12,children:(0,ae.jsx)(P.Z,{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.requests",defaultMessage:"Request Statistics by Hour"}),children:(0,ae.jsx)(_.Z,h()(h()({},_e),{},{height:300}))})}),(0,ae.jsx)(U.Z,{span:12,children:(0,ae.jsx)(P.Z,{title:(0,ae.jsx)(r.FormattedMessage,{id:"statistic.token.chart.responseTime",defaultMessage:"Average Response Time by Hour"}),children:(0,ae.jsx)(W.Z,h()(h()({},et),{},{height:300}))})})]})]})]}),(0,ae.jsx)(P.Z,{children:(0,ae.jsx)(F.Z,{columns:tt,actionRef:t,cardBordered:!0,rowSelection:rt,scroll:{x:3e3},request:function(){var e=x()(g()().mark((function e(t,s,r){var n,c,d,u,l,h,f,m;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,s,r),n=t.current,c=t.pageSize,d=o()(t,se),i(n),p(c),de(d),u=void 0,l=void 0,s&&Object.keys(s).length>0&&(h=Object.keys(s)[0],u=h,l="ascend"===s[h]?"ascend":"descend"),f={pageNumber:n-1,pageSize:c,orgUid:null==a?void 0:a.uid,aiProvider:d.aiProvider,aiModelType:d.aiModelType,status:d.status,sortBy:u,sortDirection:l},e.next=11,O(f);case 11:return m=e.sent,console.log("queryStatisticTokenByOrg response:",f,m),200===m.code?ie(m.data.totalElements):k.yw.error(m.message),e.abrupt("return",{data:m.data.content,success:!0,total:m.data.totalElements});case 15:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"Token统计",toolBarRender:function(){return t=[],a=[],v.length>0&&a.push({key:"batchDelete",icon:(0,ae.jsx)(w.Z,{}),danger:!0,label:e.formatMessage({id:"batch.delete"})+" (".concat(v.length,")"),onClick:function(){q.Z.confirm({title:e.formatMessage({id:"batch.deleteTip"}),content:"".concat(e.formatMessage({id:"batch.deleteAffirm"})," ").concat(v.length," ").concat(e.formatMessage({id:"items"}),"?"),onOk:st,okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}}),a.length>0&&t.push((0,ae.jsx)(C.Z,{menu:{items:a},placement:"bottom",children:(0,ae.jsxs)(D.ZP,{type:v.length>0?"primary":"default",danger:v.length>0,children:[v.length>0?e.formatMessage({id:"batch.operations",defaultMessage:"批量操作"})+" (".concat(v.length,")"):e.formatMessage({id:"more.operations",defaultMessage:"更多操作"}),(0,ae.jsx)(b.Z,{})]})},"batchOperations")),t;var t,a}})})]})},oe=a(81343),ce=function(){var e=(0,r.useIntl)(),t=[{key:"robotMessage",label:e.formatMessage({id:"message.tab.robot"}),children:(0,ae.jsx)(n.Z,{})}];return(0,oe.OJ)()&&t.push({key:"statisticToken",label:e.formatMessage({id:"message.tab.statisticToken"}),children:(0,ae.jsx)(ie,{})}),(0,ae.jsx)(ae.Fragment,{children:(0,ae.jsx)(s.Z,{defaultActiveKey:"message",items:t,style:{margin:10}})})}}}]);