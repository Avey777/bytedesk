"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9788],{27530:function(e,s,n){n.r(s),n.d(s,{default:function(){return A}});var t=n(90819),l=n.n(t),i=n(89933),r=n.n(i),o=n(45332),c=n.n(o),a=n(44194),d=n(25950),u=n(34251),m=n(41123),x=n(8957),h=n(43443),j=n(43413),Z=n(77407),p=n(63065),y=n(68525),f=n(58896),v=n(41881),g=n(35911),b=n(12715),I=n(24418),k=n(61629),q=n(31549),D=function(e){var s,n=e.visible,t=e.onClose,l=e.sessionData;return(0,q.jsx)(I.Z,{title:"会话详情",width:800,open:n,onClose:t,extra:(0,q.jsx)(j.Z,{children:(0,q.jsx)(Z.ZP,{onClick:t,children:"关闭"})}),children:l&&(0,q.jsxs)("div",{children:[(0,q.jsxs)(k.Z,{title:"基本信息",bordered:!0,style:{marginBottom:24},children:[(0,q.jsx)(k.Z.Item,{label:"会话ID",children:l.sessionId}),(0,q.jsx)(k.Z.Item,{label:"客服",children:l.agent}),(0,q.jsx)(k.Z.Item,{label:"客户",children:l.customer}),(0,q.jsx)(k.Z.Item,{label:"质检评分",children:(0,q.jsxs)(h.Z,{color:l.score>=90?"green":l.score>=80?"orange":"red",children:[l.score,"分"]})}),(0,q.jsx)(k.Z.Item,{label:"质检状态",children:(0,q.jsx)(h.Z,{color:"已质检"===l.status?"green":"blue",children:l.status})}),(0,q.jsx)(k.Z.Item,{label:"质检时间",children:l.qualityTime})]}),(0,q.jsx)(p.Z,{title:"对话记录",style:{marginBottom:24},children:(0,q.jsx)("div",{style:{maxHeight:400,overflowY:"auto"},children:null===(s=l.messages)||void 0===s?void 0:s.map((function(e,s){return(0,q.jsxs)("div",{style:{marginBottom:16,padding:12,backgroundColor:e.sender===l.agent?"#f0f9ff":"#f0f0f0",borderRadius:8,borderLeft:"4px solid ".concat(e.sender===l.agent?"#1890ff":"#52c41a")},children:[(0,q.jsxs)("div",{style:{fontWeight:"bold",marginBottom:4},children:[e.sender," ",(0,q.jsx)("span",{style:{fontSize:12,color:"#666"},children:e.time})]}),(0,q.jsx)("div",{children:e.content})]},s)}))})}),l.qualityDetails&&(0,q.jsx)(p.Z,{title:"质检详情",children:(0,q.jsxs)(k.Z,{column:2,children:[(0,q.jsx)(k.Z.Item,{label:"响应速度",children:(0,q.jsxs)(h.Z,{color:"blue",children:[l.qualityDetails.responseTime,"星"]})}),(0,q.jsx)(k.Z.Item,{label:"准确性",children:(0,q.jsxs)(h.Z,{color:"blue",children:[l.qualityDetails.accuracy,"星"]})}),(0,q.jsx)(k.Z.Item,{label:"礼貌性",children:(0,q.jsxs)(h.Z,{color:"blue",children:[l.qualityDetails.politeness,"星"]})}),(0,q.jsx)(k.Z.Item,{label:"完整性",children:(0,q.jsxs)(h.Z,{color:"blue",children:[l.qualityDetails.completeness,"星"]})}),(0,q.jsx)(k.Z.Item,{label:"质检评语",span:2,children:l.qualityDetails.comments})]})})]})})},C=n(34651),w=n(4019),T=d.Z.TextArea,P=function(e){var s,n=e.visible,t=e.onClose,i=e.sessionData,o=e.onSubmit,d=C.Z.useForm(),u=c()(d,1)[0];a.useEffect((function(){var e,s,t,l,r;n&&i&&u.setFieldsValue({responseTime:(null===(e=i.qualityDetails)||void 0===e?void 0:e.responseTime)||0,accuracy:(null===(s=i.qualityDetails)||void 0===s?void 0:s.accuracy)||0,politeness:(null===(t=i.qualityDetails)||void 0===t?void 0:t.politeness)||0,completeness:(null===(l=i.qualityDetails)||void 0===l?void 0:l.completeness)||0,comments:(null===(r=i.qualityDetails)||void 0===r?void 0:r.comments)||""})}),[n,i,u]);var m=function(){var e=r()(l()().mark((function e(){var s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.validateFields();case 3:return s=e.sent,e.next=6,o(s);case 6:u.resetFields(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("表单验证失败:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),x=function(){u.resetFields(),t()};return(0,q.jsx)(I.Z,{title:"重新质检",width:600,open:n,onClose:x,extra:(0,q.jsxs)(j.Z,{children:[(0,q.jsx)(Z.ZP,{onClick:x,children:"取消"}),(0,q.jsx)(Z.ZP,{type:"primary",onClick:m,children:"提交"})]}),children:i&&(0,q.jsxs)("div",{children:[(0,q.jsxs)(k.Z,{title:"会话信息",bordered:!0,style:{marginBottom:24},children:[(0,q.jsx)(k.Z.Item,{label:"会话ID",children:i.sessionId}),(0,q.jsx)(k.Z.Item,{label:"客服",children:i.agent}),(0,q.jsx)(k.Z.Item,{label:"客户",children:i.customer})]}),(0,q.jsx)(p.Z,{title:"对话记录预览",style:{marginBottom:24},children:(0,q.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},children:null===(s=i.messages)||void 0===s?void 0:s.slice(-3).map((function(e,s){return(0,q.jsxs)("div",{style:{marginBottom:8,padding:8,backgroundColor:e.sender===i.agent?"#f0f9ff":"#f0f0f0",borderRadius:4,fontSize:12},children:[(0,q.jsxs)("strong",{children:[e.sender,":"]})," ",e.content]},s)}))})}),(0,q.jsxs)(C.Z,{form:u,layout:"vertical",children:[(0,q.jsx)(C.Z.Item,{label:"响应速度",name:"responseTime",rules:[{required:!0,message:"请评分响应速度"}],children:(0,q.jsx)(w.Z,{})}),(0,q.jsx)(C.Z.Item,{label:"准确性",name:"accuracy",rules:[{required:!0,message:"请评分准确性"}],children:(0,q.jsx)(w.Z,{})}),(0,q.jsx)(C.Z.Item,{label:"礼貌性",name:"politeness",rules:[{required:!0,message:"请评分礼貌性"}],children:(0,q.jsx)(w.Z,{})}),(0,q.jsx)(C.Z.Item,{label:"完整性",name:"completeness",rules:[{required:!0,message:"请评分完整性"}],children:(0,q.jsx)(w.Z,{})}),(0,q.jsx)(C.Z.Item,{label:"质检评语",name:"comments",rules:[{required:!0,message:"请输入质检评语"}],children:(0,q.jsx)(T,{rows:4,placeholder:"请输入质检评语..."})})]})]})})},S=d.Z.Search,B=u.Z.Option,z=m.default.RangePicker,A=function(){var e=(0,a.useState)(!1),s=c()(e,2),n=s[0],t=s[1],i=(0,a.useState)(!1),o=c()(i,2),d=o[0],m=o[1],I=(0,a.useState)(null),k=c()(I,2),C=k[0],w=k[1],T=function(){var e=r()(l()().mark((function e(s){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("质检结果:",s),x.ZP.success("质检结果提交成功"),m(!1)}catch(e){x.ZP.error("提交失败，请重试")}case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),A=[{title:"会话ID",dataIndex:"sessionId",key:"sessionId"},{title:"客服",dataIndex:"agent",key:"agent"},{title:"客户",dataIndex:"customer",key:"customer"},{title:"质检评分",dataIndex:"score",key:"score",render:function(e){return(0,q.jsxs)(h.Z,{color:e>=90?"green":e>=80?"orange":"red",children:[e,"分"]})}},{title:"质检状态",dataIndex:"status",key:"status",render:function(e){return(0,q.jsx)(h.Z,{color:"已质检"===e?"green":"blue",children:e})}},{title:"质检时间",dataIndex:"qualityTime",key:"qualityTime"},{title:"操作",key:"action",render:function(e,s){return(0,q.jsxs)(j.Z,{size:"middle",children:[(0,q.jsx)(Z.ZP,{type:"link",size:"small",icon:(0,q.jsx)(f.Z,{}),onClick:function(){return function(e){w(e),t(!0)}(s)},children:"查看详情"}),(0,q.jsx)(Z.ZP,{type:"link",size:"small",icon:(0,q.jsx)(v.Z,{}),onClick:function(){return function(e){w(e),m(!0)}(s)},children:"重新质检"})]})}}];return(0,q.jsxs)("div",{style:{padding:"20px"},children:[(0,q.jsxs)(p.Z,{title:"会话质检评分",extra:(0,q.jsxs)(j.Z,{children:[(0,q.jsx)(Z.ZP,{icon:(0,q.jsx)(g.Z,{}),children:"刷新"}),(0,q.jsx)(Z.ZP,{type:"primary",children:"导出"})]}),children:[(0,q.jsx)("div",{style:{marginBottom:16},children:(0,q.jsxs)(j.Z,{wrap:!0,children:[(0,q.jsx)(S,{placeholder:"搜索会话ID/客服/客户",style:{width:300}}),(0,q.jsxs)(u.Z,{placeholder:"质检状态",style:{width:120},children:[(0,q.jsx)(B,{value:"all",children:"全部"}),(0,q.jsx)(B,{value:"completed",children:"已质检"}),(0,q.jsx)(B,{value:"pending",children:"待质检"})]}),(0,q.jsx)(z,{placeholder:["开始时间","结束时间"]}),(0,q.jsx)(Z.ZP,{type:"primary",icon:(0,q.jsx)(b.Z,{}),children:"搜索"})]})}),(0,q.jsx)(y.Z,{columns:A,dataSource:[{key:"1",sessionId:"S001",agent:"张三",customer:"客户A",score:95,status:"已质检",qualityTime:"2025-01-16 10:30:00",messages:[{sender:"客户A",content:"你好，我想咨询一下产品信息",time:"10:00:00"},{sender:"张三",content:"您好！很高兴为您服务，请问您想了解哪款产品呢？",time:"10:00:15"},{sender:"客户A",content:"我想了解一下你们的新款手机",time:"10:00:30"},{sender:"张三",content:"好的，我们最新款手机具有以下特点：1. 6.7英寸大屏 2. 5000mAh大电池 3. 1亿像素摄像头 4. 骁龙8处理器，您觉得怎么样？",time:"10:01:00"}],qualityDetails:{responseTime:4,accuracy:5,politeness:5,completeness:4,comments:"客服回复及时，态度友好，信息准确完整。"}},{key:"2",sessionId:"S002",agent:"李四",customer:"客户B",score:85,status:"已质检",qualityTime:"2025-01-16 11:15:00",messages:[{sender:"客户B",content:"我的订单什么时候能发货？",time:"11:00:00"},{sender:"李四",content:"请稍等，我帮您查询一下",time:"11:00:10"},{sender:"李四",content:"您的订单预计明天发货",time:"11:00:30"}],qualityDetails:{responseTime:3,accuracy:4,politeness:4,completeness:3,comments:"回复及时但信息不够详细，建议提供更多物流信息。"}}]})]}),(0,q.jsx)(D,{visible:n,onClose:function(){return t(!1)},sessionData:C}),(0,q.jsx)(P,{visible:d,onClose:function(){return m(!1)},sessionData:C,onSubmit:T})]})}}}]);