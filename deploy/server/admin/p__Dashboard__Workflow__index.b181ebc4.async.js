"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[761],{15722:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(77260),a=r(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=r(54183),l=function(e,t){return a.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var i=a.forwardRef(l)},11090:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(77260),a=r(44194),o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},s=r(54183),l=function(e,t){return a.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var i=a.forwardRef(l)},82669:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(77260),a=r(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=r(54183),l=function(e,t){return a.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var i=a.forwardRef(l)},47783:function(e,t,r){var n=r(39328),a=r(17323),o=r(55824),s=r(44194),l=r(32871),i=r(64665),d=r(31549),c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var r=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,w=e.request,v=e.showSearch,h=e.options,x=(0,a.Z)(e,c),y=(0,s.useContext)(l.Z);return(0,d.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,o.h)(m),request:w,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:h,mode:g,showSearch:v,getPopupContainer:y.getPopupContainer},r),ref:t,proFieldProps:f},x),{},{children:u}))},f=s.forwardRef((function(e,t){var r=e.fieldProps,c=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,w=e.request,v=e.options,h=(0,a.Z)(e,u),x=(0,n.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),y=(0,s.useContext)(l.Z);return(0,d.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,o.h)(m),request:w,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:y.getPopupContainer},x),ref:t,proFieldProps:f},h),{},{children:c}))})),g=s.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",t.Z=g},48821:function(e,t,r){var n=r(76285),a=r(39328),o=r(17323),s=r(81424),l=r(20903),i=r(26411),d=r(34573),c=r(44194),u=r(64665),p=r(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",w=function(e){var t=(0,s.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),r=(0,n.Z)(t,2),o=r[0],d=r[1];return(0,p.jsx)(l.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var r,n=t.getFieldValue(e.name||[]);return(0,p.jsx)(i.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return d(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(r=e.statusRender)||void 0===r?void 0:r.call(e,n),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:o,children:e.children}))}})},v=function(e){var t=e.fieldProps,r=e.proFieldProps,n=(0,o.Z)(e,f);return(0,p.jsx)(u.Z,(0,a.Z)({valueType:m,fieldProps:t,filedConfig:{valueType:m},proFieldProps:r},n))};v.Password=function(e){var t=e.fieldProps,r=e.proFieldProps,s=(0,o.Z)(e,g),l=(0,c.useState)(!1),i=(0,n.Z)(l,2),f=i[0],v=i[1];return null!=t&&t.statusRender&&s.name?(0,p.jsx)(w,{name:s.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:v,children:(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,d.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var r;null==t||null===(r=t.onBlur)||void 0===r||r.call(t,e),v(!1)},onClick:function(e){var r;null==t||null===(r=t.onClick)||void 0===r||r.call(t,e),v(!0)}}),proFieldProps:r,filedConfig:{valueType:m}},s))})}):(0,p.jsx)(u.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:r,filedConfig:{valueType:m}},s))},v.displayName="ProFormComponent",t.Z=v},16331:function(e,t,r){var n=r(39328),a=r(17323),o=r(44194),s=r(64665),l=r(31549),i=["fieldProps","proFieldProps"],d=function(e,t){var r=e.fieldProps,o=e.proFieldProps,d=(0,a.Z)(e,i);return(0,l.jsx)(s.Z,(0,n.Z)({ref:t,valueType:"textarea",fieldProps:r,proFieldProps:o},d))};t.Z=o.forwardRef(d)},43940:function(e,t,r){r.d(t,{$B:function(){return f},Au:function(){return u},_I:function(){return v},rI:function(){return m}});var n=r(90819),a=r.n(n),o=r(73193),s=r.n(o),l=r(89933),i=r.n(l),d=r(5488),c=r(14870);function u(e){return p.apply(this,arguments)}function p(){return(p=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workflow/query/org",{method:"GET",params:s()(s()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workflow/create",{method:"POST",data:s()(s()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workflow/update",{method:"POST",data:s()(s()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return(h=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workflow/delete",{method:"POST",data:s()(s()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},16229:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var n=r(93322),a=r(74424),o=r(5488),s=r(42699),l=r(84176),i=r.n(l),d=r(73193),c=r.n(d),u=r(90819),p=r.n(u),f=r(89933),g=r.n(f),m=r(45332),w=r.n(m),v=r(44194),h=r(68349),x=r(26411),y=r(5780),M=r(78359),k=r(5025),Z=r(43940),j=r(14870),b=r(8065),P=r(34599),S=r(32394),C=r(47783),T=r(48821),F=r(16331),E=r(68724),I=r(49616),O=r(18751),$=r(31549),z=function(e){var t,r,n=e.isEdit,a=e.workflow,s=e.open,l=(e.level,e.onClose),i=e.onSubmit,d=S.A.useForm(),c=w()(d,1)[0],u=(0,j.useIntl)(),p=(0,P.u)((function(e){return e.currentOrg})),f=(0,v.useState)(),g=w()(f,2),m=g[0],h=g[1],x=(0,b.v)((function(e){return e.categoryResult})),M=(0,O.Z)().translateString;(0,v.useEffect)((function(){if(n&&a&&c){var e;c.setFieldsValue({uid:null==a?void 0:a.uid,name:null==a?void 0:a.name,type:null==a?void 0:a.type,content:null==a?void 0:a.content,description:null==a?void 0:a.description,categoryUid:null==a?void 0:a.categoryUid});var t=null==x||null===(e=x.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.find((function(e){return e.uid===(null==a?void 0:a.categoryUid)}));h(t)}else console.log("form resetFields"),c.resetFields()}),[a,c,n,null==x||null===(t=x.data)||void 0===t?void 0:t.content]);return(0,$.jsx)("div",{children:(0,$.jsx)(E.Z,{title:n?u.formatMessage({id:"pages.workflow.drawer.edit",defaultMessage:"编辑工作流"}):u.formatMessage({id:"pages.workflow.drawer.create",defaultMessage:"新建工作流"}),width:650,onClose:l,open:s,extra:(0,$.jsxs)(I.Z,{children:[(0,$.jsx)(y.ZP,{onClick:l,children:u.formatMessage({id:"pages.workflow.drawer.cancel",defaultMessage:"取消"})}),(0,$.jsx)(y.ZP,{onClick:function(){console.log("handleSubmit"),c.validateFields().then((function(e){console.log("Form values:",e);var t={uid:n?null==a?void 0:a.uid:"",name:e.name,type:e.type,content:e.content,description:e.description,categoryUid:null==m?void 0:m.uid,orgUid:null==p?void 0:p.uid};console.log("workflowObject:",t),i(t)})).catch((function(e){console.log("Form errors:",e)}))},type:"primary",children:u.formatMessage({id:"pages.workflow.drawer.save",defaultMessage:"保存"})})]}),children:(0,$.jsxs)(S.A,{form:c,name:"workflow",submitter:!1,children:[(0,$.jsx)(C.Z,{label:u.formatMessage({id:"pages.workflow.drawer.category",defaultMessage:"类别"}),name:"categoryUid",required:!0,options:null==x||null===(r=x.data)||void 0===r||null===(r=r.content)||void 0===r||null===(r=r.filter((function(e){return e.uid!==o.zBg})))||void 0===r?void 0:r.map((function(e){return{label:M(null==e?void 0:e.name),value:null==e?void 0:e.uid}})),fieldProps:{allowClear:!0,onChange:function(e){var t;console.log("handleChange:",e),h(null==x||null===(t=x.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.find((function(t){return t.uid===e})))}}}),(0,$.jsx)(T.Z,{label:u.formatMessage({id:"pages.workflow.drawer.name",defaultMessage:"名称"}),name:"name",required:!0,tooltip:u.formatMessage({id:"pages.workflow.drawer.name.tooltip",defaultMessage:"工作流名称"})}),(0,$.jsx)(T.Z,{label:u.formatMessage({id:"pages.workflow.drawer.type",defaultMessage:"类型"}),name:"type",tooltip:u.formatMessage({id:"pages.workflow.drawer.type.tooltip",defaultMessage:"工作流类型"}),fieldProps:{placeholder:u.formatMessage({id:"pages.workflow.drawer.type.placeholder",defaultMessage:"请输入工作流类型"})}}),(0,$.jsx)(F.Z,{label:u.formatMessage({id:"pages.workflow.drawer.content",defaultMessage:"内容"}),name:"content",required:!0,fieldProps:{placeholder:u.formatMessage({id:"pages.workflow.drawer.content.placeholder",defaultMessage:"请输入工作流内容"}),rows:10}}),(0,$.jsx)(F.Z,{label:u.formatMessage({id:"pages.workflow.drawer.description",defaultMessage:"描述"}),name:"description",fieldProps:{placeholder:u.formatMessage({id:"pages.workflow.drawer.description.placeholder",defaultMessage:"请输入工作流描述"}),rows:4}})]})})})},q=r(15722),R=r(7358),A=r(10162),B=r(11090),U=r(2484),N=r(19975),H=r(28977),G=r.n(H),D=r(18580),L=r(33363),V=["current","pageSize","content"],Y=function(e){var t=e.level,r=(e.type,(0,v.useRef)()),n=(0,j.useIntl)(),a=(0,v.useState)(!0),s=w()(a,2),l=s[0],d=s[1],u=(0,O.Z)().translateString,f=(0,v.useState)(1),m=w()(f,2),S=m[0],C=m[1],T=(0,v.useState)(10),F=w()(T,2),E=F[0],I=F[1],H=(0,v.useState)(!1),Y=w()(H,2),W=Y[0],X=Y[1],J=(0,v.useState)([]),_=w()(J,2),Q=(_[0],_[1]),K=(0,v.useState)({}),ee=w()(K,2),te=ee[0],re=ee[1],ne=(0,b.v)((function(e){return e.currentCategory})),ae=(0,P.u)((function(e){return e.currentOrg})),oe=h.Z.useModal(),se=w()(oe,2),le=se[0],ie=se[1],de=(0,v.useState)(0),ce=w()(de,2),ue=ce[0],pe=ce[1],fe=(0,v.useState)({}),ge=w()(fe,2),me=ge[0],we=ge[1],ve=function(){var e=g()(p()().mark((function e(t){var a,o;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(n.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,(0,Z._I)(t);case 3:200===(a=e.sent).code?(k.yw.destroy(),k.yw.success(n.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),null===(o=r.current)||void 0===o||o.reload()):(k.yw.destroy(),k.yw.error(a.message));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=g()(p()().mark((function e(t){var a,o,s,i;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=8;break}return k.yw.loading(n.formatMessage({id:"updating",defaultMessage:"Updating"})),e.next=4,(0,Z.rI)(t);case 4:200===(a=e.sent).code?(k.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),null===(o=r.current)||void 0===o||o.reload(),X(!1)):k.yw.error(a.message),e.next=13;break;case 8:return k.yw.loading(n.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=11,(0,Z.$B)(t);case 11:200===(s=e.sent).code?(k.yw.success(n.formatMessage({id:"create.success",defaultMessage:"create success"})),null===(i=r.current)||void 0===i||i.reload(),X(!1)):k.yw.error(s.message);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.reload()}),[ne]);var xe=function(){var e=g()(p()().mark((function e(r,n,a){var s,l;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",r,n,a),s=localStorage.getItem(o.LA8),l=c()({categoryUid:(null==ne?void 0:ne.uid)===o.zBg?"":null==ne?void 0:ne.uid,orgUid:t===o.Hxq?"":null==ae?void 0:ae.uid,level:t,accessToken:s||"",exportType:r},me),"current"===r?(l.pageNumber=String(S-1),l.pageSize=String(E)):"all"===r?(l.pageNumber="0",l.pageSize="1000"):"range"===r&&void 0!==n&&void 0!==a&&(l.pageNumber=String(n),l.pageSize=String(a)),window.open((0,D.kG)()+"/api/v1/workflow/export?"+new URLSearchParams(l).toString());case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ye=function(e){for(var t=[],r=1e3,n=Math.ceil(e/r),a=function(){var n=o,a=o*r+1,s=Math.min((o+1)*r,e);t.push({key:"export-".concat(o),label:"".concat(a,"-").concat(s," (").concat(s-a+1,"条)"),onClick:function(){return xe("range",n,r)}})},o=0;o<n;o++)a();return t},Me=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:n.formatMessage({id:"pages.workflow.name",defaultMessage:"名称"}),dataIndex:"name",hideInSearch:!1,fixed:"left",width:150,copyable:!0,ellipsis:!0,tooltip:n.formatMessage({id:"pages.workflow.name.tooltip",defaultMessage:"工作流名称"})},{title:n.formatMessage({id:"pages.workflow.type",defaultMessage:"类型"}),dataIndex:"type",width:120,copyable:!0,ellipsis:!0,tooltip:n.formatMessage({id:"pages.workflow.type.tooltip",defaultMessage:"工作流类型"})},{title:n.formatMessage({id:"pages.workflow.category",defaultMessage:"分类"}),dataIndex:"categoryUid",copyable:!0,ellipsis:!0,tooltip:n.formatMessage({id:"pages.workflow.category.tooltip",defaultMessage:"工作流所属分类"})},{title:n.formatMessage({id:"pages.workflow.description",defaultMessage:"描述"}),dataIndex:"description",width:200,copyable:!0,ellipsis:!0,tooltip:n.formatMessage({id:"pages.workflow.description.tooltip",defaultMessage:"工作流功能描述"})},{title:n.formatMessage({id:"pages.workflow.content",defaultMessage:"内容"}),dataIndex:"content",ellipsis:!0,hideInSearch:!1,copyable:!0,width:250,tooltip:n.formatMessage({id:"pages.workflow.content.tooltip",defaultMessage:"工作流内容"}),render:function(e,t){var r=t.content||"-",a=function(){var e=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.TE)(t);case 2:e.sent.success?k.yw.success(n.formatMessage({id:"copy.success",defaultMessage:"复制成功"})):k.yw.error(n.formatMessage({id:"copy.failed",defaultMessage:"复制失败"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,$.jsx)(x.Z,{content:(0,$.jsxs)("div",{children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,$.jsx)("span",{children:n.formatMessage({id:"pages.workflow.content.detail",defaultMessage:"内容详情"})}),(0,$.jsx)(y.ZP,{type:"text",icon:(0,$.jsx)(R.Z,{}),onClick:function(e){e.stopPropagation(),a(r)},title:n.formatMessage({id:"copy.to.clipboard",defaultMessage:"复制到剪贴板"})})]}),(0,$.jsx)("div",{style:{maxWidth:"600px",maxHeight:"400px",overflow:"auto",whiteSpace:"pre-wrap"},children:r})]}),title:n.formatMessage({id:"pages.workflow.content",defaultMessage:"内容"}),trigger:"hover",overlayStyle:{maxWidth:"800px"},children:(0,$.jsx)("span",{style:{cursor:"pointer"},children:r})})}},{title:n.formatMessage({id:"pages.workflow.createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,width:160,hideInSearch:!0,tooltip:n.formatMessage({id:"pages.workflow.createdAt.tooltip",defaultMessage:"工作流创建时间"}),render:function(e,t){return t.createdAt?G()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:n.formatMessage({id:"pages.workflow.updatedAt",defaultMessage:"更新时间"}),dataIndex:"updatedAt",valueType:"dateTime",sorter:!0,hideInSearch:!0,width:160,tooltip:n.formatMessage({id:"pages.workflow.updatedAt.tooltip",defaultMessage:"工作流最后更新时间"}),render:function(e,t){return t.updatedAt?G()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:n.formatMessage({id:"actions",defaultMessage:"操作"}),dataIndex:"option",valueType:"option",width:120,fixed:"right",tooltip:n.formatMessage({id:"pages.workflow.actions.tooltip",defaultMessage:"可进行的操作"}),render:function(e,t){return[(0,$.jsx)("a",{onClick:function(){return function(e){d(!0),re(e),X(!0)}(t)},children:n.formatMessage({id:"pages.workflow.edit",defaultMessage:"Edit"})},"edit"),(0,$.jsx)("a",{onClick:function(){return e=t,void le.confirm({title:n.formatMessage({id:"deleteTip"}),icon:(0,$.jsx)(q.Z,{}),content:"".concat(n.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(u(e.name),"】？"),onOk:function(){ve(e)},okText:n.formatMessage({id:"ok"}),cancelText:n.formatMessage({id:"cancel"})});var e},children:n.formatMessage({id:"pages.workflow.delete",defaultMessage:"Delete"})},"delete")]}}],ke=function(){var e=g()(p()().mark((function e(r,a,s){var l,d,u,f,g,m,w,v,h;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(n.formatMessage({id:"loading",defaultMessage:"Loading"})),l=r.current,d=r.pageSize,u=r.content,f=i()(r,V),C(l),I(d),we(c()(c()({},f),{},{content:u})),g=void 0,m=void 0,a&&Object.keys(a).length>0&&(w=Object.keys(a)[0],g=w,m="ascend"===a[w]?"ascend":"descend"),v=c()(c()({pageNumber:l-1,pageSize:d,name:"",orgUid:t===o.Hxq?"":null==ae?void 0:ae.uid,categoryUid:(null==ne?void 0:ne.uid)===o.zBg?"":null==ne?void 0:ne.uid,level:t},f),{},{content:u,sortBy:g,sortDirection:m}),e.next=11,(0,Z.Au)(v);case 11:if(h=e.sent,console.log("queryWorkflowsByOrg response:",h,v),200!==h.code){e.next=20;break}return k.yw.destroy(),Q(h.data.content),pe(h.data.totalElements),e.abrupt("return",{data:h.data.content,success:!0,total:h.data.totalElements});case 20:return k.yw.destroy(),k.yw.error(h.message),e.abrupt("return",{data:[],success:!1,total:0});case 23:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(N.Z,{columns:Me,actionRef:r,cardBordered:!0,rowKey:"uid",scroll:{x:1e3},search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,pageSize:10,onChange:function(e,t){C(e),I(t)}},dateFormatter:"string",headerTitle:n.formatMessage({id:"pages.workflow.list",defaultMessage:"工作流列表"}),toolBarRender:function(){var e=[(0,$.jsx)(y.ZP,{type:"primary",onClick:function(){window.open((0,D.HU)(),"_blank")},icon:(0,$.jsx)(A.Z,{}),children:n.formatMessage({id:"pages.workflow.create",defaultMessage:"添加工作流"})},"create")],t=[{key:"export-current",icon:(0,$.jsx)(B.Z,{}),label:n.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return xe("current")}}];return ue>0&&(ue<=1e3?t.push({key:"export-all",icon:(0,$.jsx)(B.Z,{}),label:n.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(ue,"条)"),onClick:function(){return xe("all")}}):t.push({key:"export-range",icon:(0,$.jsx)(B.Z,{}),label:n.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(ue,"条)"),children:ye(ue)})),e.push((0,$.jsx)(M.Z,{menu:{items:t},placement:"bottom",children:(0,$.jsxs)(y.ZP,{type:"primary",icon:(0,$.jsx)(B.Z,{}),children:[n.formatMessage({id:"export",defaultMessage:"导出"}),(0,$.jsx)(U.Z,{})]})},"export")),e},request:ke}),W&&(0,$.jsx)(z,{isEdit:l,workflow:te,level:t,open:W,onClose:function(){return X(!1)},onSubmit:he}),ie]})},W=n.Z.Sider,X=n.Z.Content,J=function(){var e=(0,a.Z)(),t=e.leftSiderStyle,r=e.leftSiderWidth,l=e.contentStyle;return(0,$.jsxs)(n.Z,{children:[(0,$.jsx)(W,{width:r,style:t,children:(0,$.jsx)(s.Z,{type:o.H8R,level:o.whQ})}),(0,$.jsx)(n.Z,{children:(0,$.jsx)(X,{style:l,children:(0,$.jsx)(Y,{level:o.whQ})})})]})}},90317:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(44194),a=r(51865),o=r.n(a),s=r(34573),l=r(86992),i=r(35779),d=r(79255),c=r(77167);const u=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],f=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return o()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const r=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${r}`]:r&&u.includes(r)}})(e,t)),((e,t)=>{const r={};return f.forEach((n=>{r[`${e}-align-${n}`]=t.align===n})),r[`${e}-align-stretch`]=!t.align&&!!t.vertical,r})(e,t)),((e,t)=>{const r={};return p.forEach((n=>{r[`${e}-justify-${n}`]=t.justify===n})),r})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},w=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,r={};return u.forEach((e=>{r[`${t}-wrap-${e}`]={flexWrap:e}})),r},h=e=>{const{componentCls:t}=e,r={};return f.forEach((e=>{r[`${t}-align-${e}`]={alignItems:e}})),r},x=e=>{const{componentCls:t}=e,r={};return p.forEach((e=>{r[`${t}-justify-${e}`]={justifyContent:e}})),r};var y=(0,d.I$)("Flex",(e=>{const{paddingXS:t,padding:r,paddingLG:n}=e,a=(0,c.IX)(e,{flexGapSM:t,flexGap:r,flexGapLG:n});return[m(a),w(a),v(a),h(a),x(a)]}),(()=>({})),{resetStyle:!1}),M=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};const k=n.forwardRef(((e,t)=>{const{prefixCls:r,rootClassName:a,className:d,style:c,flex:u,gap:p,vertical:f=!1,component:m="div"}=e,w=M(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component"]),{flex:v,direction:h,getPrefixCls:x}=n.useContext(i.E_),k=x("flex",r),[Z,j,b]=y(k),P=null!=f?f:null==v?void 0:v.vertical,S=o()(d,a,null==v?void 0:v.className,k,j,b,g(k,e),{[`${k}-rtl`]:"rtl"===h,[`${k}-gap-${p}`]:(0,l.n)(p),[`${k}-vertical`]:P}),C=Object.assign(Object.assign({},null==v?void 0:v.style),c);return u&&(C.flex=u),p&&!(0,l.n)(p)&&(C.gap=p),Z(n.createElement(m,Object.assign({ref:t,className:S,style:C},(0,s.Z)(w,["justify","wrap","align"]))))}));var Z=k}}]);