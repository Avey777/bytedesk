"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2804],{15722:function(e,r,t){t.d(r,{Z:function(){return l}});var a=t(77260),n=t(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=t(54183),i=function(e,r){return n.createElement(o.Z,(0,a.Z)({},e,{ref:r,icon:s}))};var l=n.forwardRef(i)},11090:function(e,r,t){t.d(r,{Z:function(){return l}});var a=t(77260),n=t(44194),s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},o=t(54183),i=function(e,r){return n.createElement(o.Z,(0,a.Z)({},e,{ref:r,icon:s}))};var l=n.forwardRef(i)},82669:function(e,r,t){t.d(r,{Z:function(){return l}});var a=t(77260),n=t(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=t(54183),i=function(e,r){return n.createElement(o.Z,(0,a.Z)({},e,{ref:r,icon:s}))};var l=n.forwardRef(i)},47783:function(e,r,t){var a=t(39328),n=t(17323),s=t(55824),o=t(44194),i=t(32871),l=t(64665),c=t(31549),d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,r){var t=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,h=e.showSearch,x=e.options,M=(0,n.Z)(e,d),y=(0,o.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,s.h)(m),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:x,mode:g,showSearch:h,getPopupContainer:y.getPopupContainer},t),ref:r,proFieldProps:f},M),{},{children:u}))},f=o.forwardRef((function(e,r){var t=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,h=e.options,x=(0,n.Z)(e,u),M=(0,a.Z)({options:h,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},t),y=(0,o.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,s.h)(m),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({getPopupContainer:y.getPopupContainer},M),ref:r,proFieldProps:f},x),{},{children:d}))})),g=o.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",r.Z=g},11137:function(e,r,t){var a=t(39328),n=t(17323),s=t(44194),o=t(64665),i=t(31549),l=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],c=s.forwardRef((function(e,r){var t=e.fieldProps,s=e.unCheckedChildren,c=e.checkedChildren,d=e.proFieldProps,u=(0,n.Z)(e,l);return(0,i.jsx)(o.Z,(0,a.Z)({valueType:"switch",fieldProps:(0,a.Z)({unCheckedChildren:s,checkedChildren:c},t),ref:r,valuePropName:"checked",proFieldProps:d,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},u))}));r.Z=c},48821:function(e,r,t){var a=t(76285),n=t(39328),s=t(17323),o=t(81424),i=t(20903),l=t(26411),c=t(34573),d=t(44194),u=t(64665),p=t(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",v=function(e){var r=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),t=(0,a.Z)(r,2),s=t[0],c=t[1];return(0,p.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(r){var t,a=r.getFieldValue(e.name||[]);return(0,p.jsx)(l.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return c(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(t=e.statusRender)||void 0===t?void 0:t.call(e,a),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:s,children:e.children}))}})},h=function(e){var r=e.fieldProps,t=e.proFieldProps,a=(0,s.Z)(e,f);return(0,p.jsx)(u.Z,(0,n.Z)({valueType:m,fieldProps:r,filedConfig:{valueType:m},proFieldProps:t},a))};h.Password=function(e){var r=e.fieldProps,t=e.proFieldProps,o=(0,s.Z)(e,g),i=(0,d.useState)(!1),l=(0,a.Z)(i,2),f=l[0],h=l[1];return null!=r&&r.statusRender&&o.name?(0,p.jsx)(v,{name:o.name,statusRender:null==r?void 0:r.statusRender,popoverProps:null==r?void 0:r.popoverProps,strengthText:null==r?void 0:r.strengthText,open:f,onOpenChange:h,children:(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,c.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var t;null==r||null===(t=r.onBlur)||void 0===t||t.call(r,e),h(!1)},onClick:function(e){var t;null==r||null===(t=r.onClick)||void 0===t||t.call(r,e),h(!0)}}),proFieldProps:t,filedConfig:{valueType:m}},o))})}):(0,p.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:r,proFieldProps:t,filedConfig:{valueType:m}},o))},h.displayName="ProFormComponent",r.Z=h},16331:function(e,r,t){var a=t(39328),n=t(17323),s=t(44194),o=t(64665),i=t(31549),l=["fieldProps","proFieldProps"],c=function(e,r){var t=e.fieldProps,s=e.proFieldProps,c=(0,n.Z)(e,l);return(0,i.jsx)(o.Z,(0,a.Z)({ref:r,valueType:"textarea",fieldProps:t,proFieldProps:s},c))};r.Z=s.forwardRef(c)},76376:function(e,r,t){t.r(r),t.d(r,{default:function(){return se}});var a=t(93322),n=t(74424),s=t(5488),o=t(84176),i=t.n(o),l=t(73193),c=t.n(l),d=t(90819),u=t.n(d),p=t(89933),f=t.n(p),g=t(45332),m=t.n(g),v=t(19975),h=t(27473),x=t(5780),M=t(67652),y=t(78359),C=t(44194),Z=t(14870),P=t(59304),w=t(15722),S=t(54881),j=t(10162),b=t(11090),k=t(2484),O=t(28977),T=t.n(O),F=t(8065),E=t(34599),I=t(18751);function N(e){return z.apply(this,arguments)}function z(){return(z=f()(u()().mark((function e(r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/v1/mcp/server/query/org",{method:"GET",params:c()(c()({},r),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return R.apply(this,arguments)}function R(){return(R=f()(u()().mark((function e(r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/v1/mcp/server/create",{method:"POST",data:c()(c()({},r),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return $.apply(this,arguments)}function $(){return($=f()(u()().mark((function e(r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/v1/mcp/server/update",{method:"POST",data:c()(c()({},r),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return A.apply(this,arguments)}function A(){return(A=f()(u()().mark((function e(r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/v1/mcp/server/delete",{method:"POST",data:c()(c()({},r),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=t(18580),B=t(32394),G=t(47783),L=t(48821),H=t(16331),D=t(11137),Y=t(68724),X=t(49616),W=t(31549),Q=function(e){var r=e.isEdit,t=e.mcpServer,a=e.open,n=e.level,s=e.onClose,o=e.onSubmit,i=B.A.useForm(),l=m()(i,1)[0],c=(0,Z.useIntl)(),d=(0,E.u)((function(e){return e.currentOrg})),u=(0,F.v)((function(e){return e.currentCategory})),p=(0,F.v)((function(e){return e.categorySelectOptions}));(0,C.useEffect)((function(){if(r&&t&&l){var e={};if(t.serverConfig)try{e="string"==typeof t.serverConfig?JSON.parse(t.serverConfig):t.serverConfig}catch(e){console.error("Failed to parse serverConfig:",e)}l.setFieldsValue({uid:null==t?void 0:t.uid,name:null==t?void 0:t.name,description:null==t?void 0:t.description,serverType:null==t?void 0:t.type,status:null==t?void 0:t.status,enabled:null==t?void 0:t.enabled,categoryUid:(null==t?void 0:t.categoryUid)||(null==u?void 0:u.uid),serverConfig:JSON.stringify(e,null,2)})}else{l.resetFields();var a=p&&p.length>0?p[0].value:void 0;l.setFieldsValue({categoryUid:a,enabled:!0,status:"INACTIVE",serverConfig:JSON.stringify({serverVersion:"1.0.0",protocol:"http",connectionTimeout:3e4,readTimeout:6e4,maxRetries:3,autoStart:!1},null,2)})}}),[t,r,l,u,p]);return(0,W.jsx)(Y.Z,{title:r?c.formatMessage({id:"pages.mcp.edit",defaultMessage:"编辑MCP服务器"}):c.formatMessage({id:"pages.mcp.create",defaultMessage:"创建MCP服务器"}),width:600,open:a,onClose:s,extra:(0,W.jsxs)(X.Z,{children:[(0,W.jsx)(x.ZP,{onClick:s,children:c.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,W.jsx)(x.ZP,{type:"primary",onClick:function(){l.validateFields().then((function(e){var a;console.log("Form values:",e);var s={};if(e.serverConfig)try{s=JSON.parse(e.serverConfig)}catch(e){return void console.error("Invalid JSON in serverConfig:",e)}var i=p&&p.length>0?p[0].value:void 0,l={uid:r?null==t?void 0:t.uid:"",name:e.name,description:e.description,serverType:e.serverType,status:e.status,enabled:null===(a=e.enabled)||void 0===a||a,categoryUid:e.categoryUid||i,serverConfig:JSON.stringify(s),level:n,orgUid:null==d?void 0:d.uid};console.log("mcpServerObject:",l),o(l)})).catch((function(e){console.log("Form errors:",e)}))},children:c.formatMessage({id:"ok",defaultMessage:"确定"})})]}),children:(0,W.jsxs)(B.A,{form:l,layout:"vertical",submitter:!1,children:[(0,W.jsx)(G.Z,{name:"categoryUid",label:c.formatMessage({id:"pages.mcp.categoryUid",defaultMessage:"分类"}),placeholder:c.formatMessage({id:"pages.mcp.categoryUid.placeholder",defaultMessage:"请选择分类"}),tooltip:c.formatMessage({id:"pages.mcp.categoryUid.tooltip",defaultMessage:"MCP服务器所属分类"}),options:p,rules:[{required:!0,message:c.formatMessage({id:"pages.mcp.categoryUid.required",defaultMessage:"请选择分类"})}]}),(0,W.jsx)(L.Z,{name:"name",label:c.formatMessage({id:"pages.mcp.name",defaultMessage:"名称"}),placeholder:c.formatMessage({id:"pages.mcp.name.placeholder",defaultMessage:"请输入MCP服务器名称"}),rules:[{required:!0,message:c.formatMessage({id:"pages.mcp.name.required",defaultMessage:"请输入名称"})}]}),(0,W.jsx)(H.Z,{name:"description",label:c.formatMessage({id:"pages.mcp.description",defaultMessage:"描述"}),placeholder:c.formatMessage({id:"pages.mcp.description.placeholder",defaultMessage:"请输入MCP服务器描述"}),rows:3}),(0,W.jsx)(H.Z,{name:"serverConfig",label:c.formatMessage({id:"pages.mcp.serverConfig",defaultMessage:"服务器配置"}),placeholder:c.formatMessage({id:"pages.mcp.serverConfig.placeholder",defaultMessage:"请输入JSON格式的服务器配置"}),rows:20,tooltip:c.formatMessage({id:"pages.mcp.serverConfig.tooltip",defaultMessage:"包含服务器版本、URL、认证、超时、能力等配置的JSON字符串"}),rules:[{validator:function(e,r){if(!r)return Promise.resolve();try{return JSON.parse(r),Promise.resolve()}catch(e){return Promise.reject(new Error(c.formatMessage({id:"mcp.serverConfig.validation.json",defaultMessage:"请输入有效的JSON格式"})))}}}]}),(0,W.jsx)(D.Z,{name:"enabled",label:c.formatMessage({id:"pages.mcp.enabled",defaultMessage:"启用状态"}),checkedChildren:c.formatMessage({id:"enabled",defaultMessage:"启用"}),unCheckedChildren:c.formatMessage({id:"disabled",defaultMessage:"禁用"}),initialValue:!0})]})})},K=t(5025),_=t(95660),ee=["current","pageSize","prompt"],re=function(e){var r=e.level,t=(e.type,(0,C.useRef)()),a=(0,Z.useIntl)(),n=(0,C.useState)(!0),o=m()(n,2),l=o[0],d=o[1],p=(0,I.Z)().translateString,g=(0,C.useState)(1),O=m()(g,2),z=O[0],R=O[1],$=(0,C.useState)(10),A=m()($,2),B=A[0],G=A[1],L=(0,C.useState)(!1),H=m()(L,2),D=H[0],Y=H[1],X=(0,C.useState)([]),re=m()(X,2),te=(re[0],re[1]),ae=(0,C.useState)({}),ne=m()(ae,2),se=ne[0],oe=ne[1],ie=(0,F.v)((function(e){return e.currentCategory})),le=(0,E.u)((function(e){return e.currentOrg})),ce=(0,C.useState)(0),de=m()(ce,2),ue=de[0],pe=de[1],fe=(0,C.useState)({}),ge=m()(fe,2),me=ge[0],ve=ge[1],he=function(){var e=f()(u()().mark((function e(r){var n,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K.yw.loading(a.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,J(r);case 3:200===(n=e.sent).code?(K.yw.success(a.formatMessage({id:"delete.success"})),null===(s=t.current)||void 0===s||s.reload()):K.yw.error(n.message||a.formatMessage({id:"delete.error"}));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),xe=function(){var e=f()(u()().mark((function e(r){var n,s,o,i;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=7;break}return e.next=3,q(r);case 3:200===(n=e.sent).code?(K.yw.success(a.formatMessage({id:"update.success"})),Y(!1),null===(s=t.current)||void 0===s||s.reload()):K.yw.error(n.message||a.formatMessage({id:"update.error"})),e.next=11;break;case 7:return e.next=9,U(r);case 9:200===(o=e.sent).code?(K.yw.success(a.formatMessage({id:"create.success"})),Y(!1),null===(i=t.current)||void 0===i||i.reload()):K.yw.error(o.message||a.formatMessage({id:"create.error"}));case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Me=function(){d(!1),oe({}),Y(!0)};(0,C.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.reload()}),[ie]);var ye=function(){var e=f()(u()().mark((function e(t,a,n){var o,i,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",t,a,n),o=localStorage.getItem(s.LA8),i=c()({categoryUid:(null==ie?void 0:ie.uid)===s.zBg?"":null==ie?void 0:ie.uid,orgUid:r===s.Hxq?"":null==le?void 0:le.uid,level:r,accessToken:o||"",exportType:t},me),"current"===t?(i.pageNumber=String(z-1),i.pageSize=String(B)):"all"===t?(i.pageNumber="0",i.pageSize="1000"):"range"===t&&void 0!==a&&void 0!==n&&(i.pageNumber=String(a),i.pageSize=String(n)),l=Object.fromEntries(Object.entries(i).filter((function(e){var r=m()(e,2),t=(r[0],r[1]);return null!=t})).map((function(e){var r=m()(e,2),t=r[0],a=r[1];return[t,String(a)]}))),_.Z.debug("Export MCP Servers url:",(0,V.kG)()+"/api/v1/mcp/server/export?"+new URLSearchParams(l).toString()),window.open((0,V.kG)()+"/api/v1/mcp/server/export?"+new URLSearchParams(l).toString());case 7:case"end":return e.stop()}}),e)})));return function(r,t,a){return e.apply(this,arguments)}}(),Ce=function(e){for(var r=[],t=1e3,a=Math.ceil(e/t),n=function(){var a=s,n=s*t+1,o=Math.min((s+1)*t,e);r.push({key:"export-".concat(s),label:"".concat(n,"-").concat(o," (").concat(o-n+1,"条)"),onClick:function(){return ye("range",a,t)}})},s=0;s<a;s++)n();return r},Ze=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:a.formatMessage({id:"pages.mcp.uid",defaultMessage:"UID"}),dataIndex:"uid",hideInSearch:!0,fixed:"left",width:180,copyable:!0,ellipsis:!0},{title:a.formatMessage({id:"pages.mcp.name",defaultMessage:"名称"}),dataIndex:"name",hideInSearch:!1,fixed:"left",width:200,copyable:!0,ellipsis:!0,tooltip:a.formatMessage({id:"pages.mcp.name.tooltip",defaultMessage:"MCP服务器的名称"})},{title:a.formatMessage({id:"pages.mcp.description",defaultMessage:"描述"}),dataIndex:"description",width:250,copyable:!0,ellipsis:!0,tooltip:a.formatMessage({id:"pages.mcp.description.tooltip",defaultMessage:"MCP服务器的功能描述"})},{title:a.formatMessage({id:"pages.mcp.enabled",defaultMessage:"启用状态"}),dataIndex:"enabled",hideInSearch:!0,width:100,tooltip:a.formatMessage({id:"pages.mcp.enabled.tooltip",defaultMessage:"是否启用该MCP服务器"}),render:function(e,r){return r.enabled?"已启用":"已禁用"}},{title:a.formatMessage({id:"pages.mcp.serverConfig",defaultMessage:"服务器配置"}),dataIndex:"serverConfig",hideInSearch:!0,width:200,ellipsis:!0,tooltip:a.formatMessage({id:"pages.mcp.serverConfig.tooltip",defaultMessage:"MCP服务器的配置信息"}),render:function(e,r){if(!r.serverConfig)return"-";try{var t="string"==typeof r.serverConfig?JSON.parse(r.serverConfig):r.serverConfig,a=[t.serverUrl&&"URL: ".concat(t.serverUrl),t.host&&"Host: ".concat(t.host),t.port&&"Port: ".concat(t.port)].filter(Boolean).join(", ");return(0,W.jsx)(h.Z,{title:(0,W.jsx)("pre",{children:JSON.stringify(t,null,2)}),children:(0,W.jsx)("span",{children:a||"查看配置"})})}catch(e){return(0,W.jsx)(h.Z,{title:String(r.serverConfig),children:(0,W.jsx)("span",{children:"配置信息"})})}}},{title:a.formatMessage({id:"pages.mcp.createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,width:160,hideInSearch:!0,tooltip:a.formatMessage({id:"pages.mcp.createdAt.tooltip",defaultMessage:"MCP服务器创建的时间"}),render:function(e,r){return r.createdAt?T()(r.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:a.formatMessage({id:"pages.mcp.updatedAt",defaultMessage:"更新时间"}),dataIndex:"updatedAt",valueType:"dateTime",sorter:!0,hideInSearch:!0,width:160,tooltip:a.formatMessage({id:"pages.mcp.updatedAt.tooltip",defaultMessage:"MCP服务器最后更新的时间"}),render:function(e,r){return r.updatedAt?T()(r.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:a.formatMessage({id:"actions",defaultMessage:"操作"}),dataIndex:"option",valueType:"option",width:120,fixed:"right",tooltip:a.formatMessage({id:"pages.mcp.actions.tooltip",defaultMessage:"可进行的操作"}),render:function(e,r){return[(0,W.jsx)(h.Z,{title:a.formatMessage({id:"edit",defaultMessage:"编辑"}),children:(0,W.jsx)(x.ZP,{type:"text",size:"small",icon:(0,W.jsx)(P.Z,{}),onClick:function(){return function(e){d(!0),oe(e),Y(!0)}(r)}})},"edit"),(0,W.jsx)(M.Z,{title:a.formatMessage({id:"deleteTip",defaultMessage:"删除确认"}),description:"".concat(a.formatMessage({id:"deleteAffirm",defaultMessage:"确认删除"}),"【").concat(p(r.name),"】？"),onConfirm:function(){return he(r)},okText:a.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:a.formatMessage({id:"cancel",defaultMessage:"取消"}),icon:(0,W.jsx)(w.Z,{style:{color:"red"}}),children:(0,W.jsx)(h.Z,{title:a.formatMessage({id:"delete",defaultMessage:"删除"}),children:(0,W.jsx)(x.ZP,{type:"text",size:"small",danger:!0,icon:(0,W.jsx)(S.Z,{})})})},"delete")]}}],Pe=function(){var e=f()(u()().mark((function e(t,n,o){var l,d,p,f,g,m,v,h,x,M,y,C;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current,t.pageSize,t.prompt,l=i()(t,ee),ve({name:t.name,description:t.description}),d=t.current?t.current-1:0,p=t.pageSize||10,R(t.current||1),G(p),f="createdAt",g="desc",n&&Object.keys(n).length>0&&(m=Object.keys(n)[0],f=m,g="ascend"===n[m]?"asc":"desc"),v=c()({pageNumber:d,pageSize:p,sortBy:f,sortDirection:g,level:r,orgUid:null==le?void 0:le.uid,categoryUid:(null==ie?void 0:ie.uid)===s.zBg?"":null==ie?void 0:ie.uid},l),e.prev=10,e.next=13,N(v);case 13:if(h=e.sent,_.Z.debug("queryMcpServersByOrg:",h,v),200!==h.code){e.next=22;break}return C=(null===(x=h.data)||void 0===x?void 0:x.content)||[],te(C),pe((null===(M=h.data)||void 0===M?void 0:M.totalElements)||0),e.abrupt("return",{data:C,success:!0,total:(null===(y=h.data)||void 0===y?void 0:y.totalElements)||0});case 22:return K.yw.error(h.message||a.formatMessage({id:"request.error"})),e.abrupt("return",{data:[],success:!1,total:0});case 24:e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(10),console.error("查询MCP服务器失败:",e.t0),K.yw.error(a.formatMessage({id:"request.error"})),e.abrupt("return",{data:[],success:!1,total:0});case 31:case"end":return e.stop()}}),e,null,[[10,26]])})));return function(r,t,a){return e.apply(this,arguments)}}();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(v.Z,{headerTitle:a.formatMessage({id:"pages.mcp.title",defaultMessage:"MCP服务器管理"}),actionRef:t,rowKey:"uid",search:{labelWidth:"auto"},toolBarRender:function(){return e=[(0,W.jsx)(x.ZP,{type:"primary",icon:(0,W.jsx)(j.Z,{}),onClick:Me,children:a.formatMessage({id:"create.mcp",defaultMessage:"新建MCP服务器"})},"create")],r=[{key:"export-current",icon:(0,W.jsx)(b.Z,{}),label:a.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return ye("current")}}],ue>0&&(ue<=1e3?r.push({key:"export-all",icon:(0,W.jsx)(b.Z,{}),label:a.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(ue,"条)"),onClick:function(){return ye("all")}}):r.push({key:"export-range",icon:(0,W.jsx)(b.Z,{}),label:a.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(ue,"条)"),children:Ce(ue)})),e.push((0,W.jsx)(y.Z,{menu:{items:r},placement:"bottom",children:(0,W.jsxs)(x.ZP,{type:"primary",icon:(0,W.jsx)(b.Z,{}),children:[a.formatMessage({id:"export",defaultMessage:"导出"}),(0,W.jsx)(k.Z,{})]})},"export")),e;var e,r},request:Pe,columns:Ze,scroll:{x:"max-content"},pagination:{pageSize:B,current:z,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,r){return"".concat(r[0],"-").concat(r[1]," / ").concat(e," ").concat(a.formatMessage({id:"items",defaultMessage:"条"}))}},options:{setting:{listsHeight:400}},size:"small"}),D&&(0,W.jsx)(Q,{isEdit:l,mcpServer:se,open:D,level:r,onClose:function(){return Y(!1)},onSubmit:xe})]})},te=t(42699),ae=a.Z.Sider,ne=a.Z.Content,se=function(){var e=(0,n.Z)(),r=e.leftSiderStyle,t=e.leftSiderWidth,o=e.contentStyle;return(0,W.jsxs)(a.Z,{children:[(0,W.jsx)(ae,{width:t,style:r,children:(0,W.jsx)(te.Z,{type:s.hnV,level:s.whQ})}),(0,W.jsx)(a.Z,{children:(0,W.jsx)(ne,{style:o,children:(0,W.jsx)(re,{level:s.whQ})})})]})}},90317:function(e,r,t){t.d(r,{Z:function(){return P}});var a=t(44194),n=t(51865),s=t.n(n),o=t(34573),i=t(86992),l=t(35779),c=t(79255),d=t(77167);const u=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],f=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,r){return s()(Object.assign(Object.assign(Object.assign({},((e,r)=>{const t=!0===r.wrap?"wrap":r.wrap;return{[`${e}-wrap-${t}`]:t&&u.includes(t)}})(e,r)),((e,r)=>{const t={};return f.forEach((a=>{t[`${e}-align-${a}`]=r.align===a})),t[`${e}-align-stretch`]=!r.align&&!!r.vertical,t})(e,r)),((e,r)=>{const t={};return p.forEach((a=>{t[`${e}-justify-${a}`]=r.justify===a})),t})(e,r)))};const m=e=>{const{componentCls:r}=e;return{[r]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},v=e=>{const{componentCls:r}=e;return{[r]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},h=e=>{const{componentCls:r}=e,t={};return u.forEach((e=>{t[`${r}-wrap-${e}`]={flexWrap:e}})),t},x=e=>{const{componentCls:r}=e,t={};return f.forEach((e=>{t[`${r}-align-${e}`]={alignItems:e}})),t},M=e=>{const{componentCls:r}=e,t={};return p.forEach((e=>{t[`${r}-justify-${e}`]={justifyContent:e}})),t};var y=(0,c.I$)("Flex",(e=>{const{paddingXS:r,padding:t,paddingLG:a}=e,n=(0,d.IX)(e,{flexGapSM:r,flexGap:t,flexGapLG:a});return[m(n),v(n),h(n),x(n),M(n)]}),(()=>({})),{resetStyle:!1}),C=function(e,r){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t};const Z=a.forwardRef(((e,r)=>{const{prefixCls:t,rootClassName:n,className:c,style:d,flex:u,gap:p,vertical:f=!1,component:m="div"}=e,v=C(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component"]),{flex:h,direction:x,getPrefixCls:M}=a.useContext(l.E_),Z=M("flex",t),[P,w,S]=y(Z),j=null!=f?f:null==h?void 0:h.vertical,b=s()(c,n,null==h?void 0:h.className,Z,w,S,g(Z,e),{[`${Z}-rtl`]:"rtl"===x,[`${Z}-gap-${p}`]:(0,i.n)(p),[`${Z}-vertical`]:j}),k=Object.assign(Object.assign({},null==h?void 0:h.style),d);return u&&(k.flex=u),p&&!(0,i.n)(p)&&(k.gap=p),P(a.createElement(m,Object.assign({ref:r,className:b,style:k},(0,o.Z)(v,["justify","wrap","align"]))))}));var P=Z}}]);